<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/silas/node-consul#readme"

    >consul (v0.28.0)</a>
</h1>
<h4>Consul client</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul">module consul</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.consul">
            function <span class="apidocSignatureSpan"></span>consul
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl">
            function <span class="apidocSignatureSpan">consul.</span>Acl
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent">
            function <span class="apidocSignatureSpan">consul.</span>Agent
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog">
            function <span class="apidocSignatureSpan">consul.</span>Catalog
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event">
            function <span class="apidocSignatureSpan">consul.</span>Event
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health">
            function <span class="apidocSignatureSpan">consul.</span>Health
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv">
            function <span class="apidocSignatureSpan">consul.</span>Kv
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock">
            function <span class="apidocSignatureSpan">consul.</span>Lock
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query">
            function <span class="apidocSignatureSpan">consul.</span>Query
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session">
            function <span class="apidocSignatureSpan">consul.</span>Session
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status">
            function <span class="apidocSignatureSpan">consul.</span>Status
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch">
            function <span class="apidocSignatureSpan">consul.</span>Watch
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.parseQueryMeta">
            function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_">
            function <span class="apidocSignatureSpan">consul.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.walk">
            function <span class="apidocSignatureSpan">consul.</span>walk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Acl.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Event.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Health.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Kv.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Lock.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Session.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Status.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Watch.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>meta</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>super_.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl">module consul.Acl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.Acl">
            function <span class="apidocSignatureSpan">consul.</span>Acl
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype">module consul.Acl.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.clone">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.create">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.get">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.info">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.list">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.update">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent">module consul.Agent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Agent">
            function <span class="apidocSignatureSpan">consul.</span>Agent
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check">module consul.Agent.Check</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.Check">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype">module consul.Agent.Check.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.fail">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.list">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.pass">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.register">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.warn">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service">module consul.Agent.Service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.Service">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype">module consul.Agent.Service.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.register">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype">module consul.Agent.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.checks">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.forceLeave">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.join">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.members">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.self">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.services">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog">module consul.Catalog</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Catalog">
            function <span class="apidocSignatureSpan">consul.</span>Catalog
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node">module consul.Catalog.Node</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.Node">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node.prototype">module consul.Catalog.Node.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.services">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service">module consul.Catalog.Service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.Service">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service.prototype">module consul.Catalog.Service.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.prototype">module consul.Catalog.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.datacenters">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.services">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event">module consul.Event</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.Event">
            function <span class="apidocSignatureSpan">consul.</span>Event
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event.prototype">module consul.Event.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.fire">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.list">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health">module consul.Health</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.Health">
            function <span class="apidocSignatureSpan">consul.</span>Health
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype">module consul.Health.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.checks">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.node">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.service">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.state">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv">module consul.Kv</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.Kv">
            function <span class="apidocSignatureSpan">consul.</span>Kv
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Kv.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype">module consul.Kv.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.del">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.delete">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>delete
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.get">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.keys">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.set">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock">module consul.Lock</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.Lock">
            function <span class="apidocSignatureSpan">consul.</span>Lock
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.super_">
            function <span class="apidocSignatureSpan">consul.Lock.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Lock.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype">module consul.Lock.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._end">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
            <span class="apidocSignatureSpan">(ctx, err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._err">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._monitor">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._run">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._session">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._wait">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query">module consul.Query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.Query">
            function <span class="apidocSignatureSpan">consul.</span>Query
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype">module consul.Query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype._params">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
            <span class="apidocSignatureSpan">(req, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.create">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.execute">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.explain">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.get">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.list">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.update">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session">module consul.Session</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.Session">
            function <span class="apidocSignatureSpan">consul.</span>Session
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype">module consul.Session.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.create">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.get">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.info">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.list">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.node">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.renew">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status">module consul.Status</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.Status">
            function <span class="apidocSignatureSpan">consul.</span>Status
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status.prototype">module consul.Status.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.leader">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.peers">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch">module consul.Watch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.Watch">
            function <span class="apidocSignatureSpan">consul.</span>Watch
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.super_">
            function <span class="apidocSignatureSpan">consul.Watch.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Watch.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype">module consul.Watch.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._err">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._run">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._wait">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.end">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.isRunning">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.updateTime">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_">module consul.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.super_">
            function <span class="apidocSignatureSpan">consul.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype">module consul.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__create">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__execute">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__push">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
            <span class="apidocSignatureSpan">(request, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._decode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._delete">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._encode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._err">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._ext">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
            <span class="apidocSignatureSpan">(eventName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._get">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._head">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._log">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
            <span class="apidocSignatureSpan">(tags, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._options">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._patch">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._plugin">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
            <span class="apidocSignatureSpan">(plugin, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._post">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._put">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._request">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul" id="apidoc.module.consul">module consul</a></h1>


    <h2>
        <a href="#apidoc.element.consul.consul" id="apidoc.element.consul.consul">
        function <span class="apidocSignatureSpan"></span>consul
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Consul(opts) {
  if (!(this instanceof Consul)) {
    return new Consul(opts);
  }

  opts = utils.defaults({}, opts);

  if (!opts.baseUrl) {
    opts.baseUrl = (opts.secure ? &#x27;https:&#x27; : &#x27;http:&#x27;) + &#x27;//&#x27; +
      (opts.host || &#x27;127.0.0.1&#x27;) + &#x27;:&#x27; +
      (opts.port || &#x27;8500&#x27;) + &#x27;/v1&#x27;;
  }
  opts.name = &#x27;consul&#x27;;
  opts.type = &#x27;json&#x27;;

  if (opts.defaults) {
    var rawDefaults = utils.normalizeKeys(opts.defaults);
    var defaults;

    constants.DEFAULT_OPTIONS.forEach(function(key) {
      if (!rawDefaults.hasOwnProperty(key)) return;
      if (!defaults) defaults = {};
      defaults[key] = rawDefaults[key];
    });

    if (defaults) this._defaults = defaults;
  }
  delete opts.defaults;

  papi.Client.call(this, opts);

  this.acl = new Consul.Acl(this);
  this.agent = new Consul.Agent(this);
  this.catalog = new Consul.Catalog(this);
  this.event = new Consul.Event(this);
  this.health = new Consul.Health(this);
  this.kv = new Consul.Kv(this);
  this.query = new Consul.Query(this);
  this.session = new Consul.Session(this);
  this.status = new Consul.Status(this);

  try {
    if (opts.promisify) {
      if (typeof opts.promisify === &#x27;function&#x27;) {
        papi.tools.promisify(this, opts.promisify);
      } else {
        papi.tools.promisify(this);
      }
    }
  } catch (err) {
    err.message = &#x27;promisify: &#x27; + err.message;
    throw err;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl" id="apidoc.element.consul.Acl">
        function <span class="apidocSignatureSpan">consul.</span>Acl
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Acl(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.<span class="apidocCodeKeywordSpan">Acl</span>(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent" id="apidoc.element.consul.Agent">
        function <span class="apidocSignatureSpan">consul.</span>Agent
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.Check(consul);
  this.service = new Agent.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.<span class="apidocCodeKeywordSpan">Agent</span>(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check" id="apidoc.element.consul.Agent.Check">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service" id="apidoc.element.consul.Agent.Service">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog" id="apidoc.element.consul.Catalog">
        function <span class="apidocSignatureSpan">consul.</span>Catalog
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.Node(consul);
  this.service = new Catalog.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.<span class="apidocCodeKeywordSpan">Catalog</span>(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node" id="apidoc.element.consul.Catalog.Node">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service" id="apidoc.element.consul.Catalog.Service">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event" id="apidoc.element.consul.Event">
        function <span class="apidocSignatureSpan">consul.</span>Event
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Event(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.<span class="apidocCodeKeywordSpan">Event</span>(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health" id="apidoc.element.consul.Health">
        function <span class="apidocSignatureSpan">consul.</span>Health
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Health(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.<span class="apidocCodeKeywordSpan">Health</span>(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv" id="apidoc.element.consul.Kv">
        function <span class="apidocSignatureSpan">consul.</span>Kv
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Kv(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.<span class="apidocCodeKeywordSpan">Kv</span>(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock" id="apidoc.element.consul.Lock">
        function <span class="apidocSignatureSpan">consul.</span>Lock
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Lock(consul, opts) {
  events.EventEmitter.call(this);

  opts = utils.normalizeKeys(opts);

  this.consul = consul;
  this._opts = opts;

  if (opts.session) {
    switch (typeof opts.session) {
      case &#x27;string&#x27;:
        opts.session = { id: opts.session };
        break;
      case &#x27;object&#x27;:
        opts.session = utils.normalizeKeys(opts.session);
        break;
      default:
        throw errors.Validation(&#x27;session must be an object or string&#x27;);
    }
  } else {
    opts.session = {};
  }

  if (!opts.key) {
    throw errors.Validation(&#x27;key required&#x27;);
  } else if (typeof opts.key !== &#x27;string&#x27;) {
    throw errors.Validation(&#x27;key must be a string&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Lock helper.
 */

Consul.meta.lock = { type: &#x27;eventemitter&#x27; };

Consul.prototype.lock = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Lock</span>(this, opts);
};

/**
 * Watch helper.
 */

Consul.meta.watch = { type: &#x27;eventemitter&#x27; };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query" id="apidoc.element.consul.Query">
        function <span class="apidocSignatureSpan">consul.</span>Query
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.<span class="apidocCodeKeywordSpan">Query</span>(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session" id="apidoc.element.consul.Session">
        function <span class="apidocSignatureSpan">consul.</span>Session
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.<span class="apidocCodeKeywordSpan">Session</span>(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
    } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status" id="apidoc.element.consul.Status">
        function <span class="apidocSignatureSpan">consul.</span>Status
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Status(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.<span class="apidocCodeKeywordSpan">Status</span>(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
    } else {
      papi.tools.promisify(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch" id="apidoc.element.consul.Watch">
        function <span class="apidocSignatureSpan">consul.</span>Watch
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watch(consul, opts) {
  var self = this;

  events.EventEmitter.call(self);

  opts = utils.normalizeKeys(opts);

  var options = utils.normalizeKeys(opts.options || {});
  options = utils.defaults(options, consul._defaults);
  options.wait = options.wait || &#x27;30s&#x27;;
  options.index = options.index || &#x27;0&#x27;;

  self._context = { consul: consul };
  self._options = options;
  self._attempts = 0;
  self._method = opts.method;

  if (typeof opts.method !== &#x27;function&#x27;) {
    throw errors.Validation(&#x27;method required&#x27;);
  }

  process.nextTick(function() { self._run(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Watch helper.
 */

Consul.meta.watch = { type: &#x27;eventemitter&#x27; };

Consul.prototype.watch = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Watch</span>(this, opts);
};

/**
 * Walk methods
 */

Consul.meta.walk = { type: &#x27;sync&#x27; };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.parseQueryMeta" id="apidoc.element.consul.parseQueryMeta">
        function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseQueryMeta = function (res) {
  return utils.parseQueryMeta(res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: &#x27;sync&#x27; };

Consul.parseQueryMeta = Consul.prototype.parseQueryMeta = function(res) {
  return utils.<span class="apidocCodeKeywordSpan">parseQueryMeta</span>(res);
};

/**
 * Module exports.
 */

exports.Consul = Consul;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_" id="apidoc.element.consul.super_">
        function <span class="apidocSignatureSpan">consul.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(opts) {
  if (!(this instanceof Client)) {
    return new Client(opts);
  }

  events.EventEmitter.call(this);

  opts = opts || {};

  if (typeof opts === &#x27;string&#x27;) {
    opts = { baseUrl: opts };
  } else {
    opts = utils.merge(opts);
  }

  if (!opts.baseUrl) {
    throw errors.Validation(&#x27;baseUrl required&#x27;);
  }

  if (!(opts.baseUrl instanceof url.Url)) {
    if (typeof opts.baseUrl !== &#x27;string&#x27;) {
      throw errors.Validation(&#x27;baseUrl must be a string: &#x27; + opts.baseUrl);
    }

    opts.baseUrl = url.parse(opts.baseUrl);
  }

  var path = opts.baseUrl.pathname;
  opts.baseUrl = utils.pick(opts.baseUrl,
    &#x27;auth&#x27;, &#x27;hostname&#x27;, &#x27;port&#x27;, &#x27;protocol&#x27;);
  opts.baseUrl.path = path;

  if (opts.baseUrl.path === &#x27;/&#x27;) {
    opts.baseUrl.path = &#x27;&#x27;;
  } else if (opts.baseUrl.path[opts.baseUrl.path.length - 1] === &#x27;/&#x27;) {
    throw errors.Validation(&#x27;baseUrl must not end with a forward slash&#x27;);
  }

  opts.headers = utils.mergeHeaders(opts.headers);
  if (opts.tags) {
    if (Array.isArray(opts.tags)) {
      opts.tags = opts.tags.slice(0);
    } else {
      throw errors.Validation(&#x27;tags must be an array&#x27;);
    }
  } else {
    opts.tags = [];
  }

  if (opts.name &#x26;&#x26; !~opts.tags.indexOf(opts.name)) {
    opts.tags.push(opts.name);
  }

  opts.encoders = utils.merge(constants.ENCODERS, opts.encoders);
  opts.decoders = utils.merge(constants.DECODERS, opts.decoders);

  this._opts = opts;
  this._exts = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.walk" id="apidoc.element.consul.walk">
        function <span class="apidocSignatureSpan">consul.</span>walk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">walk = function () {
  return papi.tools.walk(Consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Walk methods
 */

Consul.meta.walk = { type: &#x27;sync&#x27; };

Consul.walk = Consul.prototype.walk = function() {
  return papi.tools.<span class="apidocCodeKeywordSpan">walk</span>(Consul);
};

/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: &#x27;sync&#x27; };
...</pre></li>
    </ul>




































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl" id="apidoc.module.consul.Acl">module consul.Acl</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.Acl" id="apidoc.element.consul.Acl.Acl">
        function <span class="apidocSignatureSpan">consul.</span>Acl
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Acl(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.<span class="apidocCodeKeywordSpan">Acl</span>(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype" id="apidoc.module.consul.Acl.prototype">module consul.Acl.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.clone" id="apidoc.element.consul.Acl.prototype.clone">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.clone&#x27;,
    path: &#x27;/acl/clone/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 &#x22;Name&#x22;: &#x22;Read only&#x22;,
 &#x22;Type&#x22;: &#x22;client&#x22;,
 &#x22;Rules&#x22;: &#x22;{\&#x22;key\&#x22;:{\&#x22;\&#x22;:{\&#x22;policy\&#x22;:\&#x22;read\&#x22;}}}&#x22;
}
```

&#x3c;a name=&#x22;acl-clone&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">clone</span>(options, callback)

Creates a new token by cloning an existing token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.create" id="apidoc.element.consul.Acl.prototype.create">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.create&#x27;,
    path: &#x27;/acl/create&#x27;,
    query: {},
    type: &#x27;json&#x27;,
    body: {},
  };

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&#x3c;a name=&#x22;acl-create&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.destroy" id="apidoc.element.consul.Acl.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.destroy&#x27;,
    path: &#x27;/acl/destroy/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: &#x27;63e1d82e-f718-eb92-3b7d-61f0c71d45b4&#x27;, name: &#x27;test&#x27; }, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-destroy&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.get" id="apidoc.element.consul.Acl.prototype.get">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.info&#x27;,
    path: &#x27;/acl/info/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy(&#x27;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-get&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.info" id="apidoc.element.consul.Acl.prototype.info">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.info&#x27;,
    path: &#x27;/acl/info/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.list" id="apidoc.element.consul.Acl.prototype.list">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.list&#x27;,
    path: &#x27;/acl/list&#x27;,
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.update" id="apidoc.element.consul.Acl.prototype.update">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;acl.update&#x27;,
    path: &#x27;/acl/update&#x27;,
    query: {},
    type: &#x27;json&#x27;,
    body: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  req.body.ID = opts.id;

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 &#x22;ID&#x22;: &#x22;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x22;
}
```

&#x3c;a name=&#x22;acl-update&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent" id="apidoc.module.consul.Agent">module consul.Agent</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Agent" id="apidoc.element.consul.Agent.Agent">
        function <span class="apidocSignatureSpan">consul.</span>Agent
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.Check(consul);
  this.service = new Agent.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.<span class="apidocCodeKeywordSpan">Agent</span>(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check" id="apidoc.element.consul.Agent.Check">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Agent` client.
 */

function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.<span class="apidocCodeKeywordSpan">Check</span>(consul);
  this.service = new Agent.Service(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service" id="apidoc.element.consul.Agent.Service">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check" id="apidoc.module.consul.Agent.Check">module consul.Agent.Check</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.Check" id="apidoc.element.consul.Agent.Check.Check">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Agent` client.
 */

function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.<span class="apidocCodeKeywordSpan">Check</span>(consul);
  this.service = new Agent.Service(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype" id="apidoc.module.consul.Agent.Check.prototype">module consul.Agent.Check.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.deregister" id="apidoc.element.consul.Agent.Check.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.deregister&#x27;,
    path: &#x27;/agent/check/deregister/{id}&#x27;,
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-check-deregister&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.fail" id="apidoc.element.consul.Agent.Check.prototype.fail">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.fail&#x27;,
    path: &#x27;/agent/check/fail/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.warn(&#x27;example&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-check-fail&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">fail</span>(options, callback)

Mark a test as critical.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.list" id="apidoc.element.consul.Agent.Check.prototype.list">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.list&#x27;,
    path: &#x27;/agent/checks&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.pass" id="apidoc.element.consul.Agent.Check.prototype.pass">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pass = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.pass&#x27;,
    path: &#x27;/agent/check/pass/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.deregister(&#x27;example&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-check-pass&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">pass</span>(options, callback)

Mark a test as passing.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.register" id="apidoc.element.consul.Agent.Check.prototype.register">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.register&#x27;,
    path: &#x27;/agent/check/register&#x27;,
    type: &#x27;json&#x27;,
  };

  try {
    req.body = utils.createCheck(opts);
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;ServiceID&#x22;: &#x22;&#x22;,
   &#x22;ServiceName&#x22;: &#x22;&#x22;
 }
}
```

&#x3c;a name=&#x22;agent-check-register&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.warn" id="apidoc.element.consul.Agent.Check.prototype.warn">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.check.warn&#x27;,
    path: &#x27;/agent/check/warn/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.pass(&#x27;example&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-check-warn&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">warn</span>(options, callback)

Mark a test as warning.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service" id="apidoc.module.consul.Agent.Service">module consul.Agent.Service</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.Service" id="apidoc.element.consul.Agent.Service.Service">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype" id="apidoc.module.consul.Agent.Service.prototype">module consul.Agent.Service.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.deregister" id="apidoc.element.consul.Agent.Service.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.service.deregister&#x27;,
    path: &#x27;/agent/service/deregister/{id}&#x27;,
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-check-deregister&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.list" id="apidoc.element.consul.Agent.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.service.list&#x27;,
    path: &#x27;/agent/services&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.maintenance" id="apidoc.element.consul.Agent.Service.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.service.maintenance&#x27;,
    path: &#x27;/agent/service/maintenance/{id}&#x27;,
    params: { id: opts.id },
    query: { enable: opts.enable },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }
  if (typeof opts.enable !== &#x27;boolean&#x27;) {
    return callback(this.consul._err(errors.Validation(&#x27;enable required&#x27;), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;DelegateMax&#x22;: 4,
   &#x22;DelegateCur&#x22;: 4
 }
}
```

&#x3c;a name=&#x22;agent-maintenance&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.register" id="apidoc.element.consul.Agent.Service.prototype.register">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.service.register&#x27;,
    path: &#x27;/agent/service/register&#x27;,
    type: &#x27;json&#x27;,
    body: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation(&#x27;name required&#x27;), req));
  }

  req.body.Name = opts.name;
  if (opts.id) req.body.ID = opts.id;
  if (opts.tags) req.body.Tags = opts.tags;
  if (opts.hasOwnProperty(&#x27;address&#x27;)) req.body.Address = opts.address;
  if (opts.hasOwnProperty(&#x27;port&#x27;)) req.body.Port = opts.port;

  try {
    if (Array.isArray(opts.checks)) {
      req.body.Checks = opts.checks.map(utils.createServiceCheck);
    } else if (opts.check) {
      req.body.Check = utils.createServiceCheck(opts.check);
    }
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;ServiceID&#x22;: &#x22;&#x22;,
   &#x22;ServiceName&#x22;: &#x22;&#x22;
 }
}
```

&#x3c;a name=&#x22;agent-check-register&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype" id="apidoc.module.consul.Agent.prototype">module consul.Agent.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.checks" id="apidoc.element.consul.Agent.prototype.checks">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function () {
  this.check.list.apply(this.check, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;ServiceID&#x22;: &#x22;example&#x22;,
   &#x22;ServiceName&#x22;: &#x22;example&#x22;
 }
]
```

&#x3c;a name=&#x22;health-checks&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.forceLeave" id="apidoc.element.consul.Agent.prototype.forceLeave">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceLeave = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.forceLeave&#x27;,
    path: &#x27;/agent/force-leave/{node}&#x27;,
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation(&#x27;node required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.join(&#x27;127.0.0.2&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-force-leave&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">forceLeave</span>(options, callback)

Force remove node.

Options

* node (String): node name to remove
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.join" id="apidoc.element.consul.Agent.prototype.join">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { address: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.join&#x27;,
    path: &#x27;/agent/join/{address}&#x27;,
    params: { address: opts.address },
  };

  if (!opts.address) {
    return callback(this.consul._err(errors.Validation(&#x27;address required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.maintenance(true, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;agent-join&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">join</span>(options, callback)

Trigger agent to join a node.

Options

* address (String): node IP address to join
* wan (Boolean, default false): attempt to join using the WAN pool
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.maintenance" id="apidoc.element.consul.Agent.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  if (typeof opts === &#x27;boolean&#x27;) {
    opts = { enable: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.maintenance&#x27;,
    path: &#x27;/agent/maintenance&#x27;,
    query: { enable: opts.enable },
  };

  if (typeof opts.enable !== &#x27;boolean&#x27;) {
    return callback(this.consul._err(errors.Validation(&#x27;enable required&#x27;), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;DelegateMax&#x22;: 4,
   &#x22;DelegateCur&#x22;: 4
 }
}
```

&#x3c;a name=&#x22;agent-maintenance&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.members" id="apidoc.element.consul.Agent.prototype.members">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">members = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.members&#x27;,
    path: &#x27;/agent/members&#x27;,
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [members](#agent-members)
* [self](#agent-self)
* [maintenance](#agent-maintenance)
* [join](#agent-join)
* [forceLeave](#agent-force-leave)

&#x3c;a name=&#x22;agent-members&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">members</span>([options], callback)

Returns the members as seen by the consul agent.

Options

* wan (Boolean, default: false): return WAN members instead of LAN members
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.self" id="apidoc.element.consul.Agent.prototype.self">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">self = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;agent.self&#x27;,
    path: &#x27;/agent/self&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    &#x22;DelegateMax&#x22;: 4,
    &#x22;DelegateCur&#x22;: 4
  }
]
```

&#x3c;a name=&#x22;agent-self&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.agent.<span class="apidocCodeKeywordSpan">self</span>(callback)

Returns the agent node configuration.

Usage

``` javascript
consul.agent.self(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.services" id="apidoc.element.consul.Agent.prototype.services">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;Node&#x22;: &#x22;node1&#x22;,
   &#x22;Address&#x22;: &#x22;127.0.0.1&#x22;
 }
]
```

&#x3c;a name=&#x22;catalog-node-services&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog" id="apidoc.module.consul.Catalog">module consul.Catalog</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Catalog" id="apidoc.element.consul.Catalog.Catalog">
        function <span class="apidocSignatureSpan">consul.</span>Catalog
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.Node(consul);
  this.service = new Catalog.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.<span class="apidocCodeKeywordSpan">Catalog</span>(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node" id="apidoc.element.consul.Catalog.Node">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Catalog` client.
 */

function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.<span class="apidocCodeKeywordSpan">Node</span>(consul);
  this.service = new Catalog.Service(consul);
}

Catalog.Node = CatalogNode;
Catalog.Service = CatalogService;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service" id="apidoc.element.consul.Catalog.Service">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node" id="apidoc.module.consul.Catalog.Node">module consul.Catalog.Node</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.Node" id="apidoc.element.consul.Catalog.Node.Node">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Catalog` client.
 */

function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.<span class="apidocCodeKeywordSpan">Node</span>(consul);
  this.service = new Catalog.Service(consul);
}

Catalog.Node = CatalogNode;
Catalog.Service = CatalogService;

/**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node.prototype" id="apidoc.module.consul.Catalog.Node.prototype">module consul.Catalog.Node.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.list" id="apidoc.element.consul.Catalog.Node.prototype.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === &#x27;string&#x27;) {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;catalog.node.list&#x27;,
    path: &#x27;/catalog/nodes&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.services" id="apidoc.element.consul.Catalog.Node.prototype.services">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;catalog.node.services&#x27;,
    path: &#x27;/catalog/node/{node}&#x27;,
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation(&#x27;node required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;Node&#x22;: &#x22;node1&#x22;,
   &#x22;Address&#x22;: &#x22;127.0.0.1&#x22;
 }
]
```

&#x3c;a name=&#x22;catalog-node-services&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service" id="apidoc.module.consul.Catalog.Service">module consul.Catalog.Service</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.Service" id="apidoc.element.consul.Catalog.Service.Service">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service.prototype" id="apidoc.module.consul.Catalog.Service.prototype">module consul.Catalog.Service.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.list" id="apidoc.element.consul.Catalog.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === &#x27;string&#x27;) {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;catalog.service.list&#x27;,
    path: &#x27;/catalog/services&#x27;,
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.nodes" id="apidoc.element.consul.Catalog.Service.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;catalog.service.nodes&#x27;,
    path: &#x27;/catalog/service/{service}&#x27;,
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation(&#x27;service required&#x27;), req));
  }
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;dev&#x22;,
   &#x22;web&#x22;
 ]
}
```

&#x3c;a name=&#x22;catalog-service-nodes&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.prototype" id="apidoc.module.consul.Catalog.prototype">module consul.Catalog.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.datacenters" id="apidoc.element.consul.Catalog.prototype.datacenters">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">datacenters = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;catalog.datacenters&#x27;,
    path: &#x27;/catalog/datacenters&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### consul.catalog

 * [node](#catalog-node)
 * [service](#catalog-service)
 * [datacenters](#catalog-datacenters)

&#x3c;a name=&#x22;catalog-datacenters&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.<span class="apidocCodeKeywordSpan">datacenters</span>(callback)

Lists known datacenters.

Usage

``` javascript
consul.catalog.datacenters(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.nodes" id="apidoc.element.consul.Catalog.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function () {
  this.node.list.apply(this.node, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;dev&#x22;,
   &#x22;web&#x22;
 ]
}
```

&#x3c;a name=&#x22;catalog-service-nodes&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.services" id="apidoc.element.consul.Catalog.prototype.services">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;Node&#x22;: &#x22;node1&#x22;,
   &#x22;Address&#x22;: &#x22;127.0.0.1&#x22;
 }
]
```

&#x3c;a name=&#x22;catalog-node-services&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event" id="apidoc.module.consul.Event">module consul.Event</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.Event" id="apidoc.element.consul.Event.Event">
        function <span class="apidocSignatureSpan">consul.</span>Event
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Event(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.<span class="apidocCodeKeywordSpan">Event</span>(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event.prototype" id="apidoc.module.consul.Event.prototype">module consul.Event.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.prototype.fire" id="apidoc.element.consul.Event.prototype.fire">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fire = function (opts, callback) {
  if (arguments.length === 3) {
    opts = {
      name: arguments[0],
      payload: arguments[1],
    };
    callback = arguments[2];
  } else if (typeof opts === &#x27;string&#x27;) {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;event.fire&#x27;,
    path: &#x27;/event/fire/{name}&#x27;,
    params: { name: opts.name },
    query: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation(&#x27;name required&#x27;), req));
  }

  var buffer;

  if (opts.hasOwnProperty(&#x27;payload&#x27;)) {
    buffer = Buffer.isBuffer(opts.payload);
    req.body = buffer ? opts.payload : new Buffer(opts.payload);
  }
  if (opts.node) req.query.node = opts.node;
  if (opts.service) req.query.service = opts.service;
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._put(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    if (data.hasOwnProperty(&#x27;Payload&#x27;)) {
      data.Payload = utils.decode(data.Payload, { buffer: buffer });
    }

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3c;a name=&#x22;event&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.event

* [fire](#event-fire)
* [list](#event-list)

&#x3c;a name=&#x22;event-fire&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.event.<span class="apidocCodeKeywordSpan">fire</span>(options, callback)

Fires a new user event.

Options

* name (String): event name
* payload (String|Buffer): payload
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event.prototype.list" id="apidoc.element.consul.Event.prototype.list">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { name: opts };
  } else if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;event.list&#x27;,
    path: &#x27;/event/list&#x27;,
    query: {},
  };

  if (opts.name) req.query.name = opts.name;

  utils.options(req, opts);

  this.consul._get(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    data.forEach(function(item) {
      if (!item.hasOwnProperty(&#x27;Payload&#x27;)) return;
      item.Payload = utils.decode(item.Payload, opts);
    });

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health" id="apidoc.module.consul.Health">module consul.Health</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.Health" id="apidoc.element.consul.Health.Health">
        function <span class="apidocSignatureSpan">consul.</span>Health
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Health(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.<span class="apidocCodeKeywordSpan">Health</span>(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype" id="apidoc.module.consul.Health.prototype">module consul.Health.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.checks" id="apidoc.element.consul.Health.prototype.checks">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;health.checks&#x27;,
    path: &#x27;/health/checks/{service}&#x27;,
    params: { service: opts.service },
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation(&#x27;service required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;ServiceID&#x22;: &#x22;example&#x22;,
   &#x22;ServiceName&#x22;: &#x22;example&#x22;
 }
]
```

&#x3c;a name=&#x22;health-checks&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.node" id="apidoc.element.consul.Health.prototype.node">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;health.node&#x27;,
    path: &#x27;/health/node/{node}&#x27;,
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation(&#x27;node required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&#x3c;a name=&#x22;health-node&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.service" id="apidoc.element.consul.Health.prototype.service">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">service = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;health.service&#x27;,
    path: &#x27;/health/service/{service}&#x27;,
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation(&#x27;service required&#x27;), req));
  }

  if (opts.tag) req.query.tag = opts.tag;
  if (opts.passing) req.query.passing = &#x27;true&#x27;;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   &#x22;ServiceID&#x22;: &#x22;example&#x22;,
   &#x22;ServiceName&#x22;: &#x22;example&#x22;
 }
]
```

&#x3c;a name=&#x22;health-service&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">service</span>(options, callback)

Returns the nodes and health info of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.state" id="apidoc.element.consul.Health.prototype.state">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">state = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { state: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;health.state&#x27;,
    path: &#x27;/health/state/{state}&#x27;,
    params: { state: opts.state },
  };

  if (!opts.state) {
    return callback(this.consul._err(errors.Validation(&#x27;state required&#x27;), req));
  }

  if (opts.state !== &#x27;any&#x27; &#x26;&#x26; constants.CHECK_STATE.indexOf(opts.state) &#x3c; 0) {
    return callback(this.consul._err(errors.Validation(&#x27;state invalid: &#x27; + opts.state), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     }
   ]
 }
]
```

&#x3c;a name=&#x22;health-state&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">state</span>(options, callback)

Returns the checks in a given state.

Options

* state (String, enum: any, passing, warning, critical): state
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv" id="apidoc.module.consul.Kv">module consul.Kv</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.Kv" id="apidoc.element.consul.Kv.Kv">
        function <span class="apidocSignatureSpan">consul.</span>Kv
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Kv(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.<span class="apidocCodeKeywordSpan">Kv</span>(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype" id="apidoc.module.consul.Kv.prototype">module consul.Kv.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.del" id="apidoc.element.consul.Kv.prototype.del">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;kv.del&#x27;,
    path: &#x27;/kv/{key}&#x27;,
    params: { key: (opts.key || &#x27;&#x27;) },
    query: {},
  };

  if (opts.recurse) req.query.recurse = &#x27;true&#x27;;

  if (opts.hasOwnProperty(&#x27;cas&#x27;)) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
true
```

&#x3c;a name=&#x22;kv-del&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.kv.<span class="apidocCodeKeywordSpan">del</span>(options, callback)

Delete key/value (kv) pair(s).

Options

* key (String): key
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.delete" id="apidoc.element.consul.Kv.prototype.delete">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>delete
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;kv.del&#x27;,
    path: &#x27;/kv/{key}&#x27;,
    params: { key: (opts.key || &#x27;&#x27;) },
    query: {},
  };

  if (opts.recurse) req.query.recurse = &#x27;true&#x27;;

  if (opts.hasOwnProperty(&#x27;cas&#x27;)) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.get" id="apidoc.element.consul.Kv.prototype.get">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;kv.get&#x27;,
    path: &#x27;/kv/{key}&#x27;,
    params: { key: (opts.key || &#x27;&#x27;) },
    query: {},
  };

  if (opts.recurse) req.query.recurse = &#x27;true&#x27;;
  if (opts.raw) {
    req.query.raw = &#x27;true&#x27;;
    req.buffer = true;
  }

  utils.options(req, opts);

  this.consul._get(req, function(err, res) {
    if (res &#x26;&#x26; res.statusCode === 404) return callback(undefined, undefined, res);
    if (err) return callback(err, undefined, res);
    if (opts.raw) return callback(null, res.body, res);

    if (res.body &#x26;&#x26; Array.isArray(res.body) &#x26;&#x26; res.body.length) {
      res.body.forEach(function(item) {
        if (!item.hasOwnProperty(&#x27;Value&#x27;)) return;
        item.Value = utils.decode(item.Value, opts);
      });
    } else {
      return callback(undefined, undefined, res);
    }

    if (!opts.recurse) return callback(null, res.body[0], res);

    callback(null, res.body, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy(&#x27;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-get&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.keys" id="apidoc.element.consul.Kv.prototype.keys">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keys = function (opts, callback) {
  switch (typeof opts) {
    case &#x27;string&#x27;:
      opts = { key: opts };
      break;
    case &#x27;function&#x27;:
      callback = opts;
      opts = {};
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;kv.keys&#x27;,
    path: &#x27;/kv/{key}&#x27;,
    params: { key: (opts.key || &#x27;&#x27;) },
    query: { keys: true },
  };

  if (opts.separator) req.query.separator = opts.separator;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 &#x22;Key&#x22;: &#x22;hello&#x22;,
 &#x22;Flags&#x22;: 0,
 &#x22;Value&#x22;: &#x22;world&#x22;
}
```

&#x3c;a name=&#x22;kv-keys&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.kv.<span class="apidocCodeKeywordSpan">keys</span>(options, callback)

Return keys for a given prefix.

Options

* key (String): path prefix
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.set" id="apidoc.element.consul.Kv.prototype.set">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (opts, callback) {
  switch (arguments.length) {
    case 4:
      // set(key, value, opts, callback)
      opts = arguments[2];
      opts.key = arguments[0];
      opts.value = arguments[1];
      callback = arguments[3];
      break;
    case 3:
      // set(key, value, callback)
      opts = {
        key: arguments[0],
        value: arguments[1],
      };
      callback = arguments[2];
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;kv.set&#x27;,
    path: &#x27;/kv/{key}&#x27;,
    params: { key: opts.key },
    query: {},
    type: &#x27;text&#x27;,
    body: opts.value || &#x27;&#x27;,
  };

  if (!opts.key) {
    return callback(this.consul._err(errors.Validation(&#x27;key required&#x27;), req));
  }
  if (!opts.hasOwnProperty(&#x27;value&#x27;)) {
    return callback(this.consul._err(errors.Validation(&#x27;value required&#x27;), req));
  }

  if (opts.hasOwnProperty(&#x27;cas&#x27;)) req.query.cas = opts.cas;
  if (opts.hasOwnProperty(&#x27;flags&#x27;)) req.query.flags = opts.flags;
  if (opts.hasOwnProperty(&#x27;acquire&#x27;)) req.query.acquire = opts.acquire;
  if (opts.hasOwnProperty(&#x27;release&#x27;)) req.query.release = opts.release;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[
 &#x22;a/b&#x22;,
 &#x22;a/c&#x22;
]
```

&#x3c;a name=&#x22;kv-set&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.kv.<span class="apidocCodeKeywordSpan">set</span>(options, callback)

Set key/value (kv) pair.

Options

* key (String): key
* value (String|Buffer): value
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock" id="apidoc.module.consul.Lock">module consul.Lock</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.Lock" id="apidoc.element.consul.Lock.Lock">
        function <span class="apidocSignatureSpan">consul.</span>Lock
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Lock(consul, opts) {
  events.EventEmitter.call(this);

  opts = utils.normalizeKeys(opts);

  this.consul = consul;
  this._opts = opts;

  if (opts.session) {
    switch (typeof opts.session) {
      case &#x27;string&#x27;:
        opts.session = { id: opts.session };
        break;
      case &#x27;object&#x27;:
        opts.session = utils.normalizeKeys(opts.session);
        break;
      default:
        throw errors.Validation(&#x27;session must be an object or string&#x27;);
    }
  } else {
    opts.session = {};
  }

  if (!opts.key) {
    throw errors.Validation(&#x27;key required&#x27;);
  } else if (typeof opts.key !== &#x27;string&#x27;) {
    throw errors.Validation(&#x27;key must be a string&#x27;);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Lock helper.
 */

Consul.meta.lock = { type: &#x27;eventemitter&#x27; };

Consul.prototype.lock = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Lock</span>(this, opts);
};

/**
 * Watch helper.
 */

Consul.meta.watch = { type: &#x27;eventemitter&#x27; };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.super_" id="apidoc.element.consul.Lock.super_">
        function <span class="apidocSignatureSpan">consul.Lock.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype" id="apidoc.module.consul.Lock.prototype">module consul.Lock.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._acquire" id="apidoc.element.consul.Lock.prototype._acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_acquire = function (ctx) {
  var self = this;

  var opts = utils.defaults({
    key: ctx.key,
    acquire: ctx.session.id,
    ctx: ctx,
    value: ctx.value,
    flags: LOCK_FLAG_VALUE,
  }, self.consul._defaults);

  self.consul.kv.set(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data !== true) {
      ctx.state = &#x27;wait&#x27;;

      return utils.setTimeoutContext(function() { self._run(ctx); }, ctx,
        ctx.lockRetryTime);
    }

    ctx.held = true;
    self.emit(&#x27;acquire&#x27;);

    ctx.state = &#x27;monitor&#x27;;

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  switch (ctx.state) {
    case &#x27;session&#x27;:
      return this._session(ctx);
    case &#x27;wait&#x27;:
      return this._wait(ctx);
    case &#x27;acquire&#x27;:
      return this.<span class="apidocCodeKeywordSpan">_acquire</span>(ctx);
    case &#x27;monitor&#x27;:
      return this._monitor(ctx);
    default:
      throw new Error(&#x27;invalid state: &#x27; + ctx.state);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._end" id="apidoc.element.consul.Lock.prototype._end">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
        <span class="apidocSignatureSpan">(ctx, err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_end = function (ctx, err, res) {
  var self = this;

  if (ctx.end) return;
  ctx.end = true;

  delete self._ctx;

  if (err) self._err(err, res);

  if (ctx.monitor) {
    ctx.monitor.removeAllListeners();
    ctx.monitor.end();

    delete ctx.monitor;
  }

  if (ctx.renewSession) {
    clearInterval(ctx.renewSession);

    var opts = utils.defaults({
      id: ctx.session.id,
      timeout: 1000,
    }, self.consul._defaults);

    self.consul.session.destroy(opts, function() {
      // ignore errors
    });

    delete ctx.renewSession;
  }

  // abort any pending requests
  ctx.emit(&#x27;cancel&#x27;);

  if (ctx.held) {
    ctx.held = false;
    self.emit(&#x27;release&#x27;);
  }

  self.emit(&#x27;end&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
if (err) {
  err.message = &#x27;session create: &#x27; + err.message;
  return self.<span class="apidocCodeKeywordSpan">_end</span>(ctx, err, res);
}

ctx.session = {
  id: data.ID,
  ttl: opts.ttl,
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._err" id="apidoc.element.consul.Lock.prototype._err">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  self.emit(&#x27;error&#x27;, err, res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: &#x27;/acl/update&#x27;,
  query: {},
  type: &#x27;json&#x27;,
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation(&#x27;id required&#x27;), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._monitor" id="apidoc.element.consul.Lock.prototype._monitor">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_monitor = function (ctx) {
  var self = this;

  var monitor = ctx.monitor = self.consul.watch({
    method: self.consul.kv.get,
    options: utils.defaults({
      key: ctx.key,
      wait: ctx.lockWaitTime,
      timeout: ctx.lockWaitTimeout,
      index: ctx.index,
    }, self.consul._defaults),
  });

  var ttl = ctx.session.ttl &#x26;&#x26; utils.parseDuration(ctx.session.ttl);

  // monitor updates
  if (ttl) {
    utils.setIntervalContext(function() {
      var time = monitor.updateTime();

      if (time &#x26;&#x26; new Date() - time &#x3e; ttl + 1000) {
        monitor.end();
      }
    }, ctx, Math.min(1000, ttl));
  }

  monitor.on(&#x27;change&#x27;, function(data) {
    if (data) {
      if (data.Session !== ctx.session.id) {
        return monitor.end();
      }
    }
  });

  monitor.on(&#x27;error&#x27;, function() {
    // ignore errors
  });

  monitor.on(&#x27;end&#x27;, function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   case &#x27;session&#x27;:
     return this._session(ctx);
   case &#x27;wait&#x27;:
     return this._wait(ctx);
   case &#x27;acquire&#x27;:
     return this._acquire(ctx);
   case &#x27;monitor&#x27;:
     return this.<span class="apidocCodeKeywordSpan">_monitor</span>(ctx);
   default:
     throw new Error(&#x27;invalid state: &#x27; + ctx.state);
 }
};

/**
* Create lock session
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._release" id="apidoc.element.consul.Lock.prototype._release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_release = function (ctx) {
  var self = this;

  if (ctx.held) {
    var opts = utils.defaults({
      key: ctx.key,
      release: ctx.session.id,
      ctx: ctx,
      value: ctx.value,
      flags: LOCK_FLAG_VALUE,
    }, self.consul._defaults);

    self.consul.kv.set(opts, function(err, data) {
      if (err) return self._end(ctx, err);

      if (data !== true) {
        err = new Error(&#x27;failed to release lock&#x27;);
        return self._end(ctx, err);
      }

      self._end(ctx);
    });

    return;
  }

  process.nextTick(function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 var ctx = self._ctx;

 if (!self._ctx) throw errors.Validation(&#x27;no lock in use&#x27;);

 delete self._ctx;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_release</span>(ctx);
 });
};

/**
* Error helper
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._run" id="apidoc.element.consul.Lock.prototype._run">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function (ctx) {
  if (ctx.end) return;

  switch (ctx.state) {
    case &#x27;session&#x27;:
      return this._session(ctx);
    case &#x27;wait&#x27;:
      return this._wait(ctx);
    case &#x27;acquire&#x27;:
      return this._acquire(ctx);
    case &#x27;monitor&#x27;:
      return this._monitor(ctx);
    default:
      throw new Error(&#x27;invalid state: &#x27; + ctx.state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = &#x27;session&#x27;;
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._session" id="apidoc.element.consul.Lock.prototype._session">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_session = function (ctx) {
  var self = this;

  if (!ctx.session.id) {
    var opts = utils.defaults({
      name: ctx.session.name || DEFAULT_LOCK_SESSION_NAME,
      ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
      ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
      if (err) {
        err.message = &#x27;session create: &#x27; + err.message;
        return self._end(ctx, err, res);
      }

      ctx.session = {
        id: data.ID,
        ttl: opts.ttl,
      };

      ctx.state = &#x27;wait&#x27;;

      var renewTimeout = utils.parseDuration(ctx.session.ttl) / 2;

      // renew session
      ctx.renewSession = setInterval(function() {
        var opts = utils.defaults({
          id: ctx.session.id,
          timeout: renewTimeout,
          ctx: ctx,
        }, self.consul._defaults);

        self.consul.session.renew(opts, function(err, data, res) {
          if (err) self._end(ctx, err, res);
        });
      }, renewTimeout);

      return self._run(ctx);
    });

    return;
  }

  ctx.state = &#x27;wait&#x27;;

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */

Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case &#x27;session&#x27;:
    return this.<span class="apidocCodeKeywordSpan">_session</span>(ctx);
  case &#x27;wait&#x27;:
    return this._wait(ctx);
  case &#x27;acquire&#x27;:
    return this._acquire(ctx);
  case &#x27;monitor&#x27;:
    return this._monitor(ctx);
  default:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._wait" id="apidoc.element.consul.Lock.prototype._wait">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function (ctx) {
  var self = this;

  var retry = function() {
    utils.setTimeoutContext(function() {
      self._run(ctx);
    }, ctx, ctx.lockRetryTime);
  };

  var opts = utils.defaults({
    key: ctx.key,
    wait: ctx.lockWaitTime,
    timeout: ctx.lockWaitTimeout,
    ctx: ctx,
    index: ctx.index,
  }, self.consul._defaults);

  self.consul.kv.get(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data) {
      // we try to use the same magic number as consul/api in an attempt to be
      // compatible
      if (data.Flags !== +LOCK_FLAG_VALUE) {
        err = errors.Validation(&#x27;consul: lock: existing key does not match lock use&#x27;);
        return self._end(ctx, err, res);
      }

      var newIndex = res.headers[&#x27;x-consul-index&#x27;];
      if (utils.hasIndexChanged(newIndex, ctx.index)) ctx.index = newIndex;

      if (data.Session !== ctx.Session) {
        self.emit(&#x27;retry&#x27;, { leader: data.Session });
        return retry();
      }
    } else if (res.statusCode !== 404) {
      return self._end(ctx, new Error(&#x27;consul: lock: error getting key&#x27;), res);
    }

    ctx.state = &#x27;acquire&#x27;;

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case &#x27;session&#x27;:
    return this._session(ctx);
  case &#x27;wait&#x27;:
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case &#x27;acquire&#x27;:
    return this._acquire(ctx);
  case &#x27;monitor&#x27;:
    return this._monitor(ctx);
  default:
    throw new Error(&#x27;invalid state: &#x27; + ctx.state);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.acquire" id="apidoc.element.consul.Lock.prototype.acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acquire = function () {
  var self = this;

  if (self._ctx) throw new errors.Validation(&#x27;lock in use&#x27;);

  var ctx = self._ctx = new events.EventEmitter();

  ctx.key = self._opts.key;
  ctx.session = utils.clone(self._opts.session);
  ctx.index = &#x27;0&#x27;;
  ctx.end = false;
  ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
  ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
  ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
  ctx.state = &#x27;session&#x27;;
  ctx.value = self._opts.value || null;

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log(&#x27;lock error:&#x27;, err);
});

lock.on(&#x27;end&#x27;, function(err) {
  console.log(&#x27;lock released or there was a permanent failure&#x27;);
});

lock.<span class="apidocCodeKeywordSpan">acquire</span>();
```

Result

```
lock acquired
lock released
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.release" id="apidoc.element.consul.Lock.prototype.release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function () {
  var self = this;

  var ctx = self._ctx;

  if (!self._ctx) throw errors.Validation(&#x27;no lock in use&#x27;);

  delete self._ctx;

  process.nextTick(function() {
    self._release(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

``` javascript
var lock = consul.lock({ key: &#x27;test&#x27; });

lock.on(&#x27;acquire&#x27;, function() {
  console.log(&#x27;lock acquired&#x27;);

  lock.<span class="apidocCodeKeywordSpan">release</span>();
});

lock.on(&#x27;release&#x27;, function() {
  console.log(&#x27;lock released&#x27;);
});

lock.on(&#x27;error&#x27;, function() {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query" id="apidoc.module.consul.Query">module consul.Query</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.Query" id="apidoc.element.consul.Query.Query">
        function <span class="apidocSignatureSpan">consul.</span>Query
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.<span class="apidocCodeKeywordSpan">Query</span>(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype" id="apidoc.module.consul.Query.prototype">module consul.Query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype._params" id="apidoc.element.consul.Query.prototype._params">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
        <span class="apidocSignatureSpan">(req, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_params = function (req, opts) {
  var body = req.body || {};

  if (opts.name) body.Name = opts.name;
  if (opts.session) body.Session = opts.session;
  if (opts.token) {
    body.Token = opts.token;
    delete opts.token;
  }
  if (opts.near) body.Near = opts.near;
  if (opts.template) {
    var template = utils.normalizeKeys(opts.template);
    if (template.type || template.regexp) {
      body.Template = {};
      if (template.type) body.Template.Type = template.type;
      if (template.regexp) body.Template.Regexp = template.regexp;
    }
  }
  if (opts.service) {
    var service = utils.normalizeKeys(opts.service);
    body.Service = {};
    if (service.service) body.Service.Service = service.service;
    if (service.failover) {
      var failover = utils.normalizeKeys(service.failover);
      if (typeof failover.nearestn === &#x27;number&#x27; || failover.datacenters) {
        body.Service.Failover = {};
        if (typeof failover.nearestn === &#x27;number&#x27;) {
          body.Service.Failover.NearestN = failover.nearestn;
        }
        if (failover.datacenters) {
          body.Service.Failover.Datacenters = failover.datacenters;
        }
      }
    }
    if (typeof service.onlypassing === &#x27;boolean&#x27;) {
      body.Service.OnlyPassing = service.onlypassing;
    }
    if (service.tags) body.Service.Tags = service.tags;
  }
  if (opts.dns) {
    var dns = utils.normalizeKeys(opts.dns);
    if (dns.ttl) body.DNS = { TTL: dns.ttl };
  }

  req.body = body;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  name: &#x27;query.create&#x27;,
  path: &#x27;/query&#x27;,
  query: {},
  type: &#x27;json&#x27;,
};

try {
  this.<span class="apidocCodeKeywordSpan">_params</span>(req, opts);
  if (!req.body.Service || !req.body.Service.Service) {
    throw errors.Validation(&#x27;service required&#x27;);
  }
} catch (err) {
  return callback(this.consul._err(err, req));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.create" id="apidoc.element.consul.Query.prototype.create">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { service: { service: opts } };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.create&#x27;,
    path: &#x27;/query&#x27;,
    query: {},
    type: &#x27;json&#x27;,
  };

  try {
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation(&#x27;service required&#x27;);
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._post(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&#x3c;a name=&#x22;acl-create&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.destroy" id="apidoc.element.consul.Query.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.destroy&#x27;,
    path: &#x27;/query/{query}&#x27;,
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation(&#x27;query required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: &#x27;63e1d82e-f718-eb92-3b7d-61f0c71d45b4&#x27;, name: &#x27;test&#x27; }, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-destroy&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.execute" id="apidoc.element.consul.Query.prototype.execute">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.execute&#x27;,
    path: &#x27;/query/{query}/execute&#x27;,
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation(&#x27;query required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.query.destroy(&#x27;422b14b9-874b-4520-bd2e-e149a42b0066&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;query-execute&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.query.<span class="apidocCodeKeywordSpan">execute</span>(options, callback)

Execute prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.explain" id="apidoc.element.consul.Query.prototype.explain">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">explain = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.explain&#x27;,
    path: &#x27;/query/{query}/explain&#x27;,
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation(&#x27;query required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     &#x22;Failovers&#x22;: 2
   }
 ]
}
```

&#x3c;a name=&#x22;query-explain&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.query.<span class="apidocCodeKeywordSpan">explain</span>(options, callback)

Explain prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.get" id="apidoc.element.consul.Query.prototype.get">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.get&#x27;,
    path: &#x27;/query/{query}&#x27;,
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation(&#x27;query required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy(&#x27;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-get&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.list" id="apidoc.element.consul.Query.prototype.list">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.list&#x27;,
    path: &#x27;/query&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.update" id="apidoc.element.consul.Query.prototype.update">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;query.update&#x27;,
    path: &#x27;/query/{query}&#x27;,
    params: { query: opts.query },
    query: {},
    type: &#x27;json&#x27;,
  };

  try {
    if (!opts.query) throw errors.Validation(&#x27;query required&#x27;);
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation(&#x27;service required&#x27;);
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 &#x22;ID&#x22;: &#x22;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x22;
}
```

&#x3c;a name=&#x22;acl-update&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session" id="apidoc.module.consul.Session">module consul.Session</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.Session" id="apidoc.element.consul.Session.Session">
        function <span class="apidocSignatureSpan">consul.</span>Session
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.<span class="apidocCodeKeywordSpan">Session</span>(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
    } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype" id="apidoc.module.consul.Session.prototype">module consul.Session.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.create" id="apidoc.element.consul.Session.prototype.create">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.create&#x27;,
    path: &#x27;/session/create&#x27;,
    query: {},
    type: &#x27;json&#x27;,
    body: {},
  };

  if (opts.lockdelay) req.body.LockDelay = opts.lockdelay;
  if (opts.name) req.body.Name = opts.name;
  if (opts.node) req.body.Node = opts.node;
  if (opts.checks) req.body.Checks = opts.checks;
  if (opts.behavior) req.body.Behavior = opts.behavior;
  if (opts.ttl) req.body.TTL = opts.ttl;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&#x3c;a name=&#x22;acl-create&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.destroy" id="apidoc.element.consul.Session.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.destroy&#x27;,
    path: &#x27;/session/destroy/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: &#x27;63e1d82e-f718-eb92-3b7d-61f0c71d45b4&#x27;, name: &#x27;test&#x27; }, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-destroy&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.get" id="apidoc.element.consul.Session.prototype.get">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.info&#x27;,
    path: &#x27;/session/info/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy(&#x27;b1f4c10e-b61b-e1de-de95-218c9fefdd3e&#x27;, function(err) {
 if (err) throw err;
});
```

&#x3c;a name=&#x22;acl-get&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.info" id="apidoc.element.consul.Session.prototype.info">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.info&#x27;,
    path: &#x27;/session/info/{id}&#x27;,
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.list" id="apidoc.element.consul.Session.prototype.list">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.list&#x27;,
    path: &#x27;/session/list&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  &#x22;ID&#x22;: &#x22;9fb8b20b-2636-adbb-9b99-d879df3305ec&#x22;
}
```

&#x3c;a name=&#x22;acl-list&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.node" id="apidoc.element.consul.Session.prototype.node">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.node&#x27;,
    path: &#x27;/session/node/{node}&#x27;,
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation(&#x27;node required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&#x3c;a name=&#x22;health-node&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.renew" id="apidoc.element.consul.Session.prototype.renew">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renew = function (opts, callback) {
  if (typeof opts === &#x27;string&#x27;) {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;session.renew&#x27;,
    path: &#x27;/session/renew/{id}&#x27;,
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   ],
   &#x22;LockDelay&#x22;: 15000000000
 }
]
```

&#x3c;a name=&#x22;session-renew&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.session.<span class="apidocCodeKeywordSpan">renew</span>(options, callback)

Renew a given session.

Options

* id (String): session ID
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status" id="apidoc.module.consul.Status">module consul.Status</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.Status" id="apidoc.element.consul.Status.Status">
        function <span class="apidocSignatureSpan">consul.</span>Status
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Status(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.<span class="apidocCodeKeywordSpan">Status</span>(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === &#x27;function&#x27;) {
      papi.tools.promisify(this, opts.promisify);
    } else {
      papi.tools.promisify(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status.prototype" id="apidoc.module.consul.Status.prototype">module consul.Status.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.prototype.leader" id="apidoc.element.consul.Status.prototype.leader">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">leader = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;status.leader&#x27;,
    path: &#x27;/status/leader&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&#x3c;a name=&#x22;status&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.status

 * [leader](#status-leader)
 * [peers](#status-peers)

&#x3c;a name=&#x22;status-leader&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.status.<span class="apidocCodeKeywordSpan">leader</span>(callback)

Returns the current Raft leader.

Usage

``` javascript
consul.status.leader(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status.prototype.peers" id="apidoc.element.consul.Status.prototype.peers">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peers = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: &#x27;status.peers&#x27;,
    path: &#x27;/status/peers&#x27;,
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
&#x22;127.0.0.1:8300&#x22;
```

&#x3c;a name=&#x22;status-peers&#x22;&#x3e;&#x3c;/a&#x3e;
### consul.status.<span class="apidocCodeKeywordSpan">peers</span>(callback)

Returns the current Raft peer set.

Usage

``` javascript
consul.status.peers(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch" id="apidoc.module.consul.Watch">module consul.Watch</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.Watch" id="apidoc.element.consul.Watch.Watch">
        function <span class="apidocSignatureSpan">consul.</span>Watch
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watch(consul, opts) {
  var self = this;

  events.EventEmitter.call(self);

  opts = utils.normalizeKeys(opts);

  var options = utils.normalizeKeys(opts.options || {});
  options = utils.defaults(options, consul._defaults);
  options.wait = options.wait || &#x27;30s&#x27;;
  options.index = options.index || &#x27;0&#x27;;

  self._context = { consul: consul };
  self._options = options;
  self._attempts = 0;
  self._method = opts.method;

  if (typeof opts.method !== &#x27;function&#x27;) {
    throw errors.Validation(&#x27;method required&#x27;);
  }

  process.nextTick(function() { self._run(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Watch helper.
 */

Consul.meta.watch = { type: &#x27;eventemitter&#x27; };

Consul.prototype.watch = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Watch</span>(this, opts);
};

/**
 * Walk methods
 */

Consul.meta.walk = { type: &#x27;sync&#x27; };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.super_" id="apidoc.element.consul.Watch.super_">
        function <span class="apidocSignatureSpan">consul.Watch.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype" id="apidoc.module.consul.Watch.prototype">module consul.Watch.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._err" id="apidoc.element.consul.Watch.prototype._err">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  if (self._end) return;

  self.emit(&#x27;error&#x27;, err, res);

  if (res &#x26;&#x26; res.statusCode === 400) return self.end();

  utils.setTimeoutContext(function() { self._run(); }, self, self._wait());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: &#x27;/acl/update&#x27;,
  query: {},
  type: &#x27;json&#x27;,
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation(&#x27;id required&#x27;), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._run" id="apidoc.element.consul.Watch.prototype._run">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function () {
  var self = this;

  if (self._end) return;

  var opts = utils.clone(self._options);
  opts.ctx = self;

  try {
    self._method.call(self._context, opts, function(err, data, res) {
      if (err) {
        return self._err(err, res);
      }

      self._updateTime = +new Date();

      self._attempts = 0;

      var newIndex = res.headers[&#x27;x-consul-index&#x27;];

      if (utils.hasIndexChanged(newIndex, self._options.index)) {
        self._options.index = newIndex;

        self.emit(&#x27;change&#x27;, data, res);
      }

      process.nextTick(function() { self._run(); });
    });
  } catch (err) {
    self._err(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = &#x27;session&#x27;;
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._wait" id="apidoc.element.consul.Watch.prototype._wait">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function () {
  return Math.min(Math.pow(2, ++this._attempts), 256) * 100;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case &#x27;session&#x27;:
    return this._session(ctx);
  case &#x27;wait&#x27;:
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case &#x27;acquire&#x27;:
    return this._acquire(ctx);
  case &#x27;monitor&#x27;:
    return this._monitor(ctx);
  default:
    throw new Error(&#x27;invalid state: &#x27; + ctx.state);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.end" id="apidoc.element.consul.Watch.prototype.end">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if (this._end) return;
  this._end = true;

  this.emit(&#x27;cancel&#x27;);
  this.emit(&#x27;end&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log(&#x27;data:&#x27;, data);
});

watch.on(&#x27;error&#x27;, function(err) {
  console.log(&#x27;error:&#x27;, err);
});

setTimeout(function() { watch.<span class="apidocCodeKeywordSpan">end</span>(); }, 30 * 1000);
```

&#x3c;a name=&#x22;promise-wrapper&#x22;&#x3e;&#x3c;/a&#x3e;
### Promise Wrapper

``` javascript
var Bluebird = require(&#x27;bluebird&#x27;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.isRunning" id="apidoc.element.consul.Watch.prototype.isRunning">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRunning = function () {
  return !this._end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.updateTime" id="apidoc.element.consul.Watch.prototype.updateTime">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateTime = function () {
  return this._updateTime;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

var ttl = ctx.session.ttl &#x26;&#x26; utils.parseDuration(ctx.session.ttl);

// monitor updates
if (ttl) {
  utils.setIntervalContext(function() {
    var time = monitor.<span class="apidocCodeKeywordSpan">updateTime</span>();

    if (time &#x26;&#x26; new Date() - time &#x3e; ttl + 1000) {
      monitor.end();
    }
  }, ctx, Math.min(1000, ttl));
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_" id="apidoc.module.consul.super_">module consul.super_</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.super_" id="apidoc.element.consul.super_.super_">
        function <span class="apidocSignatureSpan">consul.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype" id="apidoc.module.consul.super_.prototype">module consul.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__create" id="apidoc.element.consul.super_.prototype.__create">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__create = function (request, next) {
  var self = this;

  var opts = request.opts;
  var path = opts.path;

  if (typeof path !== &#x27;string&#x27;) {
    return next(errors.Validation(&#x27;path required&#x27;));
  }

  var headers = utils.mergeHeaders(self._opts.headers, opts.headers);

  // path
  try {
    path = path.replace(/\{(\w+)\}/g, function(src, dst) {
      if (!opts.params.hasOwnProperty(dst)) {
        throw errors.Validation(&#x27;missing param: &#x27; + dst);
      }

      var part = opts.params[dst] || &#x27;&#x27;;

      // optionally disable param encoding
      return part.encode === false &#x26;&#x26; part.toString ?
        part.toString() : encodeURIComponent(part);
    });
  } catch (err) {
    return next(err);
  }

  // query
  if (!utils.isEmpty(opts.query)) {
    try {
      path += &#x27;?&#x27; + self._encode(&#x27;application/x-www-form-urlencoded&#x27;,
                                 opts.query).toString();
    } catch (err) {
      return next(err);
    }
  }

  // body
  if (opts.body !== undefined) {
    var mime = constants.MIME_ALIAS[opts.type] ||
      headers[&#x27;content-type&#x27;] ||
      constants.MIME_ALIAS[self._opts.type];

    var isFunction = typeof opts.body === &#x27;function&#x27;;

    if (isFunction) {
      try {
        request.body = opts.body();
      } catch (err) {
        return next(err);
      }
    } else {
      request.body = opts.body;
    }

    var isBuffer = Buffer.isBuffer(request.body);
    var isStream = utils.isReadableStream(request.body);

    if (!isBuffer &#x26;&#x26; !isStream &#x26;&#x26; !mime) {
      return next(errors.Validation(&#x27;type required&#x27;));
    }

    if (!isBuffer &#x26;&#x26; !isStream) {
      if (self._opts.encoders[mime]) {
        try {
          request.body = this._encode(mime, request.body);
        } catch (err) {
          return next(err);
        }
      } else {
        return next(errors.Codec(&#x27;type is unknown: &#x27; + mime));
      }
    }

    if (!headers[&#x27;content-type&#x27;] &#x26;&#x26; mime) {
      headers[&#x27;content-type&#x27;] = mime + &#x27;; charset=&#x27; + constants.CHARSET;
    }

    if (isStream) {
      if (!isFunction) request._retryable = false;
    } else {
      headers[&#x27;content-length&#x27;] = request.body.length;
    }
  } else if (!~constants.EXCLUDE_CONTENT_LENGTH.indexOf(opts.method)) {
    headers[&#x27;content-length&#x27;] = 0;
  }

  // response pipe
  if (opts.pipe) {
    var isPipeFunction = typeof opts.pipe === &#x27;function&#x27;;

    if (isPipeFunction) {
      try {
        request.pipe = opts.pipe();
      } catch (err) {
        return next(err);
      }
    } else {
      request.pipe = opts.pipe;

      request._retryable = false;
    }

    if (!utils.isWritableStream(request.pipe)) {
      return next(errors.Validation(&#x27;pipe must be a writable stream&#x27;));
    }
  }

  // build http.request options
  request.req = utils.merge(
    utils.pick(self._opts, constants.CLIENT_OPTIONS),
    utils.pick(self._opts.baseUrl, &#x27;auth&#x27;, &#x27;hostname&#x27;, &#x27;port&#x27;, &#x27;path&#x27;),
    utils.pick(opts, constants.REQUEST_OPTIONS),
    { headers: headers }
  );

  // append request path to baseUrl
  request.req.path += path;

  // pick http transport
  if (self._opts.baseUrl.protocol === &#x27;https:&#x27;) {
    request.transport = https;
    if (!request.req.port) request.req.port = 443;
  } else {
    request.transport = http;
    if (!request.req.port) request.req.port = 80;
  }

  if (request.req.auth === null) delete request.req.auth;

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__execute" id="apidoc.element.consul.super_.prototype.__execute">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__execute = function (request, next) {
  var self = this;

  if (request.ctx) {
    if (request.ctx.canceled === true) {
      return next(errors.Validation(&#x27;ctx already canceled&#x27;));
    } else if (request.ctx.finished === true) {
      return next(errors.Validation(&#x27;ctx already finished&#x27;));
    }
  }

  var done = false;

  var opts = request.opts;

  var abort;
  var timeoutId;
  var timeout = opts.hasOwnProperty(&#x27;timeout&#x27;) ?
    opts.timeout : self._opts.timeout;

  self._log([&#x27;papi&#x27;, &#x27;request&#x27;].concat(opts.tags), request.req);

  var req = request.transport.request(request.req);

  var userAgent = req.getHeader(&#x27;user-agent&#x27;);

  if (userAgent === undefined) {
    req.setHeader(&#x27;user-agent&#x27;, &#x27;papi/&#x27; + meta.version);
  } else if (userAgent === null) {
    req.removeHeader(&#x27;user-agent&#x27;);
  }

  req.on(&#x27;error&#x27;, function(err) {
    self._log([&#x27;papi&#x27;, &#x27;request&#x27;, &#x27;error&#x27;].concat(opts.tags), err);

    if (done) return;
    done = true;

    if (abort) request.ctx.removeListener(&#x27;cancel&#x27;, abort);
    if (timeoutId) clearTimeout(timeoutId);

    request.err = err;
    next();
  });

  if (request.ctx) {
    abort = function() {
      req.abort();
      req.emit(&#x27;error&#x27;, errors.Abort(&#x27;request aborted&#x27;));
    };

    request.ctx.once(&#x27;cancel&#x27;, abort);
  }

  // set request and absolute timeout
  if (timeout &#x26;&#x26; timeout &#x3e; 0) {
    timeoutId = setTimeout(function() {
      req.emit(&#x27;timeout&#x27;);
      req.abort();
    }, timeout);

    req.setTimeout(timeout);
  }

  req.on(&#x27;timeout&#x27;, function(err) {
    self._log([&#x27;papi&#x27;, &#x27;request&#x27;, &#x27;error&#x27;, &#x27;timeout&#x27;].concat(opts.tags));
    if (err) {
      err = errors.Timeout(err);
    } else {
      err = errors.Timeout(&#x27;request timed out (&#x27; + timeout + &#x27;ms)&#x27;);
    }
    req.emit(&#x27;error&#x27;, err);
  });

  req.on(&#x27;response&#x27;, function(res) {
    var chunks = [];
    var bodyLength = 0;

    self._log([&#x27;papi&#x27;, &#x27;response&#x27;].concat(opts.tags), {
      method: opts.method,
      path: req.path,
      statusCode: res.statusCode,
      headers: res.headers,
      remoteAddress: res.connection.remoteAddress,
      remotePort: res.connection.remotePort,
    });

    request.res = res;

    if (request.pipe) {
      res.pipe(request.pipe);
    } else {
      res.on(&#x27;data&#x27;, function(chunk) {
        chunks.push(chunk);
        bodyLength += chunk.length;
      });
    }

    res.on(&#x27;end&#x27;, function() {
      if (done) return;
      done = true;

      if (abort) request.ctx.removeListener(&#x27;cancel&#x27;, abort);
      if (timeoutId) clearTimeout(timeoutId);

      // body content mime
      var mime;

      // decode body
      if (bodyLength) {
        res.body = Buffer.concat(chunks, bodyLength);

        // don&#x27;t decode if user explicitly asks for buffer
        if (!opts.buffer) {
          mime = (res.headers[&#x27;content-type&#x27;] || &#x27;&#x27;).split(&#x27;;&#x27;)[0].trim();

          if (self._opts.decoders[mime]) {
            try {
              res.body = self._decode(mime, res.body);
            } catch (err) {
              request.err = err;
              return next();
            }
          }
        }
      }

      // any non-200 is consider an error
      if (Math.floor(res.statusCode / 100) !== 2) {
        var err = errors.Response();

        if (res.body &#x26;&#x26; mime === &#x27;text/plain&#x27; &#x26;&#x26; res.body.length &#x3c; 80) {
          err.message = res.body;
        }

        if (!err.message) {
          if (http.STATUS_CODES[res.statusCode]) {
            err.message = http.STATUS_CODES[res.statusCode].toLowerCase();
          } else {
            err.message = &#x27;request failed: &#x27; + res.statusCode;
          }
        }

        err.statusCode = res.statusCode;

        request.err = err;
      }

      next();
    });
  });

  if (utils.isReadableStream(request.body)) {
    request.body.pipe(req);
  } else {
    req.end(request.body);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__push" id="apidoc.element.consul.super_.prototype.__push">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
        <span class="apidocSignatureSpan">(request, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__push = function (request, name) {
  if (this._exts[name]) {
    request._stack.push.apply(request._stack, this._exts[name]);
  }

  if (request.opts &#x26;&#x26; request.opts.exts &#x26;&#x26; request.opts.exts[name]) {
    if (Array.isArray(request.opts.exts[name])) {
      request._stack.push.apply(request._stack, request.opts.exts[name]);
    } else {
      request._stack.push(request.opts.exts[name]);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._decode" id="apidoc.element.consul.super_.prototype._decode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_decode = function (mime, value) {
  if (!this._opts.decoders[mime]) {
    throw errors.Codec(&#x27;unknown decoder: &#x27; + mime);
  }

  try {
    return this._opts.decoders[mime](value);
  } catch (err) {
    err.message = &#x27;decode (&#x27; + mime + &#x27;) failed: &#x27; + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._delete" id="apidoc.element.consul.super_.prototype._delete">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_delete = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.recurse) req.query.recurse = &#x27;true&#x27;;

  if (opts.hasOwnProperty(&#x27;cas&#x27;)) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_delete</span>(req, utils.empty, callback);
};

Kv.meta.delete = { type: &#x27;alias&#x27; };

Kv.prototype.delete = Kv.prototype.del;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._encode" id="apidoc.element.consul.super_.prototype._encode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_encode = function (mime, value) {
  if (!this._opts.encoders[mime]) {
    throw errors.Codec(&#x27;unknown encoder: &#x27; + mime);
  }

  try {
    return this._opts.encoders[mime](value);
  } catch (err) {
    err.message = &#x27;encode (&#x27; + mime + &#x27;) failed: &#x27; + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._err" id="apidoc.element.consul.super_.prototype._err">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, opts) {
  if (!err) return err;

  if (!(err instanceof Error)) err = new Error(err);

  if (opts &#x26;&#x26; opts.name) {
    err.message = util.format(&#x27;%s: %s&#x27;, opts.name, err.message);
  }

  if (this._opts.name) {
    err.message = util.format(&#x27;%s: %s&#x27;, this._opts.name, err.message);
  }

  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: &#x27;/acl/update&#x27;,
  query: {},
  type: &#x27;json&#x27;,
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation(&#x27;id required&#x27;), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._ext" id="apidoc.element.consul.super_.prototype._ext">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
        <span class="apidocSignatureSpan">(eventName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ext = function (eventName, callback) {
  if (!eventName || typeof eventName !== &#x27;string&#x27;) {
    throw this._err(errors.Validation(&#x27;extension eventName required&#x27;));
  }

  if (typeof callback !== &#x27;function&#x27;) {
    throw this._err(errors.Validation(&#x27;extension callback required&#x27;));
  }

  if (!this._exts[eventName]) this._exts[eventName] = [];

  this._exts[eventName].push(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._get" id="apidoc.element.consul.super_.prototype._get">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_get = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 if (!opts.id) {
   return callback(this.consul._err(errors.Validation(&#x27;id required&#x27;), req));
 }

 utils.options(req, opts);

 this.consul.<span class="apidocCodeKeywordSpan">_get</span>(req, utils.bodyItem, callback);
};

Acl.prototype.get = Acl.prototype.info;

/**
* Creates a new token by cloning an existing token
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._head" id="apidoc.element.consul.super_.prototype._head">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_head = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._log" id="apidoc.element.consul.super_.prototype._log">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
        <span class="apidocSignatureSpan">(tags, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_log = function (tags, data) {
  return this.emit(&#x27;log&#x27;, tags, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._options" id="apidoc.element.consul.super_.prototype._options">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_options = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._patch" id="apidoc.element.consul.super_.prototype._patch">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_patch = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._plugin" id="apidoc.element.consul.super_.prototype._plugin">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
        <span class="apidocSignatureSpan">(plugin, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_plugin = function (plugin, options) {
  if (!plugin) {
    throw this._err(errors.Validation(&#x27;plugin required&#x27;));
  }

  if (typeof plugin.register !== &#x27;function&#x27;) {
    throw this._err(errors.Validation(&#x27;plugin must have register function&#x27;));
  }

  var attributes = plugin.register.attributes;

  if (!attributes) {
    throw this._err(errors.Validation(&#x27;plugin attributes required&#x27;));
  }

  if (!attributes.name) {
    throw this._err(errors.Validation(&#x27;plugin attributes name required&#x27;));
  }

  if (!attributes.version) {
    throw this._err(errors.Validation(&#x27;plugin attributes version required&#x27;));
  }

  return plugin.register(this, options || {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._post" id="apidoc.element.consul.super_.prototype._post">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_post = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_post</span>(req, utils.body, callback);
};

/**
 * Gets a given query
 */

Query.prototype.get = function(opts, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._put" id="apidoc.element.consul.super_.prototype._put">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_put = function (opts) {
  var args;

  if (typeof opts === &#x27;string&#x27;) {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_put</span>(req, utils.body, callback);
};

/**
 * Update the policy of a token
 */

Acl.prototype.update = function(opts, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._request" id="apidoc.element.consul.super_.prototype._request">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_request = function (opts) {
  var self = this;

  var request;

  if (this.__request) {
    request = this.__request;
    opts = request.opts;
    self = request._client;
  } else {
    request = {
      _args: Array.prototype.slice.call(arguments),
      _client: this,
      opts: opts,
      state: {},
    };

    if (!opts) opts = request.opts = {};

    if (request._args.length &#x3e; 1) {
      request._callback = request._args[request._args.length - 1];
    } else {
      return self.emit(&#x27;error&#x27;, self._err(
        errors.Validation(&#x27;callback required&#x27;), opts));
    }

    // if ctx is an event emitter we use it to abort requests when done is
    // emitted
    if (opts.ctx instanceof events.EventEmitter) {
      request.ctx = opts.ctx;
    }

    // combine global and request tags
    opts.tags = (opts.tags || []).concat(self._opts.tags);

    // inject request name into tags if not already defined
    if (opts.name &#x26;&#x26; !~opts.tags.indexOf(opts.name)) {
      opts.tags.push(opts.name);
    }

    if (!opts.headers) opts.headers = {};
    if (!opts.params) opts.params = {};
    if (!opts.query) opts.query = {};

    // restart request
    request.retry = function() {
      if (request._retryable === false) {
        throw errors.Validation(&#x27;request is not retryable&#x27;);
      }

      self._log([&#x27;papi&#x27;, &#x27;request&#x27;, &#x27;retry&#x27;].concat(request.opts.tags));

      delete request.body;
      delete request.err;
      delete request.req;
      delete request.res;
      delete request.transport;

      self._request.call({ __request: request });
    };

    request._stack = [];

    self.__push(request, &#x27;onCreate&#x27;);

    request._stack.push(self.__create);

    self.__push(request, &#x27;onRequest&#x27;);

    request._stack.push(self.__execute);

    self.__push(request, &#x27;onResponse&#x27;);

    request._stack.push.apply(
      request._stack,
      request._args.slice(1, request._args.length - 1)
    );
  }

  var i = 0;
  function next(err) {
    if (err) return request._callback(self._err(err, opts));

    // middlware can call next(false, args...) to stop middleware
    if (err === false) {
      return request._callback.apply(null,
        Array.prototype.slice.call(arguments, 1));
    }

    var fn = request._stack[i++];
    if (fn) {
      fn.call(self, request, next);
    } else {
      request._callback.call(self, self._err(request.err, opts), request.res);
    }
  }

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
