<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/silas/node-consul#readme">consul (v0.28.0)</a>
</h1>
<h4>Consul client</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul">module consul</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl">
            function <span class="apidocSignatureSpan">consul.</span>Acl
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.clone">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.clone
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.create">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.info">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.update">
            function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent">
            function <span class="apidocSignatureSpan">consul.</span>Agent
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.fail">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.fail
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.pass">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.pass
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.register">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.warn">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.warn
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.register">
            function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.checks">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.checks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.forceLeave">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.forceLeave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.join">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.join
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.members">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.members
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.self">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.self
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.services">
            function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog">
            function <span class="apidocSignatureSpan">consul.</span>Catalog
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.services">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype.services
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype.nodes
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.datacenters">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.datacenters
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.nodes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.services">
            function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event">
            function <span class="apidocSignatureSpan">consul.</span>Event
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.fire">
            function <span class="apidocSignatureSpan">consul.</span>Event.prototype.fire
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Event.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health">
            function <span class="apidocSignatureSpan">consul.</span>Health
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.checks">
            function <span class="apidocSignatureSpan">consul.</span>Health.prototype.checks
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.node">
            function <span class="apidocSignatureSpan">consul.</span>Health.prototype.node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.service">
            function <span class="apidocSignatureSpan">consul.</span>Health.prototype.service
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.state">
            function <span class="apidocSignatureSpan">consul.</span>Health.prototype.state
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv">
            function <span class="apidocSignatureSpan">consul.</span>Kv
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.del">
            function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.del
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.get">
            function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.keys">
            function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.keys
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.set">
            function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.set
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock">
            function <span class="apidocSignatureSpan">consul.</span>Lock
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._acquire">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._acquire
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._end">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._end
            <span class="apidocSignatureSpan">(ctx, err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._err">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._monitor">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._monitor
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._release">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._release
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._run">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._run
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._session">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._session
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._wait">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._wait
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.acquire">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype.acquire
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.release">
            function <span class="apidocSignatureSpan">consul.</span>Lock.prototype.release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query">
            function <span class="apidocSignatureSpan">consul.</span>Query
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype._params">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype._params
            <span class="apidocSignatureSpan">(req, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.create">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.execute">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.execute
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.explain">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.explain
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.get">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.update">
            function <span class="apidocSignatureSpan">consul.</span>Query.prototype.update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session">
            function <span class="apidocSignatureSpan">consul.</span>Session
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.create">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.info">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.list">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.node">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.renew">
            function <span class="apidocSignatureSpan">consul.</span>Session.prototype.renew
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status">
            function <span class="apidocSignatureSpan">consul.</span>Status
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.leader">
            function <span class="apidocSignatureSpan">consul.</span>Status.prototype.leader
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.peers">
            function <span class="apidocSignatureSpan">consul.</span>Status.prototype.peers
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch">
            function <span class="apidocSignatureSpan">consul.</span>Watch
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._err">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._run">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._wait">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.end">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.isRunning">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.isRunning
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.updateTime">
            function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.updateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.parseQueryMeta">
            function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_">
            function <span class="apidocSignatureSpan">consul.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__create">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__create
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__execute">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__execute
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__push">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__push
            <span class="apidocSignatureSpan">(request, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._decode">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._decode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._delete">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._delete
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._encode">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._encode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._err">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._err
            <span class="apidocSignatureSpan">(err, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._ext">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._ext
            <span class="apidocSignatureSpan">(eventName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._get">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._get
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._head">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._head
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._log">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._log
            <span class="apidocSignatureSpan">(tags, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._options">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._options
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._patch">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._patch
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._plugin">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._plugin
            <span class="apidocSignatureSpan">(plugin, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._post">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._post
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._put">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._put
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._request">
            function <span class="apidocSignatureSpan">consul.</span>super_.prototype._request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.toString">
            function <span class="apidocSignatureSpan">consul.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.walk">
            function <span class="apidocSignatureSpan">consul.</span>walk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan"></span>consul</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Acl.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Agent.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Catalog.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Event.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Health.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Kv.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Lock.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Session.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Status.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>Watch.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>acl</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>agent</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>catalog</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>errors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>event</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>health</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>kv</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>lock</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>meta</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>query</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>session</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>status</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.</span>watch</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl">module consul.Acl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.Acl">
            function <span class="apidocSignatureSpan">consul.</span>Acl
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype">module consul.Acl.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.clone">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.create">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.get">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.info">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.list">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.update">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.clone">module consul.Acl.prototype.clone</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.clone.clone">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.create">module consul.Acl.prototype.create</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.create.create">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.destroy">module consul.Acl.prototype.destroy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.destroy.destroy">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.info">module consul.Acl.prototype.info</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.info.info">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.list">module consul.Acl.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Acl.prototype.update">module consul.Acl.prototype.update</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Acl.prototype.update.update">
            function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent">module consul.Agent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Agent">
            function <span class="apidocSignatureSpan">consul.</span>Agent
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check">module consul.Agent.Check</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.Check">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Check
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype">module consul.Agent.Check.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.fail">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.list">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.pass">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.register">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.warn">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.deregister">module consul.Agent.Check.prototype.deregister</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.deregister.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.fail">module consul.Agent.Check.prototype.fail</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.fail.fail">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.list">module consul.Agent.Check.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.pass">module consul.Agent.Check.prototype.pass</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.pass.pass">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.register">module consul.Agent.Check.prototype.register</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.register.register">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Check.prototype.warn">module consul.Agent.Check.prototype.warn</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Check.prototype.warn.warn">
            function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service">module consul.Agent.Service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.Service">
            function <span class="apidocSignatureSpan">consul.Agent.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype">module consul.Agent.Service.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.register">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype.deregister">module consul.Agent.Service.prototype.deregister</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.deregister.deregister">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype.list">module consul.Agent.Service.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype.maintenance">module consul.Agent.Service.prototype.maintenance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.maintenance.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.Service.prototype.register">module consul.Agent.Service.prototype.register</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.Service.prototype.register.register">
            function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype">module consul.Agent.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.checks">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.forceLeave">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.join">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.members">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.self">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.services">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.checks">module consul.Agent.prototype.checks</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.checks.checks">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.forceLeave">module consul.Agent.prototype.forceLeave</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.forceLeave.forceLeave">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.join">module consul.Agent.prototype.join</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.join.join">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.maintenance">module consul.Agent.prototype.maintenance</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.maintenance.maintenance">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.members">module consul.Agent.prototype.members</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.members.members">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.self">module consul.Agent.prototype.self</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.self.self">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Agent.prototype.services">module consul.Agent.prototype.services</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Agent.prototype.services.services">
            function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog">module consul.Catalog</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Catalog">
            function <span class="apidocSignatureSpan">consul.</span>Catalog
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node">module consul.Catalog.Node</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.Node">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node.prototype">module consul.Catalog.Node.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.services">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node.prototype.list">module consul.Catalog.Node.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Node.prototype.services">module consul.Catalog.Node.prototype.services</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Node.prototype.services.services">
            function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service">module consul.Catalog.Service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.Service">
            function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service.prototype">module consul.Catalog.Service.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service.prototype.list">module consul.Catalog.Service.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.Service.prototype.nodes">module consul.Catalog.Service.prototype.nodes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.Service.prototype.nodes.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.prototype">module consul.Catalog.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.datacenters">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.services">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.prototype.datacenters">module consul.Catalog.prototype.datacenters</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.datacenters.datacenters">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.prototype.nodes">module consul.Catalog.prototype.nodes</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.nodes.nodes">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Catalog.prototype.services">module consul.Catalog.prototype.services</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Catalog.prototype.services.services">
            function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event">module consul.Event</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.Event">
            function <span class="apidocSignatureSpan">consul.</span>Event
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event.prototype">module consul.Event.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.fire">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.list">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event.prototype.fire">module consul.Event.prototype.fire</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.fire.fire">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Event.prototype.list">module consul.Event.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Event.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health">module consul.Health</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.Health">
            function <span class="apidocSignatureSpan">consul.</span>Health
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype">module consul.Health.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.checks">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.node">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.service">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.state">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype.checks">module consul.Health.prototype.checks</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.checks.checks">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype.node">module consul.Health.prototype.node</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.node.node">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype.service">module consul.Health.prototype.service</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.service.service">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Health.prototype.state">module consul.Health.prototype.state</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Health.prototype.state.state">
            function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv">module consul.Kv</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.Kv">
            function <span class="apidocSignatureSpan">consul.</span>Kv
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Kv.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype">module consul.Kv.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.del">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.delete">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>delete
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.get">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.keys">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.set">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype.del">module consul.Kv.prototype.del</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.del.del">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype.get">module consul.Kv.prototype.get</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.get.get">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype.keys">module consul.Kv.prototype.keys</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.keys.keys">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Kv.prototype.set">module consul.Kv.prototype.set</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Kv.prototype.set.set">
            function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock">module consul.Lock</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.Lock">
            function <span class="apidocSignatureSpan">consul.</span>Lock
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.super_">
            function <span class="apidocSignatureSpan">consul.Lock.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Lock.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype">module consul.Lock.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._end">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
            <span class="apidocSignatureSpan">(ctx, err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._err">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._monitor">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._run">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._session">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._wait">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._acquire">module consul.Lock.prototype._acquire</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._acquire._acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._end">module consul.Lock.prototype._end</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._end._end">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
            <span class="apidocSignatureSpan">(ctx, err, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._err">module consul.Lock.prototype._err</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._err._err">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._monitor">module consul.Lock.prototype._monitor</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._monitor._monitor">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._release">module consul.Lock.prototype._release</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._release._release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._run">module consul.Lock.prototype._run</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._run._run">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._session">module consul.Lock.prototype._session</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._session._session">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype._wait">module consul.Lock.prototype._wait</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype._wait._wait">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
            <span class="apidocSignatureSpan">(ctx)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype.acquire">module consul.Lock.prototype.acquire</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.acquire.acquire">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Lock.prototype.release">module consul.Lock.prototype.release</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Lock.prototype.release.release">
            function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query">module consul.Query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.Query">
            function <span class="apidocSignatureSpan">consul.</span>Query
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype">module consul.Query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype._params">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
            <span class="apidocSignatureSpan">(req, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.create">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.execute">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.explain">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.get">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.list">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.update">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype._params">module consul.Query.prototype._params</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype._params._params">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
            <span class="apidocSignatureSpan">(req, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.create">module consul.Query.prototype.create</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.create.create">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.destroy">module consul.Query.prototype.destroy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.destroy.destroy">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.execute">module consul.Query.prototype.execute</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.execute.execute">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.explain">module consul.Query.prototype.explain</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.explain.explain">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.get">module consul.Query.prototype.get</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.get.get">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.list">module consul.Query.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Query.prototype.update">module consul.Query.prototype.update</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Query.prototype.update.update">
            function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session">module consul.Session</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.Session">
            function <span class="apidocSignatureSpan">consul.</span>Session
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype">module consul.Session.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.create">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.destroy">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.get">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>get
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.info">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.list">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.node">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.renew">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.create">module consul.Session.prototype.create</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.create.create">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.destroy">module consul.Session.prototype.destroy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.destroy.destroy">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.info">module consul.Session.prototype.info</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.info.info">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.list">module consul.Session.prototype.list</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.list.list">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.node">module consul.Session.prototype.node</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.node.node">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Session.prototype.renew">module consul.Session.prototype.renew</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Session.prototype.renew.renew">
            function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status">module consul.Status</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.Status">
            function <span class="apidocSignatureSpan">consul.</span>Status
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status.prototype">module consul.Status.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.leader">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.peers">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status.prototype.leader">module consul.Status.prototype.leader</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.leader.leader">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Status.prototype.peers">module consul.Status.prototype.peers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Status.prototype.peers.peers">
            function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch">module consul.Watch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.Watch">
            function <span class="apidocSignatureSpan">consul.</span>Watch
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.super_">
            function <span class="apidocSignatureSpan">consul.Watch.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">consul.Watch.</span>meta</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype">module consul.Watch.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._err">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._run">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._wait">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.end">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.isRunning">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.updateTime">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype._err">module consul.Watch.prototype._err</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._err._err">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype._run">module consul.Watch.prototype._run</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._run._run">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype._wait">module consul.Watch.prototype._wait</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype._wait._wait">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype.end">module consul.Watch.prototype.end</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.end.end">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype.isRunning">module consul.Watch.prototype.isRunning</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.isRunning.isRunning">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.Watch.prototype.updateTime">module consul.Watch.prototype.updateTime</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.Watch.prototype.updateTime.updateTime">
            function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.acl">module consul.acl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.acl.Acl">
            function <span class="apidocSignatureSpan">consul.acl.</span>Acl
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.agent">module consul.agent</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.agent.Agent">
            function <span class="apidocSignatureSpan">consul.agent.</span>Agent
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.catalog">module consul.catalog</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.catalog.Catalog">
            function <span class="apidocSignatureSpan">consul.catalog.</span>Catalog
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.consul">module consul.consul</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.consul.Consul">
            function <span class="apidocSignatureSpan">consul.consul.</span>Consul
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.errors">module consul.errors</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.errors.Consul">
            function <span class="apidocSignatureSpan">consul.errors.</span>Consul
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.errors.Validation">
            function <span class="apidocSignatureSpan">consul.errors.</span>Validation
            <span class="apidocSignatureSpan">(message)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.event">module consul.event</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.event.Event">
            function <span class="apidocSignatureSpan">consul.event.</span>Event
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.health">module consul.health</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.health.Health">
            function <span class="apidocSignatureSpan">consul.health.</span>Health
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.kv">module consul.kv</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.kv.Kv">
            function <span class="apidocSignatureSpan">consul.kv.</span>Kv
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.lock">module consul.lock</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.lock.Lock">
            function <span class="apidocSignatureSpan">consul.lock.</span>Lock
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.parseQueryMeta">module consul.parseQueryMeta</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.parseQueryMeta.parseQueryMeta">
            function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.query">module consul.query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.query.Query">
            function <span class="apidocSignatureSpan">consul.query.</span>Query
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.session">module consul.session</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.session.Session">
            function <span class="apidocSignatureSpan">consul.session.</span>Session
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.status">module consul.status</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.status.Status">
            function <span class="apidocSignatureSpan">consul.status.</span>Status
            <span class="apidocSignatureSpan">(consul)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_">module consul.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.super_">
            function <span class="apidocSignatureSpan">consul.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype">module consul.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__create">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__execute">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__push">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
            <span class="apidocSignatureSpan">(request, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._decode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._delete">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._encode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._err">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._ext">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
            <span class="apidocSignatureSpan">(eventName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._get">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._head">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._log">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
            <span class="apidocSignatureSpan">(tags, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._options">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._patch">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._plugin">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
            <span class="apidocSignatureSpan">(plugin, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._post">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._put">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._request">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype.__create">module consul.super_.prototype.__create</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__create.__create">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype.__execute">module consul.super_.prototype.__execute</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__execute.__execute">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype.__push">module consul.super_.prototype.__push</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype.__push.__push">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
            <span class="apidocSignatureSpan">(request, name)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._decode">module consul.super_.prototype._decode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._decode._decode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._delete">module consul.super_.prototype._delete</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._delete._delete">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._encode">module consul.super_.prototype._encode</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._encode._encode">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
            <span class="apidocSignatureSpan">(mime, value)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._err">module consul.super_.prototype._err</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._err._err">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
            <span class="apidocSignatureSpan">(err, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._ext">module consul.super_.prototype._ext</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._ext._ext">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
            <span class="apidocSignatureSpan">(eventName, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._get">module consul.super_.prototype._get</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._get._get">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._head">module consul.super_.prototype._head</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._head._head">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._log">module consul.super_.prototype._log</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._log._log">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
            <span class="apidocSignatureSpan">(tags, data)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._options">module consul.super_.prototype._options</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._options._options">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._patch">module consul.super_.prototype._patch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._patch._patch">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._plugin">module consul.super_.prototype._plugin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._plugin._plugin">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
            <span class="apidocSignatureSpan">(plugin, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._post">module consul.super_.prototype._post</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._post._post">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._put">module consul.super_.prototype._put</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._put._put">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.super_.prototype._request">module consul.super_.prototype._request</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.super_.prototype._request._request">
            function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.toString">module consul.toString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.toString.toString">
            function <span class="apidocSignatureSpan">consul.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.utils">module consul.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.body">
            function <span class="apidocSignatureSpan">consul.utils.</span>body
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.bodyItem">
            function <span class="apidocSignatureSpan">consul.utils.</span>bodyItem
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.clone">
            function <span class="apidocSignatureSpan">consul.utils.</span>clone
            <span class="apidocSignatureSpan">(src)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.createCheck">
            function <span class="apidocSignatureSpan">consul.utils.</span>createCheck
            <span class="apidocSignatureSpan">(src)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.createServiceCheck">
            function <span class="apidocSignatureSpan">consul.utils.</span>createServiceCheck
            <span class="apidocSignatureSpan">(src)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.decode">
            function <span class="apidocSignatureSpan">consul.utils.</span>decode
            <span class="apidocSignatureSpan">(value, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.defaults">
            function <span class="apidocSignatureSpan">consul.utils.</span>defaults
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.empty">
            function <span class="apidocSignatureSpan">consul.utils.</span>empty
            <span class="apidocSignatureSpan">(request, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.hasIndexChanged">
            function <span class="apidocSignatureSpan">consul.utils.</span>hasIndexChanged
            <span class="apidocSignatureSpan">(index, prevIndex)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.normalizeKeys">
            function <span class="apidocSignatureSpan">consul.utils.</span>normalizeKeys
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.options">
            function <span class="apidocSignatureSpan">consul.utils.</span>options
            <span class="apidocSignatureSpan">(req, opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.parseDuration">
            function <span class="apidocSignatureSpan">consul.utils.</span>parseDuration
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.parseQueryMeta">
            function <span class="apidocSignatureSpan">consul.utils.</span>parseQueryMeta
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.setIntervalContext">
            function <span class="apidocSignatureSpan">consul.utils.</span>setIntervalContext
            <span class="apidocSignatureSpan">(fn, ctx, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.utils.setTimeoutContext">
            function <span class="apidocSignatureSpan">consul.utils.</span>setTimeoutContext
            <span class="apidocSignatureSpan">(fn, ctx, timeout)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.walk">module consul.walk</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.walk.walk">
            function <span class="apidocSignatureSpan">consul.</span>walk
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.consul.watch">module consul.watch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.consul.watch.Watch">
            function <span class="apidocSignatureSpan">consul.watch.</span>Watch
            <span class="apidocSignatureSpan">(consul, opts)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul" id="apidoc.module.consul">module consul</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl" id="apidoc.element.consul.Acl">
        function <span class="apidocSignatureSpan">consul.</span>Acl
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Acl(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.<span class="apidocCodeKeywordSpan">Acl</span>(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.clone" id="apidoc.element.consul.Acl.prototype.clone">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.clone
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.clone = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.clone',
    path: '/acl/clone/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.create" id="apidoc.element.consul.Acl.prototype.create">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.create',
    path: '/acl/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.destroy" id="apidoc.element.consul.Acl.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.destroy',
    path: '/acl/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.info" id="apidoc.element.consul.Acl.prototype.info">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.info',
    path: '/acl/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.list" id="apidoc.element.consul.Acl.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.list',
    path: '/acl/list',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.update" id="apidoc.element.consul.Acl.prototype.update">
        function <span class="apidocSignatureSpan">consul.</span>Acl.prototype.update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Acl.prototype.update = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.update',
    path: '/acl/update',
    query: {},
    type: 'json',
    body: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  req.body.ID = opts.id;

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent" id="apidoc.element.consul.Agent">
        function <span class="apidocSignatureSpan">consul.</span>Agent
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.Check(consul);
  this.service = new Agent.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.<span class="apidocCodeKeywordSpan">Agent</span>(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check" id="apidoc.element.consul.Agent.Check">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.deregister" id="apidoc.element.consul.Agent.Check.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.deregister',
    path: '/agent/check/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.fail" id="apidoc.element.consul.Agent.Check.prototype.fail">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.fail
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.fail = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.fail',
    path: '/agent/check/fail/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.list" id="apidoc.element.consul.Agent.Check.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.list',
    path: '/agent/checks',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.pass" id="apidoc.element.consul.Agent.Check.prototype.pass">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.pass
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.pass = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.pass',
    path: '/agent/check/pass/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.register" id="apidoc.element.consul.Agent.Check.prototype.register">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.register = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.register',
    path: '/agent/check/register',
    type: 'json',
  };

  try {
    req.body = utils.createCheck(opts);
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.warn" id="apidoc.element.consul.Agent.Check.prototype.warn">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Check.prototype.warn
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Check.prototype.warn = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.warn',
    path: '/agent/check/warn/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service" id="apidoc.element.consul.Agent.Service">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.deregister" id="apidoc.element.consul.Agent.Service.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Service.prototype.deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.deregister',
    path: '/agent/service/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.list" id="apidoc.element.consul.Agent.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Service.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.list',
    path: '/agent/services',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.maintenance" id="apidoc.element.consul.Agent.Service.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Service.prototype.maintenance = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.maintenance',
    path: '/agent/service/maintenance/{id}',
    params: { id: opts.id },
    query: { enable: opts.enable },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }
  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.register" id="apidoc.element.consul.Agent.Service.prototype.register">
        function <span class="apidocSignatureSpan">consul.</span>Agent.Service.prototype.register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.Service.prototype.register = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.register',
    path: '/agent/service/register',
    type: 'json',
    body: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  req.body.Name = opts.name;
  if (opts.id) req.body.ID = opts.id;
  if (opts.tags) req.body.Tags = opts.tags;
  if (opts.hasOwnProperty('address')) req.body.Address = opts.address;
  if (opts.hasOwnProperty('port')) req.body.Port = opts.port;

  try {
    if (Array.isArray(opts.checks)) {
      req.body.Checks = opts.checks.map(utils.createServiceCheck);
    } else if (opts.check) {
      req.body.Check = utils.createServiceCheck(opts.check);
    }
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.checks" id="apidoc.element.consul.Agent.prototype.checks">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.checks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.checks = function () {
  this.check.list.apply(this.check, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.forceLeave" id="apidoc.element.consul.Agent.prototype.forceLeave">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.forceLeave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.forceLeave = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.forceLeave',
    path: '/agent/force-leave/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.join" id="apidoc.element.consul.Agent.prototype.join">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.join
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.join = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { address: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.join',
    path: '/agent/join/{address}',
    params: { address: opts.address },
  };

  if (!opts.address) {
    return callback(this.consul._err(errors.Validation('address required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.maintenance" id="apidoc.element.consul.Agent.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.maintenance = function (opts, callback) {
  if (typeof opts === 'boolean') {
    opts = { enable: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.maintenance',
    path: '/agent/maintenance',
    query: { enable: opts.enable },
  };

  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.members" id="apidoc.element.consul.Agent.prototype.members">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.members
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.members = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.members',
    path: '/agent/members',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.self" id="apidoc.element.consul.Agent.prototype.self">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.self
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.self = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.self',
    path: '/agent/self',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.services" id="apidoc.element.consul.Agent.prototype.services">
        function <span class="apidocSignatureSpan">consul.</span>Agent.prototype.services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Agent.prototype.services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog" id="apidoc.element.consul.Catalog">
        function <span class="apidocSignatureSpan">consul.</span>Catalog
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.Node(consul);
  this.service = new Catalog.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.<span class="apidocCodeKeywordSpan">Catalog</span>(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node" id="apidoc.element.consul.Catalog.Node">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.list" id="apidoc.element.consul.Catalog.Node.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.Node.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.list',
    path: '/catalog/nodes',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.services" id="apidoc.element.consul.Catalog.Node.prototype.services">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Node.prototype.services
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.Node.prototype.services = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.services',
    path: '/catalog/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service" id="apidoc.element.consul.Catalog.Service">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.list" id="apidoc.element.consul.Catalog.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.Service.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.list',
    path: '/catalog/services',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.nodes" id="apidoc.element.consul.Catalog.Service.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.Service.prototype.nodes
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.Service.prototype.nodes = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.nodes',
    path: '/catalog/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.datacenters" id="apidoc.element.consul.Catalog.prototype.datacenters">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.datacenters
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.prototype.datacenters = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.datacenters',
    path: '/catalog/datacenters',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.nodes" id="apidoc.element.consul.Catalog.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.nodes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.prototype.nodes = function () {
  this.node.list.apply(this.node, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.services" id="apidoc.element.consul.Catalog.prototype.services">
        function <span class="apidocSignatureSpan">consul.</span>Catalog.prototype.services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Catalog.prototype.services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event" id="apidoc.element.consul.Event">
        function <span class="apidocSignatureSpan">consul.</span>Event
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Event(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.<span class="apidocCodeKeywordSpan">Event</span>(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event.prototype.fire" id="apidoc.element.consul.Event.prototype.fire">
        function <span class="apidocSignatureSpan">consul.</span>Event.prototype.fire
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Event.prototype.fire = function (opts, callback) {
  if (arguments.length === 3) {
    opts = {
      name: arguments[0],
      payload: arguments[1],
    };
    callback = arguments[2];
  } else if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.fire',
    path: '/event/fire/{name}',
    params: { name: opts.name },
    query: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  var buffer;

  if (opts.hasOwnProperty('payload')) {
    buffer = Buffer.isBuffer(opts.payload);
    req.body = buffer ? opts.payload : new Buffer(opts.payload);
  }
  if (opts.node) req.query.node = opts.node;
  if (opts.service) req.query.service = opts.service;
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._put(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    if (data.hasOwnProperty('Payload')) {
      data.Payload = utils.decode(data.Payload, { buffer: buffer });
    }

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event.prototype.list" id="apidoc.element.consul.Event.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Event.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Event.prototype.list = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  } else if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.list',
    path: '/event/list',
    query: {},
  };

  if (opts.name) req.query.name = opts.name;

  utils.options(req, opts);

  this.consul._get(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    data.forEach(function(item) {
      if (!item.hasOwnProperty('Payload')) return;
      item.Payload = utils.decode(item.Payload, opts);
    });

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health" id="apidoc.element.consul.Health">
        function <span class="apidocSignatureSpan">consul.</span>Health
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Health(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.<span class="apidocCodeKeywordSpan">Health</span>(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.checks" id="apidoc.element.consul.Health.prototype.checks">
        function <span class="apidocSignatureSpan">consul.</span>Health.prototype.checks
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Health.prototype.checks = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.checks',
    path: '/health/checks/{service}',
    params: { service: opts.service },
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.node" id="apidoc.element.consul.Health.prototype.node">
        function <span class="apidocSignatureSpan">consul.</span>Health.prototype.node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Health.prototype.node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.node',
    path: '/health/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.service" id="apidoc.element.consul.Health.prototype.service">
        function <span class="apidocSignatureSpan">consul.</span>Health.prototype.service
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Health.prototype.service = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.service',
    path: '/health/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  if (opts.tag) req.query.tag = opts.tag;
  if (opts.passing) req.query.passing = 'true';

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.state" id="apidoc.element.consul.Health.prototype.state">
        function <span class="apidocSignatureSpan">consul.</span>Health.prototype.state
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Health.prototype.state = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { state: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.state',
    path: '/health/state/{state}',
    params: { state: opts.state },
  };

  if (!opts.state) {
    return callback(this.consul._err(errors.Validation('state required'), req));
  }

  if (opts.state !== 'any' &amp;&amp; constants.CHECK_STATE.indexOf(opts.state) &lt; 0) {
    return callback(this.consul._err(errors.Validation('state invalid: ' + opts.state), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv" id="apidoc.element.consul.Kv">
        function <span class="apidocSignatureSpan">consul.</span>Kv
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Kv(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.<span class="apidocCodeKeywordSpan">Kv</span>(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.del" id="apidoc.element.consul.Kv.prototype.del">
        function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.del
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Kv.prototype.del = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.del',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.get" id="apidoc.element.consul.Kv.prototype.get">
        function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Kv.prototype.get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.get',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';
  if (opts.raw) {
    req.query.raw = 'true';
    req.buffer = true;
  }

  utils.options(req, opts);

  this.consul._get(req, function(err, res) {
    if (res &amp;&amp; res.statusCode === 404) return callback(undefined, undefined, res);
    if (err) return callback(err, undefined, res);
    if (opts.raw) return callback(null, res.body, res);

    if (res.body &amp;&amp; Array.isArray(res.body) &amp;&amp; res.body.length) {
      res.body.forEach(function(item) {
        if (!item.hasOwnProperty('Value')) return;
        item.Value = utils.decode(item.Value, opts);
      });
    } else {
      return callback(undefined, undefined, res);
    }

    if (!opts.recurse) return callback(null, res.body[0], res);

    callback(null, res.body, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.keys" id="apidoc.element.consul.Kv.prototype.keys">
        function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.keys
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Kv.prototype.keys = function (opts, callback) {
  switch (typeof opts) {
    case 'string':
      opts = { key: opts };
      break;
    case 'function':
      callback = opts;
      opts = {};
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.keys',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: { keys: true },
  };

  if (opts.separator) req.query.separator = opts.separator;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.set" id="apidoc.element.consul.Kv.prototype.set">
        function <span class="apidocSignatureSpan">consul.</span>Kv.prototype.set
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Kv.prototype.set = function (opts, callback) {
  switch (arguments.length) {
    case 4:
      // set(key, value, opts, callback)
      opts = arguments[2];
      opts.key = arguments[0];
      opts.value = arguments[1];
      callback = arguments[3];
      break;
    case 3:
      // set(key, value, callback)
      opts = {
        key: arguments[0],
        value: arguments[1],
      };
      callback = arguments[2];
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.set',
    path: '/kv/{key}',
    params: { key: opts.key },
    query: {},
    type: 'text',
    body: opts.value || '',
  };

  if (!opts.key) {
    return callback(this.consul._err(errors.Validation('key required'), req));
  }
  if (!opts.hasOwnProperty('value')) {
    return callback(this.consul._err(errors.Validation('value required'), req));
  }

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;
  if (opts.hasOwnProperty('flags')) req.query.flags = opts.flags;
  if (opts.hasOwnProperty('acquire')) req.query.acquire = opts.acquire;
  if (opts.hasOwnProperty('release')) req.query.release = opts.release;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock" id="apidoc.element.consul.Lock">
        function <span class="apidocSignatureSpan">consul.</span>Lock
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Lock(consul, opts) {
  events.EventEmitter.call(this);

  opts = utils.normalizeKeys(opts);

  this.consul = consul;
  this._opts = opts;

  if (opts.session) {
    switch (typeof opts.session) {
      case 'string':
        opts.session = { id: opts.session };
        break;
      case 'object':
        opts.session = utils.normalizeKeys(opts.session);
        break;
      default:
        throw errors.Validation('session must be an object or string');
    }
  } else {
    opts.session = {};
  }

  if (!opts.key) {
    throw errors.Validation('key required');
  } else if (typeof opts.key !== 'string') {
    throw errors.Validation('key must be a string');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Lock helper.
 */

Consul.meta.lock = { type: 'eventemitter' };

Consul.prototype.lock = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Lock</span>(this, opts);
};

/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._acquire" id="apidoc.element.consul.Lock.prototype._acquire">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._acquire
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._acquire = function (ctx) {
  var self = this;

  var opts = utils.defaults({
    key: ctx.key,
    acquire: ctx.session.id,
    ctx: ctx,
    value: ctx.value,
    flags: LOCK_FLAG_VALUE,
  }, self.consul._defaults);

  self.consul.kv.set(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data !== true) {
      ctx.state = 'wait';

      return utils.setTimeoutContext(function() { self._run(ctx); }, ctx,
        ctx.lockRetryTime);
    }

    ctx.held = true;
    self.emit('acquire');

    ctx.state = 'monitor';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._end" id="apidoc.element.consul.Lock.prototype._end">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._end
        <span class="apidocSignatureSpan">(ctx, err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._end = function (ctx, err, res) {
  var self = this;

  if (ctx.end) return;
  ctx.end = true;

  delete self._ctx;

  if (err) self._err(err, res);

  if (ctx.monitor) {
    ctx.monitor.removeAllListeners();
    ctx.monitor.end();

    delete ctx.monitor;
  }

  if (ctx.renewSession) {
    clearInterval(ctx.renewSession);

    var opts = utils.defaults({
      id: ctx.session.id,
      timeout: 1000,
    }, self.consul._defaults);

    self.consul.session.destroy(opts, function() {
      // ignore errors
    });

    delete ctx.renewSession;
  }

  // abort any pending requests
  ctx.emit('cancel');

  if (ctx.held) {
    ctx.held = false;
    self.emit('release');
  }

  self.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._err" id="apidoc.element.consul.Lock.prototype._err">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._err = function (err, res) {
  var self = this;

  self.emit('error', err, res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._monitor" id="apidoc.element.consul.Lock.prototype._monitor">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._monitor
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._monitor = function (ctx) {
  var self = this;

  var monitor = ctx.monitor = self.consul.watch({
    method: self.consul.kv.get,
    options: utils.defaults({
      key: ctx.key,
      wait: ctx.lockWaitTime,
      timeout: ctx.lockWaitTimeout,
      index: ctx.index,
    }, self.consul._defaults),
  });

  var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

  // monitor updates
  if (ttl) {
    utils.setIntervalContext(function() {
      var time = monitor.updateTime();

      if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
        monitor.end();
      }
    }, ctx, Math.min(1000, ttl));
  }

  monitor.on('change', function(data) {
    if (data) {
      if (data.Session !== ctx.session.id) {
        return monitor.end();
      }
    }
  });

  monitor.on('error', function() {
    // ignore errors
  });

  monitor.on('end', function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._release" id="apidoc.element.consul.Lock.prototype._release">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._release
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._release = function (ctx) {
  var self = this;

  if (ctx.held) {
    var opts = utils.defaults({
      key: ctx.key,
      release: ctx.session.id,
      ctx: ctx,
      value: ctx.value,
      flags: LOCK_FLAG_VALUE,
    }, self.consul._defaults);

    self.consul.kv.set(opts, function(err, data) {
      if (err) return self._end(ctx, err);

      if (data !== true) {
        err = new Error('failed to release lock');
        return self._end(ctx, err);
      }

      self._end(ctx);
    });

    return;
  }

  process.nextTick(function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._run" id="apidoc.element.consul.Lock.prototype._run">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._run
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._run = function (ctx) {
  if (ctx.end) return;

  switch (ctx.state) {
    case 'session':
      return this._session(ctx);
    case 'wait':
      return this._wait(ctx);
    case 'acquire':
      return this._acquire(ctx);
    case 'monitor':
      return this._monitor(ctx);
    default:
      throw new Error('invalid state: ' + ctx.state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._session" id="apidoc.element.consul.Lock.prototype._session">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._session
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._session = function (ctx) {
  var self = this;

  if (!ctx.session.id) {
    var opts = utils.defaults({
      name: ctx.session.name || DEFAULT_LOCK_SESSION_NAME,
      ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
      ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
      if (err) {
        err.message = 'session create: ' + err.message;
        return self._end(ctx, err, res);
      }

      ctx.session = {
        id: data.ID,
        ttl: opts.ttl,
      };

      ctx.state = 'wait';

      var renewTimeout = utils.parseDuration(ctx.session.ttl) / 2;

      // renew session
      ctx.renewSession = setInterval(function() {
        var opts = utils.defaults({
          id: ctx.session.id,
          timeout: renewTimeout,
          ctx: ctx,
        }, self.consul._defaults);

        self.consul.session.renew(opts, function(err, data, res) {
          if (err) self._end(ctx, err, res);
        });
      }, renewTimeout);

      return self._run(ctx);
    });

    return;
  }

  ctx.state = 'wait';

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._wait" id="apidoc.element.consul.Lock.prototype._wait">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype._wait
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype._wait = function (ctx) {
  var self = this;

  var retry = function() {
    utils.setTimeoutContext(function() {
      self._run(ctx);
    }, ctx, ctx.lockRetryTime);
  };

  var opts = utils.defaults({
    key: ctx.key,
    wait: ctx.lockWaitTime,
    timeout: ctx.lockWaitTimeout,
    ctx: ctx,
    index: ctx.index,
  }, self.consul._defaults);

  self.consul.kv.get(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data) {
      // we try to use the same magic number as consul/api in an attempt to be
      // compatible
      if (data.Flags !== +LOCK_FLAG_VALUE) {
        err = errors.Validation('consul: lock: existing key does not match lock use');
        return self._end(ctx, err, res);
      }

      var newIndex = res.headers['x-consul-index'];
      if (utils.hasIndexChanged(newIndex, ctx.index)) ctx.index = newIndex;

      if (data.Session !== ctx.Session) {
        self.emit('retry', { leader: data.Session });
        return retry();
      }
    } else if (res.statusCode !== 404) {
      return self._end(ctx, new Error('consul: lock: error getting key'), res);
    }

    ctx.state = 'acquire';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.acquire" id="apidoc.element.consul.Lock.prototype.acquire">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype.acquire
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype.acquire = function () {
  var self = this;

  if (self._ctx) throw new errors.Validation('lock in use');

  var ctx = self._ctx = new events.EventEmitter();

  ctx.key = self._opts.key;
  ctx.session = utils.clone(self._opts.session);
  ctx.index = '0';
  ctx.end = false;
  ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
  ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
  ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
  ctx.state = 'session';
  ctx.value = self._opts.value || null;

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.release" id="apidoc.element.consul.Lock.prototype.release">
        function <span class="apidocSignatureSpan">consul.</span>Lock.prototype.release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Lock.prototype.release = function () {
  var self = this;

  var ctx = self._ctx;

  if (!self._ctx) throw errors.Validation('no lock in use');

  delete self._ctx;

  process.nextTick(function() {
    self._release(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query" id="apidoc.element.consul.Query">
        function <span class="apidocSignatureSpan">consul.</span>Query
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.<span class="apidocCodeKeywordSpan">Query</span>(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype._params" id="apidoc.element.consul.Query.prototype._params">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype._params
        <span class="apidocSignatureSpan">(req, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype._params = function (req, opts) {
  var body = req.body || {};

  if (opts.name) body.Name = opts.name;
  if (opts.session) body.Session = opts.session;
  if (opts.token) {
    body.Token = opts.token;
    delete opts.token;
  }
  if (opts.near) body.Near = opts.near;
  if (opts.template) {
    var template = utils.normalizeKeys(opts.template);
    if (template.type || template.regexp) {
      body.Template = {};
      if (template.type) body.Template.Type = template.type;
      if (template.regexp) body.Template.Regexp = template.regexp;
    }
  }
  if (opts.service) {
    var service = utils.normalizeKeys(opts.service);
    body.Service = {};
    if (service.service) body.Service.Service = service.service;
    if (service.failover) {
      var failover = utils.normalizeKeys(service.failover);
      if (typeof failover.nearestn === 'number' || failover.datacenters) {
        body.Service.Failover = {};
        if (typeof failover.nearestn === 'number') {
          body.Service.Failover.NearestN = failover.nearestn;
        }
        if (failover.datacenters) {
          body.Service.Failover.Datacenters = failover.datacenters;
        }
      }
    }
    if (typeof service.onlypassing === 'boolean') {
      body.Service.OnlyPassing = service.onlypassing;
    }
    if (service.tags) body.Service.Tags = service.tags;
  }
  if (opts.dns) {
    var dns = utils.normalizeKeys(opts.dns);
    if (dns.ttl) body.DNS = { TTL: dns.ttl };
  }

  req.body = body;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.create" id="apidoc.element.consul.Query.prototype.create">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.create = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: { service: opts } };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.create',
    path: '/query',
    query: {},
    type: 'json',
  };

  try {
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._post(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.destroy" id="apidoc.element.consul.Query.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.destroy',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.execute" id="apidoc.element.consul.Query.prototype.execute">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.execute
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.execute = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.execute',
    path: '/query/{query}/execute',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.explain" id="apidoc.element.consul.Query.prototype.explain">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.explain
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.explain = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.explain',
    path: '/query/{query}/explain',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.get" id="apidoc.element.consul.Query.prototype.get">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.get',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.list" id="apidoc.element.consul.Query.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.list',
    path: '/query',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.update" id="apidoc.element.consul.Query.prototype.update">
        function <span class="apidocSignatureSpan">consul.</span>Query.prototype.update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Query.prototype.update = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.update',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
    type: 'json',
  };

  try {
    if (!opts.query) throw errors.Validation('query required');
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session" id="apidoc.element.consul.Session">
        function <span class="apidocSignatureSpan">consul.</span>Session
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.<span class="apidocCodeKeywordSpan">Session</span>(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.create" id="apidoc.element.consul.Session.prototype.create">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.create',
    path: '/session/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.lockdelay) req.body.LockDelay = opts.lockdelay;
  if (opts.name) req.body.Name = opts.name;
  if (opts.node) req.body.Node = opts.node;
  if (opts.checks) req.body.Checks = opts.checks;
  if (opts.behavior) req.body.Behavior = opts.behavior;
  if (opts.ttl) req.body.TTL = opts.ttl;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.destroy" id="apidoc.element.consul.Session.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.destroy',
    path: '/session/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.info" id="apidoc.element.consul.Session.prototype.info">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.info',
    path: '/session/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.list" id="apidoc.element.consul.Session.prototype.list">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.list',
    path: '/session/list',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.node" id="apidoc.element.consul.Session.prototype.node">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.node',
    path: '/session/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.renew" id="apidoc.element.consul.Session.prototype.renew">
        function <span class="apidocSignatureSpan">consul.</span>Session.prototype.renew
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Session.prototype.renew = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.renew',
    path: '/session/renew/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status" id="apidoc.element.consul.Status">
        function <span class="apidocSignatureSpan">consul.</span>Status
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Status(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.<span class="apidocCodeKeywordSpan">Status</span>(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
      papi.tools.promisify(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status.prototype.leader" id="apidoc.element.consul.Status.prototype.leader">
        function <span class="apidocSignatureSpan">consul.</span>Status.prototype.leader
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Status.prototype.leader = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.leader',
    path: '/status/leader',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status.prototype.peers" id="apidoc.element.consul.Status.prototype.peers">
        function <span class="apidocSignatureSpan">consul.</span>Status.prototype.peers
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Status.prototype.peers = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.peers',
    path: '/status/peers',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch" id="apidoc.element.consul.Watch">
        function <span class="apidocSignatureSpan">consul.</span>Watch
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watch(consul, opts) {
  var self = this;

  events.EventEmitter.call(self);

  opts = utils.normalizeKeys(opts);

  var options = utils.normalizeKeys(opts.options || {});
  options = utils.defaults(options, consul._defaults);
  options.wait = options.wait || '30s';
  options.index = options.index || '0';

  self._context = { consul: consul };
  self._options = options;
  self._attempts = 0;
  self._method = opts.method;

  if (typeof opts.method !== 'function') {
    throw errors.Validation('method required');
  }

  process.nextTick(function() { self._run(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };

Consul.prototype.watch = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Watch</span>(this, opts);
};

/**
 * Walk methods
 */

Consul.meta.walk = { type: 'sync' };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._err" id="apidoc.element.consul.Watch.prototype._err">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype._err = function (err, res) {
  var self = this;

  if (self._end) return;

  self.emit('error', err, res);

  if (res &amp;&amp; res.statusCode === 400) return self.end();

  utils.setTimeoutContext(function() { self._run(); }, self, self._wait());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._run" id="apidoc.element.consul.Watch.prototype._run">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype._run = function () {
  var self = this;

  if (self._end) return;

  var opts = utils.clone(self._options);
  opts.ctx = self;

  try {
    self._method.call(self._context, opts, function(err, data, res) {
      if (err) {
        return self._err(err, res);
      }

      self._updateTime = +new Date();

      self._attempts = 0;

      var newIndex = res.headers['x-consul-index'];

      if (utils.hasIndexChanged(newIndex, self._options.index)) {
        self._options.index = newIndex;

        self.emit('change', data, res);
      }

      process.nextTick(function() { self._run(); });
    });
  } catch (err) {
    self._err(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._wait" id="apidoc.element.consul.Watch.prototype._wait">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype._wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype._wait = function () {
  return Math.min(Math.pow(2, ++this._attempts), 256) * 100;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.end" id="apidoc.element.consul.Watch.prototype.end">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype.end = function () {
  if (this._end) return;
  this._end = true;

  this.emit('cancel');
  this.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.isRunning" id="apidoc.element.consul.Watch.prototype.isRunning">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.isRunning
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype.isRunning = function () {
  return !this._end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.updateTime" id="apidoc.element.consul.Watch.prototype.updateTime">
        function <span class="apidocSignatureSpan">consul.</span>Watch.prototype.updateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">Watch.prototype.updateTime = function () {
  return this._updateTime;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.parseQueryMeta" id="apidoc.element.consul.parseQueryMeta">
        function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseQueryMeta = function (res) {
  return utils.parseQueryMeta(res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: 'sync' };

Consul.parseQueryMeta = Consul.prototype.parseQueryMeta = function(res) {
  return utils.<span class="apidocCodeKeywordSpan">parseQueryMeta</span>(res);
};

/**
 * Module exports.
 */

exports.Consul = Consul;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_" id="apidoc.element.consul.super_">
        function <span class="apidocSignatureSpan">consul.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Client(opts) {
  if (!(this instanceof Client)) {
    return new Client(opts);
  }

  events.EventEmitter.call(this);

  opts = opts || {};

  if (typeof opts === 'string') {
    opts = { baseUrl: opts };
  } else {
    opts = utils.merge(opts);
  }

  if (!opts.baseUrl) {
    throw errors.Validation('baseUrl required');
  }

  if (!(opts.baseUrl instanceof url.Url)) {
    if (typeof opts.baseUrl !== 'string') {
      throw errors.Validation('baseUrl must be a string: ' + opts.baseUrl);
    }

    opts.baseUrl = url.parse(opts.baseUrl);
  }

  var path = opts.baseUrl.pathname;
  opts.baseUrl = utils.pick(opts.baseUrl,
    'auth', 'hostname', 'port', 'protocol');
  opts.baseUrl.path = path;

  if (opts.baseUrl.path === '/') {
    opts.baseUrl.path = '';
  } else if (opts.baseUrl.path[opts.baseUrl.path.length - 1] === '/') {
    throw errors.Validation('baseUrl must not end with a forward slash');
  }

  opts.headers = utils.mergeHeaders(opts.headers);
  if (opts.tags) {
    if (Array.isArray(opts.tags)) {
      opts.tags = opts.tags.slice(0);
    } else {
      throw errors.Validation('tags must be an array');
    }
  } else {
    opts.tags = [];
  }

  if (opts.name &amp;&amp; !~opts.tags.indexOf(opts.name)) {
    opts.tags.push(opts.name);
  }

  opts.encoders = utils.merge(constants.ENCODERS, opts.encoders);
  opts.decoders = utils.merge(constants.DECODERS, opts.decoders);

  this._opts = opts;
  this._exts = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__create" id="apidoc.element.consul.super_.prototype.__create">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__create
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype.__create = function (request, next) {
  var self = this;

  var opts = request.opts;
  var path = opts.path;

  if (typeof path !== 'string') {
    return next(errors.Validation('path required'));
  }

  var headers = utils.mergeHeaders(self._opts.headers, opts.headers);

  // path
  try {
    path = path.replace(/\{(\w+)\}/g, function(src, dst) {
      if (!opts.params.hasOwnProperty(dst)) {
        throw errors.Validation('missing param: ' + dst);
      }

      var part = opts.params[dst] || '';

      // optionally disable param encoding
      return part.encode === false &amp;&amp; part.toString ?
        part.toString() : encodeURIComponent(part);
    });
  } catch (err) {
    return next(err);
  }

  // query
  if (!utils.isEmpty(opts.query)) {
    try {
      path += '?' + self._encode('application/x-www-form-urlencoded',
                                 opts.query).toString();
    } catch (err) {
      return next(err);
    }
  }

  // body
  if (opts.body !== undefined) {
    var mime = constants.MIME_ALIAS[opts.type] ||
      headers['content-type'] ||
      constants.MIME_ALIAS[self._opts.type];

    var isFunction = typeof opts.body === 'function';

    if (isFunction) {
      try {
        request.body = opts.body();
      } catch (err) {
        return next(err);
      }
    } else {
      request.body = opts.body;
    }

    var isBuffer = Buffer.isBuffer(request.body);
    var isStream = utils.isReadableStream(request.body);

    if (!isBuffer &amp;&amp; !isStream &amp;&amp; !mime) {
      return next(errors.Validation('type required'));
    }

    if (!isBuffer &amp;&amp; !isStream) {
      if (self._opts.encoders[mime]) {
        try {
          request.body = this._encode(mime, request.body);
        } catch (err) {
          return next(err);
        }
      } else {
        return next(errors.Codec('type is unknown: ' + mime));
      }
    }

    if (!headers['content-type'] &amp;&amp; mime) {
      headers['content-type'] = mime + '; charset=' + constants.CHARSET;
    }

    if (isStream) {
      if (!isFunction) request._retryable = false;
    } else {
      headers['content-length'] = request.body.length;
    }
  } else if (!~constants.EXCLUDE_CONTENT_LENGTH.indexOf(opts.method)) {
    headers['content-length'] = 0;
  }

  // response pipe
  if (opts.pipe) {
    var isPipeFunction = typeof opts.pipe === 'function';

    if (isPipeFunction) {
      try {
        request.pipe = opts.pipe();
      } catch (err) {
        return next(err);
      }
    } else {
      request.pipe = opts.pipe;

      request._retryable = false;
    }

    if (!utils.isWritableStream(request.pipe)) {
      return next(errors.Validation('pipe must be a writable stream'));
    }
  }

  // build http.request options
  request.req = utils.merge(
    utils.pick(self._opts, constants.CLIENT_OPTIONS),
    utils.pick(self._opts.baseUrl, 'auth', 'hostname', 'port', 'path'),
    utils.pick(opts, constants.REQUEST_OPTIONS),
    { headers: headers }
  );

  // append request path to baseUrl
  request.req.path += path;

  // pick http transport
  if (self._opts.baseUrl.protocol === 'https:') {
    request.transport = https;
    if (!request.req.port) request.req.port = 443;
  } else {
    request.transport = http;
    if (!request.req.port) request.req.port = 80;
  }

  if (request.req.auth === null) delete request.req.auth;

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__execute" id="apidoc.element.consul.super_.prototype.__execute">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__execute
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype.__execute = function (request, next) {
  var self = this;

  if (request.ctx) {
    if (request.ctx.canceled === true) {
      return next(errors.Validation('ctx already canceled'));
    } else if (request.ctx.finished === true) {
      return next(errors.Validation('ctx already finished'));
    }
  }

  var done = false;

  var opts = request.opts;

  var abort;
  var timeoutId;
  var timeout = opts.hasOwnProperty('timeout') ?
    opts.timeout : self._opts.timeout;

  self._log(['papi', 'request'].concat(opts.tags), request.req);

  var req = request.transport.request(request.req);

  var userAgent = req.getHeader('user-agent');

  if (userAgent === undefined) {
    req.setHeader('user-agent', 'papi/' + meta.version);
  } else if (userAgent === null) {
    req.removeHeader('user-agent');
  }

  req.on('error', function(err) {
    self._log(['papi', 'request', 'error'].concat(opts.tags), err);

    if (done) return;
    done = true;

    if (abort) request.ctx.removeListener('cancel', abort);
    if (timeoutId) clearTimeout(timeoutId);

    request.err = err;
    next();
  });

  if (request.ctx) {
    abort = function() {
      req.abort();
      req.emit('error', errors.Abort('request aborted'));
    };

    request.ctx.once('cancel', abort);
  }

  // set request and absolute timeout
  if (timeout &amp;&amp; timeout &gt; 0) {
    timeoutId = setTimeout(function() {
      req.emit('timeout');
      req.abort();
    }, timeout);

    req.setTimeout(timeout);
  }

  req.on('timeout', function(err) {
    self._log(['papi', 'request', 'error', 'timeout'].concat(opts.tags));
    if (err) {
      err = errors.Timeout(err);
    } else {
      err = errors.Timeout('request timed out (' + timeout + 'ms)');
    }
    req.emit('error', err);
  });

  req.on('response', function(res) {
    var chunks = [];
    var bodyLength = 0;

    self._log(['papi', 'response'].concat(opts.tags), {
      method: opts.method,
      path: req.path,
      statusCode: res.statusCode,
      headers: res.headers,
      remoteAddress: res.connection.remoteAddress,
      remotePort: res.connection.remotePort,
    });

    request.res = res;

    if (request.pipe) {
      res.pipe(request.pipe);
    } else {
      res.on('data', function(chunk) {
        chunks.push(chunk);
        bodyLength += chunk.length;
      });
    }

    res.on('end', function() {
      if (done) return;
      done = true;

      if (abort) request.ctx.removeListener('cancel', abort);
      if (timeoutId) clearTimeout(timeoutId);

      // body content mime
      var mime;

      // decode body
      if (bodyLength) {
        res.body = Buffer.concat(chunks, bodyLength);

        // don't decode if user explicitly asks for buffer
        if (!opts.buffer) {
          mime = (res.headers['content-type'] || '').split(';')[0].trim();

          if (self._opts.decoders[mime]) {
            try {
              res.body = self._decode(mime, res.body);
            } catch (err) {
              request.err = err;
              return next();
            }
          }
        }
      }

      // any non-200 is consider an error
      if (Math.floor(res.statusCode / 100) !== 2) {
        var err = errors.Response();

        if (res.body &amp;&amp; mime === 'text/plain' &amp;&amp; res.body.length &lt; 80) {
          err.message = res.body;
        }

        if (!err.message) {
          if (http.STATUS_CODES[res.statusCode]) {
            err.message = http.STATUS_CODES[res.statusCode].toLowerCase();
          } else {
            err.message = 'request failed: ' + res.statusCode;
          }
        }

        err.statusCode = res.statusCode;

        request.err = err;
      }

      next();
    });
  });

  if (utils.isReadableStream(request.body)) {
    request.body.pipe(req);
  } else {
    req.end(request.body);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__push" id="apidoc.element.consul.super_.prototype.__push">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype.__push
        <span class="apidocSignatureSpan">(request, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype.__push = function (request, name) {
  if (this._exts[name]) {
    request._stack.push.apply(request._stack, this._exts[name]);
  }

  if (request.opts &amp;&amp; request.opts.exts &amp;&amp; request.opts.exts[name]) {
    if (Array.isArray(request.opts.exts[name])) {
      request._stack.push.apply(request._stack, request.opts.exts[name]);
    } else {
      request._stack.push(request.opts.exts[name]);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._decode" id="apidoc.element.consul.super_.prototype._decode">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._decode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._decode = function (mime, value) {
  if (!this._opts.decoders[mime]) {
    throw errors.Codec('unknown decoder: ' + mime);
  }

  try {
    return this._opts.decoders[mime](value);
  } catch (err) {
    err.message = 'decode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._delete" id="apidoc.element.consul.super_.prototype._delete">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._delete
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._delete = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._encode" id="apidoc.element.consul.super_.prototype._encode">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._encode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._encode = function (mime, value) {
  if (!this._opts.encoders[mime]) {
    throw errors.Codec('unknown encoder: ' + mime);
  }

  try {
    return this._opts.encoders[mime](value);
  } catch (err) {
    err.message = 'encode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._err" id="apidoc.element.consul.super_.prototype._err">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._err
        <span class="apidocSignatureSpan">(err, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._err = function (err, opts) {
  if (!err) return err;

  if (!(err instanceof Error)) err = new Error(err);

  if (opts &amp;&amp; opts.name) {
    err.message = util.format('%s: %s', opts.name, err.message);
  }

  if (this._opts.name) {
    err.message = util.format('%s: %s', this._opts.name, err.message);
  }

  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._ext" id="apidoc.element.consul.super_.prototype._ext">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._ext
        <span class="apidocSignatureSpan">(eventName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._ext = function (eventName, callback) {
  if (!eventName || typeof eventName !== 'string') {
    throw this._err(errors.Validation('extension eventName required'));
  }

  if (typeof callback !== 'function') {
    throw this._err(errors.Validation('extension callback required'));
  }

  if (!this._exts[eventName]) this._exts[eventName] = [];

  this._exts[eventName].push(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._get" id="apidoc.element.consul.super_.prototype._get">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._get
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._get = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._head" id="apidoc.element.consul.super_.prototype._head">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._head
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._head = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._log" id="apidoc.element.consul.super_.prototype._log">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._log
        <span class="apidocSignatureSpan">(tags, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._log = function (tags, data) {
  return this.emit('log', tags, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._options" id="apidoc.element.consul.super_.prototype._options">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._options
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._options = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._patch" id="apidoc.element.consul.super_.prototype._patch">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._patch
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._patch = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._plugin" id="apidoc.element.consul.super_.prototype._plugin">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._plugin
        <span class="apidocSignatureSpan">(plugin, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._plugin = function (plugin, options) {
  if (!plugin) {
    throw this._err(errors.Validation('plugin required'));
  }

  if (typeof plugin.register !== 'function') {
    throw this._err(errors.Validation('plugin must have register function'));
  }

  var attributes = plugin.register.attributes;

  if (!attributes) {
    throw this._err(errors.Validation('plugin attributes required'));
  }

  if (!attributes.name) {
    throw this._err(errors.Validation('plugin attributes name required'));
  }

  if (!attributes.version) {
    throw this._err(errors.Validation('plugin attributes version required'));
  }

  return plugin.register(this, options || {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._post" id="apidoc.element.consul.super_.prototype._post">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._post
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._post = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._put" id="apidoc.element.consul.super_.prototype._put">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._put
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._put = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._request" id="apidoc.element.consul.super_.prototype._request">
        function <span class="apidocSignatureSpan">consul.</span>super_.prototype._request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_.prototype._request = function (opts) {
  var self = this;

  var request;

  if (this.__request) {
    request = this.__request;
    opts = request.opts;
    self = request._client;
  } else {
    request = {
      _args: Array.prototype.slice.call(arguments),
      _client: this,
      opts: opts,
      state: {},
    };

    if (!opts) opts = request.opts = {};

    if (request._args.length &gt; 1) {
      request._callback = request._args[request._args.length - 1];
    } else {
      return self.emit('error', self._err(
        errors.Validation('callback required'), opts));
    }

    // if ctx is an event emitter we use it to abort requests when done is
    // emitted
    if (opts.ctx instanceof events.EventEmitter) {
      request.ctx = opts.ctx;
    }

    // combine global and request tags
    opts.tags = (opts.tags || []).concat(self._opts.tags);

    // inject request name into tags if not already defined
    if (opts.name &amp;&amp; !~opts.tags.indexOf(opts.name)) {
      opts.tags.push(opts.name);
    }

    if (!opts.headers) opts.headers = {};
    if (!opts.params) opts.params = {};
    if (!opts.query) opts.query = {};

    // restart request
    request.retry = function() {
      if (request._retryable === false) {
        throw errors.Validation('request is not retryable');
      }

      self._log(['papi', 'request', 'retry'].concat(request.opts.tags));

      delete request.body;
      delete request.err;
      delete request.req;
      delete request.res;
      delete request.transport;

      self._request.call({ __request: request });
    };

    request._stack = [];

    self.__push(request, 'onCreate');

    request._stack.push(self.__create);

    self.__push(request, 'onRequest');

    request._stack.push(self.__execute);

    self.__push(request, 'onResponse');

    request._stack.push.apply(
      request._stack,
      request._args.slice(1, request._args.length - 1)
    );
  }

  var i = 0;
  function next(err) {
    if (err) return request._callback(self._err(err, opts));

    // middlware can call next(false, args...) to stop middleware
    if (err === false) {
      return request._callback.apply(null,
        Array.prototype.slice.call(arguments, 1));
    }

    var fn = request._stack[i++];
    if (fn) {
      fn.call(self, request, next);
    } else {
      request._callback.call(self, self._err(request.err, opts), request.res);
    }
  }

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.toString" id="apidoc.element.consul.toString">
        function <span class="apidocSignatureSpan">consul.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Decode value
*/

function decode(value, opts) {
 if (typeof value !== 'string') return value;
 value = new Buffer(value, 'base64');
 if (!opts || !opts.buffer) value = value.<span class="apidocCodeKeywordSpan">toString</span>();
 return value;
}

/**
* Shallow clone
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.walk" id="apidoc.element.consul.walk">
        function <span class="apidocSignatureSpan">consul.</span>walk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">walk = function () {
  return papi.tools.walk(Consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Walk methods
 */

Consul.meta.walk = { type: 'sync' };

Consul.walk = Consul.prototype.walk = function() {
  return papi.tools.<span class="apidocCodeKeywordSpan">walk</span>(Consul);
};

/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: 'sync' };
...</pre></li>
    </ul>
































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl" id="apidoc.module.consul.Acl">module consul.Acl</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.Acl" id="apidoc.element.consul.Acl.Acl">
        function <span class="apidocSignatureSpan">consul.</span>Acl
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Acl(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.<span class="apidocCodeKeywordSpan">Acl</span>(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype" id="apidoc.module.consul.Acl.prototype">module consul.Acl.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.clone" id="apidoc.element.consul.Acl.prototype.clone">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.clone',
    path: '/acl/clone/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 "Name": "Read only",
 "Type": "client",
 "Rules": "{\"key\":{\"\":{\"policy\":\"read\"}}}"
}
```

&lt;a name="acl-clone"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">clone</span>(options, callback)

Creates a new token by cloning an existing token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.create" id="apidoc.element.consul.Acl.prototype.create">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.create',
    path: '/acl/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.destroy" id="apidoc.element.consul.Acl.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.destroy',
    path: '/acl/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.get" id="apidoc.element.consul.Acl.prototype.get">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.info',
    path: '/acl/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.info" id="apidoc.element.consul.Acl.prototype.info">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.info',
    path: '/acl/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.list" id="apidoc.element.consul.Acl.prototype.list">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.list',
    path: '/acl/list',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.update" id="apidoc.element.consul.Acl.prototype.update">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.update',
    path: '/acl/update',
    query: {},
    type: 'json',
    body: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  req.body.ID = opts.id;

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 "ID": "b1f4c10e-b61b-e1de-de95-218c9fefdd3e"
}
```

&lt;a name="acl-update"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.clone" id="apidoc.module.consul.Acl.prototype.clone">module consul.Acl.prototype.clone</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.clone.clone" id="apidoc.element.consul.Acl.prototype.clone.clone">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>clone
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.clone',
    path: '/acl/clone/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 "Name": "Read only",
 "Type": "client",
 "Rules": "{\"key\":{\"\":{\"policy\":\"read\"}}}"
}
```

&lt;a name="acl-clone"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">clone</span>(options, callback)

Creates a new token by cloning an existing token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.create" id="apidoc.module.consul.Acl.prototype.create">module consul.Acl.prototype.create</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.create.create" id="apidoc.element.consul.Acl.prototype.create.create">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.create',
    path: '/acl/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.destroy" id="apidoc.module.consul.Acl.prototype.destroy">module consul.Acl.prototype.destroy</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.destroy.destroy" id="apidoc.element.consul.Acl.prototype.destroy.destroy">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.destroy',
    path: '/acl/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.info" id="apidoc.module.consul.Acl.prototype.info">module consul.Acl.prototype.info</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.info.info" id="apidoc.element.consul.Acl.prototype.info.info">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.info',
    path: '/acl/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.list" id="apidoc.module.consul.Acl.prototype.list">module consul.Acl.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.list.list" id="apidoc.element.consul.Acl.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.list',
    path: '/acl/list',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Acl.prototype.update" id="apidoc.module.consul.Acl.prototype.update">module consul.Acl.prototype.update</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Acl.prototype.update.update" id="apidoc.element.consul.Acl.prototype.update.update">
        function <span class="apidocSignatureSpan">consul.Acl.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'acl.update',
    path: '/acl/update',
    query: {},
    type: 'json',
    body: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  req.body.ID = opts.id;

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 "ID": "b1f4c10e-b61b-e1de-de95-218c9fefdd3e"
}
```

&lt;a name="acl-update"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent" id="apidoc.module.consul.Agent">module consul.Agent</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Agent" id="apidoc.element.consul.Agent.Agent">
        function <span class="apidocSignatureSpan">consul.</span>Agent
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.Check(consul);
  this.service = new Agent.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.<span class="apidocCodeKeywordSpan">Agent</span>(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check" id="apidoc.element.consul.Agent.Check">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Agent` client.
 */

function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.<span class="apidocCodeKeywordSpan">Check</span>(consul);
  this.service = new Agent.Service(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service" id="apidoc.element.consul.Agent.Service">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check" id="apidoc.module.consul.Agent.Check">module consul.Agent.Check</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.Check" id="apidoc.element.consul.Agent.Check.Check">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Check
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentCheck(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Agent` client.
 */

function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.<span class="apidocCodeKeywordSpan">Check</span>(consul);
  this.service = new Agent.Service(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype" id="apidoc.module.consul.Agent.Check.prototype">module consul.Agent.Check.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.deregister" id="apidoc.element.consul.Agent.Check.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.deregister',
    path: '/agent/check/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-deregister"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.fail" id="apidoc.element.consul.Agent.Check.prototype.fail">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.fail',
    path: '/agent/check/fail/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.warn('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-fail"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">fail</span>(options, callback)

Mark a test as critical.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.list" id="apidoc.element.consul.Agent.Check.prototype.list">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.list',
    path: '/agent/checks',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.pass" id="apidoc.element.consul.Agent.Check.prototype.pass">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pass = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.pass',
    path: '/agent/check/pass/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.deregister('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-pass"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">pass</span>(options, callback)

Mark a test as passing.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.register" id="apidoc.element.consul.Agent.Check.prototype.register">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.register',
    path: '/agent/check/register',
    type: 'json',
  };

  try {
    req.body = utils.createCheck(opts);
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "",
   "ServiceName": ""
 }
}
```

&lt;a name="agent-check-register"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.warn" id="apidoc.element.consul.Agent.Check.prototype.warn">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.warn',
    path: '/agent/check/warn/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.pass('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-warn"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">warn</span>(options, callback)

Mark a test as warning.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.deregister" id="apidoc.module.consul.Agent.Check.prototype.deregister">module consul.Agent.Check.prototype.deregister</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.deregister.deregister" id="apidoc.element.consul.Agent.Check.prototype.deregister.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.deregister',
    path: '/agent/check/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-deregister"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.fail" id="apidoc.module.consul.Agent.Check.prototype.fail">module consul.Agent.Check.prototype.fail</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.fail.fail" id="apidoc.element.consul.Agent.Check.prototype.fail.fail">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>fail
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.fail',
    path: '/agent/check/fail/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.warn('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-fail"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">fail</span>(options, callback)

Mark a test as critical.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.list" id="apidoc.module.consul.Agent.Check.prototype.list">module consul.Agent.Check.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.list.list" id="apidoc.element.consul.Agent.Check.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.list',
    path: '/agent/checks',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.pass" id="apidoc.module.consul.Agent.Check.prototype.pass">module consul.Agent.Check.prototype.pass</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.pass.pass" id="apidoc.element.consul.Agent.Check.prototype.pass.pass">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>pass
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pass = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.pass',
    path: '/agent/check/pass/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.deregister('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-pass"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">pass</span>(options, callback)

Mark a test as passing.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.register" id="apidoc.module.consul.Agent.Check.prototype.register">module consul.Agent.Check.prototype.register</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.register.register" id="apidoc.element.consul.Agent.Check.prototype.register.register">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.register',
    path: '/agent/check/register',
    type: 'json',
  };

  try {
    req.body = utils.createCheck(opts);
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "",
   "ServiceName": ""
 }
}
```

&lt;a name="agent-check-register"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Check.prototype.warn" id="apidoc.module.consul.Agent.Check.prototype.warn">module consul.Agent.Check.prototype.warn</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Check.prototype.warn.warn" id="apidoc.element.consul.Agent.Check.prototype.warn.warn">
        function <span class="apidocSignatureSpan">consul.Agent.Check.prototype.</span>warn
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.check.warn',
    path: '/agent/check/warn/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  if (opts.note) req.query.note = opts.note;

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.check.pass('example', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-warn"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">warn</span>(options, callback)

Mark a test as warning.

Options

* id (String): check ID
* note (String, optional): human readable message
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service" id="apidoc.module.consul.Agent.Service">module consul.Agent.Service</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.Service" id="apidoc.element.consul.Agent.Service.Service">
        function <span class="apidocSignatureSpan">consul.Agent.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AgentService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype" id="apidoc.module.consul.Agent.Service.prototype">module consul.Agent.Service.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.deregister" id="apidoc.element.consul.Agent.Service.prototype.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.deregister',
    path: '/agent/service/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-deregister"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.list" id="apidoc.element.consul.Agent.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.list',
    path: '/agent/services',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.maintenance" id="apidoc.element.consul.Agent.Service.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.maintenance',
    path: '/agent/service/maintenance/{id}',
    params: { id: opts.id },
    query: { enable: opts.enable },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }
  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "DelegateMax": 4,
   "DelegateCur": 4
 }
}
```

&lt;a name="agent-maintenance"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.register" id="apidoc.element.consul.Agent.Service.prototype.register">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.register',
    path: '/agent/service/register',
    type: 'json',
    body: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  req.body.Name = opts.name;
  if (opts.id) req.body.ID = opts.id;
  if (opts.tags) req.body.Tags = opts.tags;
  if (opts.hasOwnProperty('address')) req.body.Address = opts.address;
  if (opts.hasOwnProperty('port')) req.body.Port = opts.port;

  try {
    if (Array.isArray(opts.checks)) {
      req.body.Checks = opts.checks.map(utils.createServiceCheck);
    } else if (opts.check) {
      req.body.Check = utils.createServiceCheck(opts.check);
    }
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "",
   "ServiceName": ""
 }
}
```

&lt;a name="agent-check-register"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype.deregister" id="apidoc.module.consul.Agent.Service.prototype.deregister">module consul.Agent.Service.prototype.deregister</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.deregister.deregister" id="apidoc.element.consul.Agent.Service.prototype.deregister.deregister">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>deregister
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deregister = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.deregister',
    path: '/agent/service/deregister/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

consul.agent.check.register(check, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-check-deregister"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">deregister</span>(options, callback)

Deregister a check.

Options

* id (String): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype.list" id="apidoc.module.consul.Agent.Service.prototype.list">module consul.Agent.Service.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.list.list" id="apidoc.element.consul.Agent.Service.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.list',
    path: '/agent/services',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype.maintenance" id="apidoc.module.consul.Agent.Service.prototype.maintenance">module consul.Agent.Service.prototype.maintenance</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.maintenance.maintenance" id="apidoc.element.consul.Agent.Service.prototype.maintenance.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.maintenance',
    path: '/agent/service/maintenance/{id}',
    params: { id: opts.id },
    query: { enable: opts.enable },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }
  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "DelegateMax": 4,
   "DelegateCur": 4
 }
}
```

&lt;a name="agent-maintenance"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.Service.prototype.register" id="apidoc.module.consul.Agent.Service.prototype.register">module consul.Agent.Service.prototype.register</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.Service.prototype.register.register" id="apidoc.element.consul.Agent.Service.prototype.register.register">
        function <span class="apidocSignatureSpan">consul.Agent.Service.prototype.</span>register
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.service.register',
    path: '/agent/service/register',
    type: 'json',
    body: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  req.body.Name = opts.name;
  if (opts.id) req.body.ID = opts.id;
  if (opts.tags) req.body.Tags = opts.tags;
  if (opts.hasOwnProperty('address')) req.body.Address = opts.address;
  if (opts.hasOwnProperty('port')) req.body.Port = opts.port;

  try {
    if (Array.isArray(opts.checks)) {
      req.body.Checks = opts.checks.map(utils.createServiceCheck);
    } else if (opts.check) {
      req.body.Check = utils.createServiceCheck(opts.check);
    }
  } catch (err) {
    return callback(this.consul._err(errors.Validation(err.message), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "",
   "ServiceName": ""
 }
}
```

&lt;a name="agent-check-register"&gt;&lt;/a&gt;
### consul.agent.check.<span class="apidocCodeKeywordSpan">register</span>(options, callback)

Registers a new check.

Options

* name (String): check name
* id (String, optional): check ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype" id="apidoc.module.consul.Agent.prototype">module consul.Agent.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.checks" id="apidoc.element.consul.Agent.prototype.checks">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function () {
  this.check.list.apply(this.check, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-checks"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.forceLeave" id="apidoc.element.consul.Agent.prototype.forceLeave">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceLeave = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.forceLeave',
    path: '/agent/force-leave/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.join('127.0.0.2', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-force-leave"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">forceLeave</span>(options, callback)

Force remove node.

Options

* node (String): node name to remove
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.join" id="apidoc.element.consul.Agent.prototype.join">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { address: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.join',
    path: '/agent/join/{address}',
    params: { address: opts.address },
  };

  if (!opts.address) {
    return callback(this.consul._err(errors.Validation('address required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.maintenance(true, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-join"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">join</span>(options, callback)

Trigger agent to join a node.

Options

* address (String): node IP address to join
* wan (Boolean, default false): attempt to join using the WAN pool
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.maintenance" id="apidoc.element.consul.Agent.prototype.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  if (typeof opts === 'boolean') {
    opts = { enable: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.maintenance',
    path: '/agent/maintenance',
    query: { enable: opts.enable },
  };

  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "DelegateMax": 4,
   "DelegateCur": 4
 }
}
```

&lt;a name="agent-maintenance"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.members" id="apidoc.element.consul.Agent.prototype.members">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">members = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.members',
    path: '/agent/members',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [members](#agent-members)
* [self](#agent-self)
* [maintenance](#agent-maintenance)
* [join](#agent-join)
* [forceLeave](#agent-force-leave)

&lt;a name="agent-members"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">members</span>([options], callback)

Returns the members as seen by the consul agent.

Options

* wan (Boolean, default: false): return WAN members instead of LAN members
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.self" id="apidoc.element.consul.Agent.prototype.self">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">self = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.self',
    path: '/agent/self',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    "DelegateMax": 4,
    "DelegateCur": 4
  }
]
```

&lt;a name="agent-self"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">self</span>(callback)

Returns the agent node configuration.

Usage

``` javascript
consul.agent.self(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.services" id="apidoc.element.consul.Agent.prototype.services">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.checks" id="apidoc.module.consul.Agent.prototype.checks">module consul.Agent.prototype.checks</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.checks.checks" id="apidoc.element.consul.Agent.prototype.checks.checks">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>checks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function () {
  this.check.list.apply(this.check, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-checks"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.forceLeave" id="apidoc.module.consul.Agent.prototype.forceLeave">module consul.Agent.prototype.forceLeave</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.forceLeave.forceLeave" id="apidoc.element.consul.Agent.prototype.forceLeave.forceLeave">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>forceLeave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">forceLeave = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.forceLeave',
    path: '/agent/force-leave/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.join('127.0.0.2', function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-force-leave"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">forceLeave</span>(options, callback)

Force remove node.

Options

* node (String): node name to remove
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.join" id="apidoc.module.consul.Agent.prototype.join">module consul.Agent.prototype.join</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.join.join" id="apidoc.element.consul.Agent.prototype.join.join">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>join
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { address: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.join',
    path: '/agent/join/{address}',
    params: { address: opts.address },
  };

  if (!opts.address) {
    return callback(this.consul._err(errors.Validation('address required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.agent.maintenance(true, function(err) {
 if (err) throw err;
});
```

&lt;a name="agent-join"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">join</span>(options, callback)

Trigger agent to join a node.

Options

* address (String): node IP address to join
* wan (Boolean, default false): attempt to join using the WAN pool
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.maintenance" id="apidoc.module.consul.Agent.prototype.maintenance">module consul.Agent.prototype.maintenance</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.maintenance.maintenance" id="apidoc.element.consul.Agent.prototype.maintenance.maintenance">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>maintenance
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">maintenance = function (opts, callback) {
  if (typeof opts === 'boolean') {
    opts = { enable: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.maintenance',
    path: '/agent/maintenance',
    query: { enable: opts.enable },
  };

  if (typeof opts.enable !== 'boolean') {
    return callback(this.consul._err(errors.Validation('enable required'), req));
  }
  if (opts.reason) req.query.reason = opts.reason;

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "DelegateMax": 4,
   "DelegateCur": 4
 }
}
```

&lt;a name="agent-maintenance"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">maintenance</span>(options, callback)

Set node maintenance mode.

Options

* enable (Boolean): maintenance mode enabled
* reason (String, optional): human readable reason for maintenance
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.members" id="apidoc.module.consul.Agent.prototype.members">module consul.Agent.prototype.members</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.members.members" id="apidoc.element.consul.Agent.prototype.members.members">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>members
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">members = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.members',
    path: '/agent/members',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [members](#agent-members)
* [self](#agent-self)
* [maintenance](#agent-maintenance)
* [join](#agent-join)
* [forceLeave](#agent-force-leave)

&lt;a name="agent-members"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">members</span>([options], callback)

Returns the members as seen by the consul agent.

Options

* wan (Boolean, default: false): return WAN members instead of LAN members
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.self" id="apidoc.module.consul.Agent.prototype.self">module consul.Agent.prototype.self</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.self.self" id="apidoc.element.consul.Agent.prototype.self.self">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>self
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">self = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'agent.self',
    path: '/agent/self',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    "DelegateMax": 4,
    "DelegateCur": 4
  }
]
```

&lt;a name="agent-self"&gt;&lt;/a&gt;
### consul.agent.<span class="apidocCodeKeywordSpan">self</span>(callback)

Returns the agent node configuration.

Usage

``` javascript
consul.agent.self(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Agent.prototype.services" id="apidoc.module.consul.Agent.prototype.services">module consul.Agent.prototype.services</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Agent.prototype.services.services" id="apidoc.element.consul.Agent.prototype.services.services">
        function <span class="apidocSignatureSpan">consul.Agent.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog" id="apidoc.module.consul.Catalog">module consul.Catalog</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Catalog" id="apidoc.element.consul.Catalog.Catalog">
        function <span class="apidocSignatureSpan">consul.</span>Catalog
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.Node(consul);
  this.service = new Catalog.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.<span class="apidocCodeKeywordSpan">Catalog</span>(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node" id="apidoc.element.consul.Catalog.Node">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Catalog` client.
 */

function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.<span class="apidocCodeKeywordSpan">Node</span>(consul);
  this.service = new Catalog.Service(consul);
}

Catalog.Node = CatalogNode;
Catalog.Service = CatalogService;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service" id="apidoc.element.consul.Catalog.Service">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node" id="apidoc.module.consul.Catalog.Node">module consul.Catalog.Node</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.Node" id="apidoc.element.consul.Catalog.Node.Node">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Node
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogNode(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Initialize a new `Catalog` client.
 */

function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.<span class="apidocCodeKeywordSpan">Node</span>(consul);
  this.service = new Catalog.Service(consul);
}

Catalog.Node = CatalogNode;
Catalog.Service = CatalogService;

/**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node.prototype" id="apidoc.module.consul.Catalog.Node.prototype">module consul.Catalog.Node.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.list" id="apidoc.element.consul.Catalog.Node.prototype.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.list',
    path: '/catalog/nodes',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.services" id="apidoc.element.consul.Catalog.Node.prototype.services">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.services',
    path: '/catalog/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node.prototype.list" id="apidoc.module.consul.Catalog.Node.prototype.list">module consul.Catalog.Node.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.list.list" id="apidoc.element.consul.Catalog.Node.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.list',
    path: '/catalog/nodes',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Node.prototype.services" id="apidoc.module.consul.Catalog.Node.prototype.services">module consul.Catalog.Node.prototype.services</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Node.prototype.services.services" id="apidoc.element.consul.Catalog.Node.prototype.services.services">
        function <span class="apidocSignatureSpan">consul.Catalog.Node.prototype.</span>services
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.node.services',
    path: '/catalog/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service" id="apidoc.module.consul.Catalog.Service">module consul.Catalog.Service</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.Service" id="apidoc.element.consul.Catalog.Service.Service">
        function <span class="apidocSignatureSpan">consul.Catalog.</span>Service
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CatalogService(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Initialize a new `Agent` client.
*/

function Agent(consul) {
 this.consul = consul;
 this.check = new Agent.Check(consul);
 this.service = new Agent.<span class="apidocCodeKeywordSpan">Service</span>(consul);
}

Agent.Check = AgentCheck;
Agent.Service = AgentService;

/**
* Returns the checks the local agent is managing
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service.prototype" id="apidoc.module.consul.Catalog.Service.prototype">module consul.Catalog.Service.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.list" id="apidoc.element.consul.Catalog.Service.prototype.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.list',
    path: '/catalog/services',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.nodes" id="apidoc.element.consul.Catalog.Service.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.nodes',
    path: '/catalog/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "dev",
   "web"
 ]
}
```

&lt;a name="catalog-service-nodes"&gt;&lt;/a&gt;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service.prototype.list" id="apidoc.module.consul.Catalog.Service.prototype.list">module consul.Catalog.Service.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.list.list" id="apidoc.element.consul.Catalog.Service.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  } else if (typeof opts === 'string') {
    opts = { dc: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.list',
    path: '/catalog/services',
    query: {},
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.Service.prototype.nodes" id="apidoc.module.consul.Catalog.Service.prototype.nodes">module consul.Catalog.Service.prototype.nodes</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.Service.prototype.nodes.nodes" id="apidoc.element.consul.Catalog.Service.prototype.nodes.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.Service.prototype.</span>nodes
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.service.nodes',
    path: '/catalog/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "dev",
   "web"
 ]
}
```

&lt;a name="catalog-service-nodes"&gt;&lt;/a&gt;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.prototype" id="apidoc.module.consul.Catalog.prototype">module consul.Catalog.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.datacenters" id="apidoc.element.consul.Catalog.prototype.datacenters">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">datacenters = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.datacenters',
    path: '/catalog/datacenters',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### consul.catalog

 * [node](#catalog-node)
 * [service](#catalog-service)
 * [datacenters](#catalog-datacenters)

&lt;a name="catalog-datacenters"&gt;&lt;/a&gt;
### consul.catalog.<span class="apidocCodeKeywordSpan">datacenters</span>(callback)

Lists known datacenters.

Usage

``` javascript
consul.catalog.datacenters(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.nodes" id="apidoc.element.consul.Catalog.prototype.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function () {
  this.node.list.apply(this.node, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "dev",
   "web"
 ]
}
```

&lt;a name="catalog-service-nodes"&gt;&lt;/a&gt;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.services" id="apidoc.element.consul.Catalog.prototype.services">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.prototype.datacenters" id="apidoc.module.consul.Catalog.prototype.datacenters">module consul.Catalog.prototype.datacenters</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.datacenters.datacenters" id="apidoc.element.consul.Catalog.prototype.datacenters.datacenters">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>datacenters
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">datacenters = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'catalog.datacenters',
    path: '/catalog/datacenters',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
### consul.catalog

 * [node](#catalog-node)
 * [service](#catalog-service)
 * [datacenters](#catalog-datacenters)

&lt;a name="catalog-datacenters"&gt;&lt;/a&gt;
### consul.catalog.<span class="apidocCodeKeywordSpan">datacenters</span>(callback)

Lists known datacenters.

Usage

``` javascript
consul.catalog.datacenters(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.prototype.nodes" id="apidoc.module.consul.Catalog.prototype.nodes">module consul.Catalog.prototype.nodes</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.nodes.nodes" id="apidoc.element.consul.Catalog.prototype.nodes.nodes">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>nodes
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nodes = function () {
  this.node.list.apply(this.node, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "dev",
   "web"
 ]
}
```

&lt;a name="catalog-service-nodes"&gt;&lt;/a&gt;
### consul.catalog.service.<span class="apidocCodeKeywordSpan">nodes</span>(options, callback)

Lists the nodes in a given service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Catalog.prototype.services" id="apidoc.module.consul.Catalog.prototype.services">module consul.Catalog.prototype.services</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Catalog.prototype.services.services" id="apidoc.element.consul.Catalog.prototype.services.services">
        function <span class="apidocSignatureSpan">consul.Catalog.prototype.</span>services
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">services = function () {
  this.service.list.apply(this.service, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "Node": "node1",
   "Address": "127.0.0.1"
 }
]
```

&lt;a name="catalog-node-services"&gt;&lt;/a&gt;
### consul.catalog.node.<span class="apidocCodeKeywordSpan">services</span>(options, callback)

Lists the services provided by a node.

Options

* node (String): node ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event" id="apidoc.module.consul.Event">module consul.Event</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.Event" id="apidoc.element.consul.Event.Event">
        function <span class="apidocSignatureSpan">consul.</span>Event
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Event(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.<span class="apidocCodeKeywordSpan">Event</span>(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event.prototype" id="apidoc.module.consul.Event.prototype">module consul.Event.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.prototype.fire" id="apidoc.element.consul.Event.prototype.fire">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fire = function (opts, callback) {
  if (arguments.length === 3) {
    opts = {
      name: arguments[0],
      payload: arguments[1],
    };
    callback = arguments[2];
  } else if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.fire',
    path: '/event/fire/{name}',
    params: { name: opts.name },
    query: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  var buffer;

  if (opts.hasOwnProperty('payload')) {
    buffer = Buffer.isBuffer(opts.payload);
    req.body = buffer ? opts.payload : new Buffer(opts.payload);
  }
  if (opts.node) req.query.node = opts.node;
  if (opts.service) req.query.service = opts.service;
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._put(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    if (data.hasOwnProperty('Payload')) {
      data.Payload = utils.decode(data.Payload, { buffer: buffer });
    }

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&lt;a name="event"&gt;&lt;/a&gt;
### consul.event

* [fire](#event-fire)
* [list](#event-list)

&lt;a name="event-fire"&gt;&lt;/a&gt;
### consul.event.<span class="apidocCodeKeywordSpan">fire</span>(options, callback)

Fires a new user event.

Options

* name (String): event name
* payload (String|Buffer): payload
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Event.prototype.list" id="apidoc.element.consul.Event.prototype.list">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  } else if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.list',
    path: '/event/list',
    query: {},
  };

  if (opts.name) req.query.name = opts.name;

  utils.options(req, opts);

  this.consul._get(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    data.forEach(function(item) {
      if (!item.hasOwnProperty('Payload')) return;
      item.Payload = utils.decode(item.Payload, opts);
    });

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event.prototype.fire" id="apidoc.module.consul.Event.prototype.fire">module consul.Event.prototype.fire</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.prototype.fire.fire" id="apidoc.element.consul.Event.prototype.fire.fire">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>fire
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fire = function (opts, callback) {
  if (arguments.length === 3) {
    opts = {
      name: arguments[0],
      payload: arguments[1],
    };
    callback = arguments[2];
  } else if (typeof opts === 'string') {
    opts = { name: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.fire',
    path: '/event/fire/{name}',
    params: { name: opts.name },
    query: {},
  };

  if (!opts.name) {
    return callback(this.consul._err(errors.Validation('name required'), req));
  }

  var buffer;

  if (opts.hasOwnProperty('payload')) {
    buffer = Buffer.isBuffer(opts.payload);
    req.body = buffer ? opts.payload : new Buffer(opts.payload);
  }
  if (opts.node) req.query.node = opts.node;
  if (opts.service) req.query.service = opts.service;
  if (opts.tag) req.query.tag = opts.tag;

  utils.options(req, opts);

  this.consul._put(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    if (data.hasOwnProperty('Payload')) {
      data.Payload = utils.decode(data.Payload, { buffer: buffer });
    }

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&lt;a name="event"&gt;&lt;/a&gt;
### consul.event

* [fire](#event-fire)
* [list](#event-list)

&lt;a name="event-fire"&gt;&lt;/a&gt;
### consul.event.<span class="apidocCodeKeywordSpan">fire</span>(options, callback)

Fires a new user event.

Options

* name (String): event name
* payload (String|Buffer): payload
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Event.prototype.list" id="apidoc.module.consul.Event.prototype.list">module consul.Event.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Event.prototype.list.list" id="apidoc.element.consul.Event.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Event.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { name: opts };
  } else if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'event.list',
    path: '/event/list',
    query: {},
  };

  if (opts.name) req.query.name = opts.name;

  utils.options(req, opts);

  this.consul._get(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    data.forEach(function(item) {
      if (!item.hasOwnProperty('Payload')) return;
      item.Payload = utils.decode(item.Payload, opts);
    });

    callback(null, data, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health" id="apidoc.module.consul.Health">module consul.Health</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.Health" id="apidoc.element.consul.Health.Health">
        function <span class="apidocSignatureSpan">consul.</span>Health
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Health(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.<span class="apidocCodeKeywordSpan">Health</span>(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype" id="apidoc.module.consul.Health.prototype">module consul.Health.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.checks" id="apidoc.element.consul.Health.prototype.checks">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.checks',
    path: '/health/checks/{service}',
    params: { service: opts.service },
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-checks"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.node" id="apidoc.element.consul.Health.prototype.node">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.node',
    path: '/health/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&lt;a name="health-node"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.service" id="apidoc.element.consul.Health.prototype.service">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">service = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.service',
    path: '/health/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  if (opts.tag) req.query.tag = opts.tag;
  if (opts.passing) req.query.passing = 'true';

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-service"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">service</span>(options, callback)

Returns the nodes and health info of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Health.prototype.state" id="apidoc.element.consul.Health.prototype.state">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">state = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { state: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.state',
    path: '/health/state/{state}',
    params: { state: opts.state },
  };

  if (!opts.state) {
    return callback(this.consul._err(errors.Validation('state required'), req));
  }

  if (opts.state !== 'any' &amp;&amp; constants.CHECK_STATE.indexOf(opts.state) &lt; 0) {
    return callback(this.consul._err(errors.Validation('state invalid: ' + opts.state), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     }
   ]
 }
]
```

&lt;a name="health-state"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">state</span>(options, callback)

Returns the checks in a given state.

Options

* state (String, enum: any, passing, warning, critical): state
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype.checks" id="apidoc.module.consul.Health.prototype.checks">module consul.Health.prototype.checks</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.checks.checks" id="apidoc.element.consul.Health.prototype.checks.checks">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>checks
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checks = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.checks',
    path: '/health/checks/{service}',
    params: { service: opts.service },
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-checks"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">checks</span>(options, callback)

Returns the checks of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype.node" id="apidoc.module.consul.Health.prototype.node">module consul.Health.prototype.node</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.node.node" id="apidoc.element.consul.Health.prototype.node.node">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.node',
    path: '/health/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&lt;a name="health-node"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype.service" id="apidoc.module.consul.Health.prototype.service">module consul.Health.prototype.service</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.service.service" id="apidoc.element.consul.Health.prototype.service.service">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>service
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">service = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.service',
    path: '/health/service/{service}',
    params: { service: opts.service },
    query: {},
  };

  if (!opts.service) {
    return callback(this.consul._err(errors.Validation('service required'), req));
  }

  if (opts.tag) req.query.tag = opts.tag;
  if (opts.passing) req.query.passing = 'true';

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   "ServiceID": "example",
   "ServiceName": "example"
 }
]
```

&lt;a name="health-service"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">service</span>(options, callback)

Returns the nodes and health info of a service.

Options

* service (String): service name
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Health.prototype.state" id="apidoc.module.consul.Health.prototype.state">module consul.Health.prototype.state</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Health.prototype.state.state" id="apidoc.element.consul.Health.prototype.state.state">
        function <span class="apidocSignatureSpan">consul.Health.prototype.</span>state
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">state = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { state: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'health.state',
    path: '/health/state/{state}',
    params: { state: opts.state },
  };

  if (!opts.state) {
    return callback(this.consul._err(errors.Validation('state required'), req));
  }

  if (opts.state !== 'any' &amp;&amp; constants.CHECK_STATE.indexOf(opts.state) &lt; 0) {
    return callback(this.consul._err(errors.Validation('state invalid: ' + opts.state), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     }
   ]
 }
]
```

&lt;a name="health-state"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">state</span>(options, callback)

Returns the checks in a given state.

Options

* state (String, enum: any, passing, warning, critical): state
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv" id="apidoc.module.consul.Kv">module consul.Kv</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.Kv" id="apidoc.element.consul.Kv.Kv">
        function <span class="apidocSignatureSpan">consul.</span>Kv
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Kv(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.<span class="apidocCodeKeywordSpan">Kv</span>(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype" id="apidoc.module.consul.Kv.prototype">module consul.Kv.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.del" id="apidoc.element.consul.Kv.prototype.del">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.del',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
true
```

&lt;a name="kv-del"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">del</span>(options, callback)

Delete key/value (kv) pair(s).

Options

* key (String): key
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.delete" id="apidoc.element.consul.Kv.prototype.delete">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>delete
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.del',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.get" id="apidoc.element.consul.Kv.prototype.get">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.get',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';
  if (opts.raw) {
    req.query.raw = 'true';
    req.buffer = true;
  }

  utils.options(req, opts);

  this.consul._get(req, function(err, res) {
    if (res &amp;&amp; res.statusCode === 404) return callback(undefined, undefined, res);
    if (err) return callback(err, undefined, res);
    if (opts.raw) return callback(null, res.body, res);

    if (res.body &amp;&amp; Array.isArray(res.body) &amp;&amp; res.body.length) {
      res.body.forEach(function(item) {
        if (!item.hasOwnProperty('Value')) return;
        item.Value = utils.decode(item.Value, opts);
      });
    } else {
      return callback(undefined, undefined, res);
    }

    if (!opts.recurse) return callback(null, res.body[0], res);

    callback(null, res.body, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.keys" id="apidoc.element.consul.Kv.prototype.keys">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keys = function (opts, callback) {
  switch (typeof opts) {
    case 'string':
      opts = { key: opts };
      break;
    case 'function':
      callback = opts;
      opts = {};
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.keys',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: { keys: true },
  };

  if (opts.separator) req.query.separator = opts.separator;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 "Key": "hello",
 "Flags": 0,
 "Value": "world"
}
```

&lt;a name="kv-keys"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">keys</span>(options, callback)

Return keys for a given prefix.

Options

* key (String): path prefix
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.set" id="apidoc.element.consul.Kv.prototype.set">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (opts, callback) {
  switch (arguments.length) {
    case 4:
      // set(key, value, opts, callback)
      opts = arguments[2];
      opts.key = arguments[0];
      opts.value = arguments[1];
      callback = arguments[3];
      break;
    case 3:
      // set(key, value, callback)
      opts = {
        key: arguments[0],
        value: arguments[1],
      };
      callback = arguments[2];
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.set',
    path: '/kv/{key}',
    params: { key: opts.key },
    query: {},
    type: 'text',
    body: opts.value || '',
  };

  if (!opts.key) {
    return callback(this.consul._err(errors.Validation('key required'), req));
  }
  if (!opts.hasOwnProperty('value')) {
    return callback(this.consul._err(errors.Validation('value required'), req));
  }

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;
  if (opts.hasOwnProperty('flags')) req.query.flags = opts.flags;
  if (opts.hasOwnProperty('acquire')) req.query.acquire = opts.acquire;
  if (opts.hasOwnProperty('release')) req.query.release = opts.release;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[
 "a/b",
 "a/c"
]
```

&lt;a name="kv-set"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">set</span>(options, callback)

Set key/value (kv) pair.

Options

* key (String): key
* value (String|Buffer): value
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype.del" id="apidoc.module.consul.Kv.prototype.del">module consul.Kv.prototype.del</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.del.del" id="apidoc.element.consul.Kv.prototype.del.del">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>del
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.del',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
true
```

&lt;a name="kv-del"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">del</span>(options, callback)

Delete key/value (kv) pair(s).

Options

* key (String): key
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype.get" id="apidoc.module.consul.Kv.prototype.get">module consul.Kv.prototype.get</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.get.get" id="apidoc.element.consul.Kv.prototype.get.get">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { key: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.get',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: {},
  };

  if (opts.recurse) req.query.recurse = 'true';
  if (opts.raw) {
    req.query.raw = 'true';
    req.buffer = true;
  }

  utils.options(req, opts);

  this.consul._get(req, function(err, res) {
    if (res &amp;&amp; res.statusCode === 404) return callback(undefined, undefined, res);
    if (err) return callback(err, undefined, res);
    if (opts.raw) return callback(null, res.body, res);

    if (res.body &amp;&amp; Array.isArray(res.body) &amp;&amp; res.body.length) {
      res.body.forEach(function(item) {
        if (!item.hasOwnProperty('Value')) return;
        item.Value = utils.decode(item.Value, opts);
      });
    } else {
      return callback(undefined, undefined, res);
    }

    if (!opts.recurse) return callback(null, res.body[0], res);

    callback(null, res.body, res);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype.keys" id="apidoc.module.consul.Kv.prototype.keys">module consul.Kv.prototype.keys</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.keys.keys" id="apidoc.element.consul.Kv.prototype.keys.keys">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>keys
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keys = function (opts, callback) {
  switch (typeof opts) {
    case 'string':
      opts = { key: opts };
      break;
    case 'function':
      callback = opts;
      opts = {};
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.keys',
    path: '/kv/{key}',
    params: { key: (opts.key || '') },
    query: { keys: true },
  };

  if (opts.separator) req.query.separator = opts.separator;

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 "Key": "hello",
 "Flags": 0,
 "Value": "world"
}
```

&lt;a name="kv-keys"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">keys</span>(options, callback)

Return keys for a given prefix.

Options

* key (String): path prefix
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Kv.prototype.set" id="apidoc.module.consul.Kv.prototype.set">module consul.Kv.prototype.set</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Kv.prototype.set.set" id="apidoc.element.consul.Kv.prototype.set.set">
        function <span class="apidocSignatureSpan">consul.Kv.prototype.</span>set
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (opts, callback) {
  switch (arguments.length) {
    case 4:
      // set(key, value, opts, callback)
      opts = arguments[2];
      opts.key = arguments[0];
      opts.value = arguments[1];
      callback = arguments[3];
      break;
    case 3:
      // set(key, value, callback)
      opts = {
        key: arguments[0],
        value: arguments[1],
      };
      callback = arguments[2];
      break;
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'kv.set',
    path: '/kv/{key}',
    params: { key: opts.key },
    query: {},
    type: 'text',
    body: opts.value || '',
  };

  if (!opts.key) {
    return callback(this.consul._err(errors.Validation('key required'), req));
  }
  if (!opts.hasOwnProperty('value')) {
    return callback(this.consul._err(errors.Validation('value required'), req));
  }

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;
  if (opts.hasOwnProperty('flags')) req.query.flags = opts.flags;
  if (opts.hasOwnProperty('acquire')) req.query.acquire = opts.acquire;
  if (opts.hasOwnProperty('release')) req.query.release = opts.release;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
[
 "a/b",
 "a/c"
]
```

&lt;a name="kv-set"&gt;&lt;/a&gt;
### consul.kv.<span class="apidocCodeKeywordSpan">set</span>(options, callback)

Set key/value (kv) pair.

Options

* key (String): key
* value (String|Buffer): value
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock" id="apidoc.module.consul.Lock">module consul.Lock</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.Lock" id="apidoc.element.consul.Lock.Lock">
        function <span class="apidocSignatureSpan">consul.</span>Lock
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Lock(consul, opts) {
  events.EventEmitter.call(this);

  opts = utils.normalizeKeys(opts);

  this.consul = consul;
  this._opts = opts;

  if (opts.session) {
    switch (typeof opts.session) {
      case 'string':
        opts.session = { id: opts.session };
        break;
      case 'object':
        opts.session = utils.normalizeKeys(opts.session);
        break;
      default:
        throw errors.Validation('session must be an object or string');
    }
  } else {
    opts.session = {};
  }

  if (!opts.key) {
    throw errors.Validation('key required');
  } else if (typeof opts.key !== 'string') {
    throw errors.Validation('key must be a string');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Lock helper.
 */

Consul.meta.lock = { type: 'eventemitter' };

Consul.prototype.lock = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Lock</span>(this, opts);
};

/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.super_" id="apidoc.element.consul.Lock.super_">
        function <span class="apidocSignatureSpan">consul.Lock.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype" id="apidoc.module.consul.Lock.prototype">module consul.Lock.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._acquire" id="apidoc.element.consul.Lock.prototype._acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_acquire = function (ctx) {
  var self = this;

  var opts = utils.defaults({
    key: ctx.key,
    acquire: ctx.session.id,
    ctx: ctx,
    value: ctx.value,
    flags: LOCK_FLAG_VALUE,
  }, self.consul._defaults);

  self.consul.kv.set(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data !== true) {
      ctx.state = 'wait';

      return utils.setTimeoutContext(function() { self._run(ctx); }, ctx,
        ctx.lockRetryTime);
    }

    ctx.held = true;
    self.emit('acquire');

    ctx.state = 'monitor';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  switch (ctx.state) {
    case 'session':
      return this._session(ctx);
    case 'wait':
      return this._wait(ctx);
    case 'acquire':
      return this.<span class="apidocCodeKeywordSpan">_acquire</span>(ctx);
    case 'monitor':
      return this._monitor(ctx);
    default:
      throw new Error('invalid state: ' + ctx.state);
  }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._end" id="apidoc.element.consul.Lock.prototype._end">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
        <span class="apidocSignatureSpan">(ctx, err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_end = function (ctx, err, res) {
  var self = this;

  if (ctx.end) return;
  ctx.end = true;

  delete self._ctx;

  if (err) self._err(err, res);

  if (ctx.monitor) {
    ctx.monitor.removeAllListeners();
    ctx.monitor.end();

    delete ctx.monitor;
  }

  if (ctx.renewSession) {
    clearInterval(ctx.renewSession);

    var opts = utils.defaults({
      id: ctx.session.id,
      timeout: 1000,
    }, self.consul._defaults);

    self.consul.session.destroy(opts, function() {
      // ignore errors
    });

    delete ctx.renewSession;
  }

  // abort any pending requests
  ctx.emit('cancel');

  if (ctx.held) {
    ctx.held = false;
    self.emit('release');
  }

  self.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
if (err) {
  err.message = 'session create: ' + err.message;
  return self.<span class="apidocCodeKeywordSpan">_end</span>(ctx, err, res);
}

ctx.session = {
  id: data.ID,
  ttl: opts.ttl,
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._err" id="apidoc.element.consul.Lock.prototype._err">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  self.emit('error', err, res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._monitor" id="apidoc.element.consul.Lock.prototype._monitor">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_monitor = function (ctx) {
  var self = this;

  var monitor = ctx.monitor = self.consul.watch({
    method: self.consul.kv.get,
    options: utils.defaults({
      key: ctx.key,
      wait: ctx.lockWaitTime,
      timeout: ctx.lockWaitTimeout,
      index: ctx.index,
    }, self.consul._defaults),
  });

  var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

  // monitor updates
  if (ttl) {
    utils.setIntervalContext(function() {
      var time = monitor.updateTime();

      if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
        monitor.end();
      }
    }, ctx, Math.min(1000, ttl));
  }

  monitor.on('change', function(data) {
    if (data) {
      if (data.Session !== ctx.session.id) {
        return monitor.end();
      }
    }
  });

  monitor.on('error', function() {
    // ignore errors
  });

  monitor.on('end', function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   case 'session':
     return this._session(ctx);
   case 'wait':
     return this._wait(ctx);
   case 'acquire':
     return this._acquire(ctx);
   case 'monitor':
     return this.<span class="apidocCodeKeywordSpan">_monitor</span>(ctx);
   default:
     throw new Error('invalid state: ' + ctx.state);
 }
};

/**
* Create lock session
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._release" id="apidoc.element.consul.Lock.prototype._release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_release = function (ctx) {
  var self = this;

  if (ctx.held) {
    var opts = utils.defaults({
      key: ctx.key,
      release: ctx.session.id,
      ctx: ctx,
      value: ctx.value,
      flags: LOCK_FLAG_VALUE,
    }, self.consul._defaults);

    self.consul.kv.set(opts, function(err, data) {
      if (err) return self._end(ctx, err);

      if (data !== true) {
        err = new Error('failed to release lock');
        return self._end(ctx, err);
      }

      self._end(ctx);
    });

    return;
  }

  process.nextTick(function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 var ctx = self._ctx;

 if (!self._ctx) throw errors.Validation('no lock in use');

 delete self._ctx;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_release</span>(ctx);
 });
};

/**
* Error helper
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._run" id="apidoc.element.consul.Lock.prototype._run">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function (ctx) {
  if (ctx.end) return;

  switch (ctx.state) {
    case 'session':
      return this._session(ctx);
    case 'wait':
      return this._wait(ctx);
    case 'acquire':
      return this._acquire(ctx);
    case 'monitor':
      return this._monitor(ctx);
    default:
      throw new Error('invalid state: ' + ctx.state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = 'session';
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._session" id="apidoc.element.consul.Lock.prototype._session">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_session = function (ctx) {
  var self = this;

  if (!ctx.session.id) {
    var opts = utils.defaults({
      name: ctx.session.name || DEFAULT_LOCK_SESSION_NAME,
      ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
      ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
      if (err) {
        err.message = 'session create: ' + err.message;
        return self._end(ctx, err, res);
      }

      ctx.session = {
        id: data.ID,
        ttl: opts.ttl,
      };

      ctx.state = 'wait';

      var renewTimeout = utils.parseDuration(ctx.session.ttl) / 2;

      // renew session
      ctx.renewSession = setInterval(function() {
        var opts = utils.defaults({
          id: ctx.session.id,
          timeout: renewTimeout,
          ctx: ctx,
        }, self.consul._defaults);

        self.consul.session.renew(opts, function(err, data, res) {
          if (err) self._end(ctx, err, res);
        });
      }, renewTimeout);

      return self._run(ctx);
    });

    return;
  }

  ctx.state = 'wait';

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */

Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this.<span class="apidocCodeKeywordSpan">_session</span>(ctx);
  case 'wait':
    return this._wait(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._wait" id="apidoc.element.consul.Lock.prototype._wait">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function (ctx) {
  var self = this;

  var retry = function() {
    utils.setTimeoutContext(function() {
      self._run(ctx);
    }, ctx, ctx.lockRetryTime);
  };

  var opts = utils.defaults({
    key: ctx.key,
    wait: ctx.lockWaitTime,
    timeout: ctx.lockWaitTimeout,
    ctx: ctx,
    index: ctx.index,
  }, self.consul._defaults);

  self.consul.kv.get(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data) {
      // we try to use the same magic number as consul/api in an attempt to be
      // compatible
      if (data.Flags !== +LOCK_FLAG_VALUE) {
        err = errors.Validation('consul: lock: existing key does not match lock use');
        return self._end(ctx, err, res);
      }

      var newIndex = res.headers['x-consul-index'];
      if (utils.hasIndexChanged(newIndex, ctx.index)) ctx.index = newIndex;

      if (data.Session !== ctx.Session) {
        self.emit('retry', { leader: data.Session });
        return retry();
      }
    } else if (res.statusCode !== 404) {
      return self._end(ctx, new Error('consul: lock: error getting key'), res);
    }

    ctx.state = 'acquire';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this._session(ctx);
  case 'wait':
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
    throw new Error('invalid state: ' + ctx.state);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.acquire" id="apidoc.element.consul.Lock.prototype.acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acquire = function () {
  var self = this;

  if (self._ctx) throw new errors.Validation('lock in use');

  var ctx = self._ctx = new events.EventEmitter();

  ctx.key = self._opts.key;
  ctx.session = utils.clone(self._opts.session);
  ctx.index = '0';
  ctx.end = false;
  ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
  ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
  ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
  ctx.state = 'session';
  ctx.value = self._opts.value || null;

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log('lock error:', err);
});

lock.on('end', function(err) {
  console.log('lock released or there was a permanent failure');
});

lock.<span class="apidocCodeKeywordSpan">acquire</span>();
```

Result

```
lock acquired
lock released
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.release" id="apidoc.element.consul.Lock.prototype.release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function () {
  var self = this;

  var ctx = self._ctx;

  if (!self._ctx) throw errors.Validation('no lock in use');

  delete self._ctx;

  process.nextTick(function() {
    self._release(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

``` javascript
var lock = consul.lock({ key: 'test' });

lock.on('acquire', function() {
  console.log('lock acquired');

  lock.<span class="apidocCodeKeywordSpan">release</span>();
});

lock.on('release', function() {
  console.log('lock released');
});

lock.on('error', function() {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._acquire" id="apidoc.module.consul.Lock.prototype._acquire">module consul.Lock.prototype._acquire</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._acquire._acquire" id="apidoc.element.consul.Lock.prototype._acquire._acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_acquire
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_acquire = function (ctx) {
  var self = this;

  var opts = utils.defaults({
    key: ctx.key,
    acquire: ctx.session.id,
    ctx: ctx,
    value: ctx.value,
    flags: LOCK_FLAG_VALUE,
  }, self.consul._defaults);

  self.consul.kv.set(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data !== true) {
      ctx.state = 'wait';

      return utils.setTimeoutContext(function() { self._run(ctx); }, ctx,
        ctx.lockRetryTime);
    }

    ctx.held = true;
    self.emit('acquire');

    ctx.state = 'monitor';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  switch (ctx.state) {
    case 'session':
      return this._session(ctx);
    case 'wait':
      return this._wait(ctx);
    case 'acquire':
      return this.<span class="apidocCodeKeywordSpan">_acquire</span>(ctx);
    case 'monitor':
      return this._monitor(ctx);
    default:
      throw new Error('invalid state: ' + ctx.state);
  }
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._end" id="apidoc.module.consul.Lock.prototype._end">module consul.Lock.prototype._end</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._end._end" id="apidoc.element.consul.Lock.prototype._end._end">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_end
        <span class="apidocSignatureSpan">(ctx, err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_end = function (ctx, err, res) {
  var self = this;

  if (ctx.end) return;
  ctx.end = true;

  delete self._ctx;

  if (err) self._err(err, res);

  if (ctx.monitor) {
    ctx.monitor.removeAllListeners();
    ctx.monitor.end();

    delete ctx.monitor;
  }

  if (ctx.renewSession) {
    clearInterval(ctx.renewSession);

    var opts = utils.defaults({
      id: ctx.session.id,
      timeout: 1000,
    }, self.consul._defaults);

    self.consul.session.destroy(opts, function() {
      // ignore errors
    });

    delete ctx.renewSession;
  }

  // abort any pending requests
  ctx.emit('cancel');

  if (ctx.held) {
    ctx.held = false;
    self.emit('release');
  }

  self.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
if (err) {
  err.message = 'session create: ' + err.message;
  return self.<span class="apidocCodeKeywordSpan">_end</span>(ctx, err, res);
}

ctx.session = {
  id: data.ID,
  ttl: opts.ttl,
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._err" id="apidoc.module.consul.Lock.prototype._err">module consul.Lock.prototype._err</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._err._err" id="apidoc.element.consul.Lock.prototype._err._err">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  self.emit('error', err, res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._monitor" id="apidoc.module.consul.Lock.prototype._monitor">module consul.Lock.prototype._monitor</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._monitor._monitor" id="apidoc.element.consul.Lock.prototype._monitor._monitor">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_monitor
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_monitor = function (ctx) {
  var self = this;

  var monitor = ctx.monitor = self.consul.watch({
    method: self.consul.kv.get,
    options: utils.defaults({
      key: ctx.key,
      wait: ctx.lockWaitTime,
      timeout: ctx.lockWaitTimeout,
      index: ctx.index,
    }, self.consul._defaults),
  });

  var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

  // monitor updates
  if (ttl) {
    utils.setIntervalContext(function() {
      var time = monitor.updateTime();

      if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
        monitor.end();
      }
    }, ctx, Math.min(1000, ttl));
  }

  monitor.on('change', function(data) {
    if (data) {
      if (data.Session !== ctx.session.id) {
        return monitor.end();
      }
    }
  });

  monitor.on('error', function() {
    // ignore errors
  });

  monitor.on('end', function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   case 'session':
     return this._session(ctx);
   case 'wait':
     return this._wait(ctx);
   case 'acquire':
     return this._acquire(ctx);
   case 'monitor':
     return this.<span class="apidocCodeKeywordSpan">_monitor</span>(ctx);
   default:
     throw new Error('invalid state: ' + ctx.state);
 }
};

/**
* Create lock session
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._release" id="apidoc.module.consul.Lock.prototype._release">module consul.Lock.prototype._release</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._release._release" id="apidoc.element.consul.Lock.prototype._release._release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_release
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_release = function (ctx) {
  var self = this;

  if (ctx.held) {
    var opts = utils.defaults({
      key: ctx.key,
      release: ctx.session.id,
      ctx: ctx,
      value: ctx.value,
      flags: LOCK_FLAG_VALUE,
    }, self.consul._defaults);

    self.consul.kv.set(opts, function(err, data) {
      if (err) return self._end(ctx, err);

      if (data !== true) {
        err = new Error('failed to release lock');
        return self._end(ctx, err);
      }

      self._end(ctx);
    });

    return;
  }

  process.nextTick(function() {
    self._end(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 var ctx = self._ctx;

 if (!self._ctx) throw errors.Validation('no lock in use');

 delete self._ctx;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_release</span>(ctx);
 });
};

/**
* Error helper
*/
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._run" id="apidoc.module.consul.Lock.prototype._run">module consul.Lock.prototype._run</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._run._run" id="apidoc.element.consul.Lock.prototype._run._run">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_run
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function (ctx) {
  if (ctx.end) return;

  switch (ctx.state) {
    case 'session':
      return this._session(ctx);
    case 'wait':
      return this._wait(ctx);
    case 'acquire':
      return this._acquire(ctx);
    case 'monitor':
      return this._monitor(ctx);
    default:
      throw new Error('invalid state: ' + ctx.state);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = 'session';
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._session" id="apidoc.module.consul.Lock.prototype._session">module consul.Lock.prototype._session</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._session._session" id="apidoc.element.consul.Lock.prototype._session._session">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_session
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_session = function (ctx) {
  var self = this;

  if (!ctx.session.id) {
    var opts = utils.defaults({
      name: ctx.session.name || DEFAULT_LOCK_SESSION_NAME,
      ttl: ctx.session.ttl || DEFAULT_LOCK_SESSION_TTL,
      ctx: ctx,
    }, ctx.session, self.consul._defaults);

    self.consul.session.create(opts, function(err, data, res) {
      if (err) {
        err.message = 'session create: ' + err.message;
        return self._end(ctx, err, res);
      }

      ctx.session = {
        id: data.ID,
        ttl: opts.ttl,
      };

      ctx.state = 'wait';

      var renewTimeout = utils.parseDuration(ctx.session.ttl) / 2;

      // renew session
      ctx.renewSession = setInterval(function() {
        var opts = utils.defaults({
          id: ctx.session.id,
          timeout: renewTimeout,
          ctx: ctx,
        }, self.consul._defaults);

        self.consul.session.renew(opts, function(err, data, res) {
          if (err) self._end(ctx, err, res);
        });
      }, renewTimeout);

      return self._run(ctx);
    });

    return;
  }

  ctx.state = 'wait';

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */

Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this.<span class="apidocCodeKeywordSpan">_session</span>(ctx);
  case 'wait':
    return this._wait(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype._wait" id="apidoc.module.consul.Lock.prototype._wait">module consul.Lock.prototype._wait</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype._wait._wait" id="apidoc.element.consul.Lock.prototype._wait._wait">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>_wait
        <span class="apidocSignatureSpan">(ctx)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function (ctx) {
  var self = this;

  var retry = function() {
    utils.setTimeoutContext(function() {
      self._run(ctx);
    }, ctx, ctx.lockRetryTime);
  };

  var opts = utils.defaults({
    key: ctx.key,
    wait: ctx.lockWaitTime,
    timeout: ctx.lockWaitTimeout,
    ctx: ctx,
    index: ctx.index,
  }, self.consul._defaults);

  self.consul.kv.get(opts, function(err, data, res) {
    if (err) return self._end(ctx, err, res);

    if (data) {
      // we try to use the same magic number as consul/api in an attempt to be
      // compatible
      if (data.Flags !== +LOCK_FLAG_VALUE) {
        err = errors.Validation('consul: lock: existing key does not match lock use');
        return self._end(ctx, err, res);
      }

      var newIndex = res.headers['x-consul-index'];
      if (utils.hasIndexChanged(newIndex, ctx.index)) ctx.index = newIndex;

      if (data.Session !== ctx.Session) {
        self.emit('retry', { leader: data.Session });
        return retry();
      }
    } else if (res.statusCode !== 404) {
      return self._end(ctx, new Error('consul: lock: error getting key'), res);
    }

    ctx.state = 'acquire';

    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this._session(ctx);
  case 'wait':
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
    throw new Error('invalid state: ' + ctx.state);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype.acquire" id="apidoc.module.consul.Lock.prototype.acquire">module consul.Lock.prototype.acquire</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.acquire.acquire" id="apidoc.element.consul.Lock.prototype.acquire.acquire">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>acquire
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">acquire = function () {
  var self = this;

  if (self._ctx) throw new errors.Validation('lock in use');

  var ctx = self._ctx = new events.EventEmitter();

  ctx.key = self._opts.key;
  ctx.session = utils.clone(self._opts.session);
  ctx.index = '0';
  ctx.end = false;
  ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
  ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
  ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
  ctx.state = 'session';
  ctx.value = self._opts.value || null;

  process.nextTick(function() {
    self._run(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log('lock error:', err);
});

lock.on('end', function(err) {
  console.log('lock released or there was a permanent failure');
});

lock.<span class="apidocCodeKeywordSpan">acquire</span>();
```

Result

```
lock acquired
lock released
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Lock.prototype.release" id="apidoc.module.consul.Lock.prototype.release">module consul.Lock.prototype.release</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Lock.prototype.release.release" id="apidoc.element.consul.Lock.prototype.release.release">
        function <span class="apidocSignatureSpan">consul.Lock.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function () {
  var self = this;

  var ctx = self._ctx;

  if (!self._ctx) throw errors.Validation('no lock in use');

  delete self._ctx;

  process.nextTick(function() {
    self._release(ctx);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

``` javascript
var lock = consul.lock({ key: 'test' });

lock.on('acquire', function() {
  console.log('lock acquired');

  lock.<span class="apidocCodeKeywordSpan">release</span>();
});

lock.on('release', function() {
  console.log('lock released');
});

lock.on('error', function() {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query" id="apidoc.module.consul.Query">module consul.Query</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.Query" id="apidoc.element.consul.Query.Query">
        function <span class="apidocSignatureSpan">consul.</span>Query
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.<span class="apidocCodeKeywordSpan">Query</span>(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype" id="apidoc.module.consul.Query.prototype">module consul.Query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype._params" id="apidoc.element.consul.Query.prototype._params">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
        <span class="apidocSignatureSpan">(req, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_params = function (req, opts) {
  var body = req.body || {};

  if (opts.name) body.Name = opts.name;
  if (opts.session) body.Session = opts.session;
  if (opts.token) {
    body.Token = opts.token;
    delete opts.token;
  }
  if (opts.near) body.Near = opts.near;
  if (opts.template) {
    var template = utils.normalizeKeys(opts.template);
    if (template.type || template.regexp) {
      body.Template = {};
      if (template.type) body.Template.Type = template.type;
      if (template.regexp) body.Template.Regexp = template.regexp;
    }
  }
  if (opts.service) {
    var service = utils.normalizeKeys(opts.service);
    body.Service = {};
    if (service.service) body.Service.Service = service.service;
    if (service.failover) {
      var failover = utils.normalizeKeys(service.failover);
      if (typeof failover.nearestn === 'number' || failover.datacenters) {
        body.Service.Failover = {};
        if (typeof failover.nearestn === 'number') {
          body.Service.Failover.NearestN = failover.nearestn;
        }
        if (failover.datacenters) {
          body.Service.Failover.Datacenters = failover.datacenters;
        }
      }
    }
    if (typeof service.onlypassing === 'boolean') {
      body.Service.OnlyPassing = service.onlypassing;
    }
    if (service.tags) body.Service.Tags = service.tags;
  }
  if (opts.dns) {
    var dns = utils.normalizeKeys(opts.dns);
    if (dns.ttl) body.DNS = { TTL: dns.ttl };
  }

  req.body = body;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  name: 'query.create',
  path: '/query',
  query: {},
  type: 'json',
};

try {
  this.<span class="apidocCodeKeywordSpan">_params</span>(req, opts);
  if (!req.body.Service || !req.body.Service.Service) {
    throw errors.Validation('service required');
  }
} catch (err) {
  return callback(this.consul._err(err, req));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.create" id="apidoc.element.consul.Query.prototype.create">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: { service: opts } };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.create',
    path: '/query',
    query: {},
    type: 'json',
  };

  try {
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._post(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.destroy" id="apidoc.element.consul.Query.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.destroy',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.execute" id="apidoc.element.consul.Query.prototype.execute">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.execute',
    path: '/query/{query}/execute',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.query.destroy('422b14b9-874b-4520-bd2e-e149a42b0066', function(err) {
 if (err) throw err;
});
```

&lt;a name="query-execute"&gt;&lt;/a&gt;
### consul.query.<span class="apidocCodeKeywordSpan">execute</span>(options, callback)

Execute prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.explain" id="apidoc.element.consul.Query.prototype.explain">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">explain = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.explain',
    path: '/query/{query}/explain',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     "Failovers": 2
   }
 ]
}
```

&lt;a name="query-explain"&gt;&lt;/a&gt;
### consul.query.<span class="apidocCodeKeywordSpan">explain</span>(options, callback)

Explain prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.get" id="apidoc.element.consul.Query.prototype.get">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.get',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.list" id="apidoc.element.consul.Query.prototype.list">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.list',
    path: '/query',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Query.prototype.update" id="apidoc.element.consul.Query.prototype.update">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.update',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
    type: 'json',
  };

  try {
    if (!opts.query) throw errors.Validation('query required');
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 "ID": "b1f4c10e-b61b-e1de-de95-218c9fefdd3e"
}
```

&lt;a name="acl-update"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype._params" id="apidoc.module.consul.Query.prototype._params">module consul.Query.prototype._params</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype._params._params" id="apidoc.element.consul.Query.prototype._params._params">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>_params
        <span class="apidocSignatureSpan">(req, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_params = function (req, opts) {
  var body = req.body || {};

  if (opts.name) body.Name = opts.name;
  if (opts.session) body.Session = opts.session;
  if (opts.token) {
    body.Token = opts.token;
    delete opts.token;
  }
  if (opts.near) body.Near = opts.near;
  if (opts.template) {
    var template = utils.normalizeKeys(opts.template);
    if (template.type || template.regexp) {
      body.Template = {};
      if (template.type) body.Template.Type = template.type;
      if (template.regexp) body.Template.Regexp = template.regexp;
    }
  }
  if (opts.service) {
    var service = utils.normalizeKeys(opts.service);
    body.Service = {};
    if (service.service) body.Service.Service = service.service;
    if (service.failover) {
      var failover = utils.normalizeKeys(service.failover);
      if (typeof failover.nearestn === 'number' || failover.datacenters) {
        body.Service.Failover = {};
        if (typeof failover.nearestn === 'number') {
          body.Service.Failover.NearestN = failover.nearestn;
        }
        if (failover.datacenters) {
          body.Service.Failover.Datacenters = failover.datacenters;
        }
      }
    }
    if (typeof service.onlypassing === 'boolean') {
      body.Service.OnlyPassing = service.onlypassing;
    }
    if (service.tags) body.Service.Tags = service.tags;
  }
  if (opts.dns) {
    var dns = utils.normalizeKeys(opts.dns);
    if (dns.ttl) body.DNS = { TTL: dns.ttl };
  }

  req.body = body;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  name: 'query.create',
  path: '/query',
  query: {},
  type: 'json',
};

try {
  this.<span class="apidocCodeKeywordSpan">_params</span>(req, opts);
  if (!req.body.Service || !req.body.Service.Service) {
    throw errors.Validation('service required');
  }
} catch (err) {
  return callback(this.consul._err(err, req));
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.create" id="apidoc.module.consul.Query.prototype.create">module consul.Query.prototype.create</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.create.create" id="apidoc.element.consul.Query.prototype.create.create">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { service: { service: opts } };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.create',
    path: '/query',
    query: {},
    type: 'json',
  };

  try {
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._post(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.destroy" id="apidoc.module.consul.Query.prototype.destroy">module consul.Query.prototype.destroy</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.destroy.destroy" id="apidoc.element.consul.Query.prototype.destroy.destroy">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.destroy',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._delete(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.execute" id="apidoc.module.consul.Query.prototype.execute">module consul.Query.prototype.execute</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.execute.execute" id="apidoc.element.consul.Query.prototype.execute.execute">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>execute
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.execute',
    path: '/query/{query}/execute',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.query.destroy('422b14b9-874b-4520-bd2e-e149a42b0066', function(err) {
 if (err) throw err;
});
```

&lt;a name="query-execute"&gt;&lt;/a&gt;
### consul.query.<span class="apidocCodeKeywordSpan">execute</span>(options, callback)

Execute prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.explain" id="apidoc.module.consul.Query.prototype.explain">module consul.Query.prototype.explain</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.explain.explain" id="apidoc.element.consul.Query.prototype.explain.explain">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>explain
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">explain = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.explain',
    path: '/query/{query}/explain',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
     "Failovers": 2
   }
 ]
}
```

&lt;a name="query-explain"&gt;&lt;/a&gt;
### consul.query.<span class="apidocCodeKeywordSpan">explain</span>(options, callback)

Explain prepared query.

Options

* query (String, required): ID of the query
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.get" id="apidoc.module.consul.Query.prototype.get">module consul.Query.prototype.get</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.get.get" id="apidoc.element.consul.Query.prototype.get.get">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { query: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.get',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
  };

  if (!opts.query) {
    return callback(this.consul._err(errors.Validation('query required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.list" id="apidoc.module.consul.Query.prototype.list">module consul.Query.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.list.list" id="apidoc.element.consul.Query.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.list',
    path: '/query',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Query.prototype.update" id="apidoc.module.consul.Query.prototype.update">module consul.Query.prototype.update</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Query.prototype.update.update" id="apidoc.element.consul.Query.prototype.update.update">
        function <span class="apidocSignatureSpan">consul.Query.prototype.</span>update
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">update = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'query.update',
    path: '/query/{query}',
    params: { query: opts.query },
    query: {},
    type: 'json',
  };

  try {
    if (!opts.query) throw errors.Validation('query required');
    this._params(req, opts);
    if (!req.body.Service || !req.body.Service.Service) {
      throw errors.Validation('service required');
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
 "ID": "b1f4c10e-b61b-e1de-de95-218c9fefdd3e"
}
```

&lt;a name="acl-update"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">update</span>(options, callback)

Update the policy of a token.

Options

* id (String): token ID
* name (String, optional): human readable name for the token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session" id="apidoc.module.consul.Session">module consul.Session</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.Session" id="apidoc.element.consul.Session.Session">
        function <span class="apidocSignatureSpan">consul.</span>Session
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.<span class="apidocCodeKeywordSpan">Session</span>(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype" id="apidoc.module.consul.Session.prototype">module consul.Session.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.create" id="apidoc.element.consul.Session.prototype.create">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.create',
    path: '/session/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.lockdelay) req.body.LockDelay = opts.lockdelay;
  if (opts.name) req.body.Name = opts.name;
  if (opts.node) req.body.Node = opts.node;
  if (opts.checks) req.body.Checks = opts.checks;
  if (opts.behavior) req.body.Behavior = opts.behavior;
  if (opts.ttl) req.body.TTL = opts.ttl;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.destroy" id="apidoc.element.consul.Session.prototype.destroy">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.destroy',
    path: '/session/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.get" id="apidoc.element.consul.Session.prototype.get">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>get
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.info',
    path: '/session/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.destroy('b1f4c10e-b61b-e1de-de95-218c9fefdd3e', function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-get"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">get</span>(options, callback)

Queries the policy of a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.info" id="apidoc.element.consul.Session.prototype.info">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.info',
    path: '/session/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.list" id="apidoc.element.consul.Session.prototype.list">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.list',
    path: '/session/list',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.node" id="apidoc.element.consul.Session.prototype.node">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.node',
    path: '/session/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&lt;a name="health-node"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Session.prototype.renew" id="apidoc.element.consul.Session.prototype.renew">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renew = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.renew',
    path: '/session/renew/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   ],
   "LockDelay": 15000000000
 }
]
```

&lt;a name="session-renew"&gt;&lt;/a&gt;
### consul.session.<span class="apidocCodeKeywordSpan">renew</span>(options, callback)

Renew a given session.

Options

* id (String): session ID
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.create" id="apidoc.module.consul.Session.prototype.create">module consul.Session.prototype.create</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.create.create" id="apidoc.element.consul.Session.prototype.create.create">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>create
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.create',
    path: '/session/create',
    query: {},
    type: 'json',
    body: {},
  };

  if (opts.lockdelay) req.body.LockDelay = opts.lockdelay;
  if (opts.name) req.body.Name = opts.name;
  if (opts.node) req.body.Node = opts.node;
  if (opts.checks) req.body.Checks = opts.checks;
  if (opts.behavior) req.body.Behavior = opts.behavior;
  if (opts.ttl) req.body.TTL = opts.ttl;

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* [update](#acl-update)
* [destroy](#acl-destroy)
* [get](#acl-get)
* [clone](#acl-clone)
* [list](#acl-list)

&lt;a name="acl-create"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">create</span>([options], callback)

Creates a new token with policy.

Options

* name (String, optional): human readable name for the token
* type (String, enum: client, management; default: client): type of token
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.destroy" id="apidoc.module.consul.Session.prototype.destroy">module consul.Session.prototype.destroy</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.destroy.destroy" id="apidoc.element.consul.Session.prototype.destroy.destroy">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>destroy
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.destroy',
    path: '/session/destroy/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.empty, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` javascript
consul.acl.update({ id: '63e1d82e-f718-eb92-3b7d-61f0c71d45b4', name: 'test' }, function(err) {
 if (err) throw err;
});
```

&lt;a name="acl-destroy"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">destroy</span>(options, callback)

Destroys a given token.

Options

* id (String): token ID
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.info" id="apidoc.module.consul.Session.prototype.info">module consul.Session.prototype.info</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.info.info" id="apidoc.element.consul.Session.prototype.info.info">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>info
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.info',
    path: '/session/info/{id}',
    params: { id: opts.id },
    query: {},
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.bodyItem, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.list" id="apidoc.module.consul.Session.prototype.list">module consul.Session.prototype.list</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.list.list" id="apidoc.element.consul.Session.prototype.list.list">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>list
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.list',
    path: '/session/list',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
``` json
{
  "ID": "9fb8b20b-2636-adbb-9b99-d879df3305ec"
}
```

&lt;a name="acl-list"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">list</span>([options], callback)

Lists all the active tokens.

Usage

``` javascript
consul.acl.list(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.node" id="apidoc.module.consul.Session.prototype.node">module consul.Session.prototype.node</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.node.node" id="apidoc.element.consul.Session.prototype.node.node">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>node
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">node = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { node: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.node',
    path: '/session/node/{node}',
    params: { node: opts.node },
  };

  if (!opts.node) {
    return callback(this.consul._err(errors.Validation('node required'), req));
  }

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

* [node](#health-node)
* [checks](#health-checks)
* [service](#health-service)
* [state](#health-state)

&lt;a name="health-node"&gt;&lt;/a&gt;
### consul.health.<span class="apidocCodeKeywordSpan">node</span>(options, callback)

Returns the health info of a node.

Options

* node (String): node
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Session.prototype.renew" id="apidoc.module.consul.Session.prototype.renew">module consul.Session.prototype.renew</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Session.prototype.renew.renew" id="apidoc.element.consul.Session.prototype.renew.renew">
        function <span class="apidocSignatureSpan">consul.Session.prototype.</span>renew
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renew = function (opts, callback) {
  if (typeof opts === 'string') {
    opts = { id: opts };
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'session.renew',
    path: '/session/renew/{id}',
    params: { id: opts.id },
  };

  if (!opts.id) {
    return callback(this.consul._err(errors.Validation('id required'), req));
  }

  utils.options(req, opts);

  this.consul._put(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   ],
   "LockDelay": 15000000000
 }
]
```

&lt;a name="session-renew"&gt;&lt;/a&gt;
### consul.session.<span class="apidocCodeKeywordSpan">renew</span>(options, callback)

Renew a given session.

Options

* id (String): session ID
* dc (String, optional): datacenter (defaults to local for agent)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status" id="apidoc.module.consul.Status">module consul.Status</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.Status" id="apidoc.element.consul.Status.Status">
        function <span class="apidocSignatureSpan">consul.</span>Status
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Status(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.<span class="apidocCodeKeywordSpan">Status</span>(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
      papi.tools.promisify(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status.prototype" id="apidoc.module.consul.Status.prototype">module consul.Status.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.prototype.leader" id="apidoc.element.consul.Status.prototype.leader">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">leader = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.leader',
    path: '/status/leader',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&lt;a name="status"&gt;&lt;/a&gt;
### consul.status

 * [leader](#status-leader)
 * [peers](#status-peers)

&lt;a name="status-leader"&gt;&lt;/a&gt;
### consul.status.<span class="apidocCodeKeywordSpan">leader</span>(callback)

Returns the current Raft leader.

Usage

``` javascript
consul.status.leader(function(err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Status.prototype.peers" id="apidoc.element.consul.Status.prototype.peers">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peers = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.peers',
    path: '/status/peers',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
"127.0.0.1:8300"
```

&lt;a name="status-peers"&gt;&lt;/a&gt;
### consul.status.<span class="apidocCodeKeywordSpan">peers</span>(callback)

Returns the current Raft peer set.

Usage

``` javascript
consul.status.peers(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status.prototype.leader" id="apidoc.module.consul.Status.prototype.leader">module consul.Status.prototype.leader</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.prototype.leader.leader" id="apidoc.element.consul.Status.prototype.leader.leader">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>leader
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">leader = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.leader',
    path: '/status/leader',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
&lt;a name="status"&gt;&lt;/a&gt;
### consul.status

 * [leader](#status-leader)
 * [peers](#status-peers)

&lt;a name="status-leader"&gt;&lt;/a&gt;
### consul.status.<span class="apidocCodeKeywordSpan">leader</span>(callback)

Returns the current Raft leader.

Usage

``` javascript
consul.status.leader(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Status.prototype.peers" id="apidoc.module.consul.Status.prototype.peers">module consul.Status.prototype.peers</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Status.prototype.peers.peers" id="apidoc.element.consul.Status.prototype.peers.peers">
        function <span class="apidocSignatureSpan">consul.Status.prototype.</span>peers
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peers = function (opts, callback) {
  if (!callback) {
    callback = opts;
    opts = {};
  }

  opts = utils.normalizeKeys(opts);
  opts = utils.defaults(opts, this.consul._defaults);

  var req = {
    name: 'status.peers',
    path: '/status/peers',
  };

  utils.options(req, opts);

  this.consul._get(req, utils.body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Result

``` json
"127.0.0.1:8300"
```

&lt;a name="status-peers"&gt;&lt;/a&gt;
### consul.status.<span class="apidocCodeKeywordSpan">peers</span>(callback)

Returns the current Raft peer set.

Usage

``` javascript
consul.status.peers(function(err, result) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch" id="apidoc.module.consul.Watch">module consul.Watch</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.Watch" id="apidoc.element.consul.Watch.Watch">
        function <span class="apidocSignatureSpan">consul.</span>Watch
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watch(consul, opts) {
  var self = this;

  events.EventEmitter.call(self);

  opts = utils.normalizeKeys(opts);

  var options = utils.normalizeKeys(opts.options || {});
  options = utils.defaults(options, consul._defaults);
  options.wait = options.wait || '30s';
  options.index = options.index || '0';

  self._context = { consul: consul };
  self._options = options;
  self._attempts = 0;
  self._method = opts.method;

  if (typeof opts.method !== 'function') {
    throw errors.Validation('method required');
  }

  process.nextTick(function() { self._run(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };

Consul.prototype.watch = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Watch</span>(this, opts);
};

/**
 * Walk methods
 */

Consul.meta.walk = { type: 'sync' };
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.super_" id="apidoc.element.consul.Watch.super_">
        function <span class="apidocSignatureSpan">consul.Watch.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype" id="apidoc.module.consul.Watch.prototype">module consul.Watch.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._err" id="apidoc.element.consul.Watch.prototype._err">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  if (self._end) return;

  self.emit('error', err, res);

  if (res &amp;&amp; res.statusCode === 400) return self.end();

  utils.setTimeoutContext(function() { self._run(); }, self, self._wait());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._run" id="apidoc.element.consul.Watch.prototype._run">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function () {
  var self = this;

  if (self._end) return;

  var opts = utils.clone(self._options);
  opts.ctx = self;

  try {
    self._method.call(self._context, opts, function(err, data, res) {
      if (err) {
        return self._err(err, res);
      }

      self._updateTime = +new Date();

      self._attempts = 0;

      var newIndex = res.headers['x-consul-index'];

      if (utils.hasIndexChanged(newIndex, self._options.index)) {
        self._options.index = newIndex;

        self.emit('change', data, res);
      }

      process.nextTick(function() { self._run(); });
    });
  } catch (err) {
    self._err(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = 'session';
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._wait" id="apidoc.element.consul.Watch.prototype._wait">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function () {
  return Math.min(Math.pow(2, ++this._attempts), 256) * 100;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this._session(ctx);
  case 'wait':
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
    throw new Error('invalid state: ' + ctx.state);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.end" id="apidoc.element.consul.Watch.prototype.end">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if (this._end) return;
  this._end = true;

  this.emit('cancel');
  this.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log('data:', data);
});

watch.on('error', function(err) {
  console.log('error:', err);
});

setTimeout(function() { watch.<span class="apidocCodeKeywordSpan">end</span>(); }, 30 * 1000);
```

&lt;a name="promise-wrapper"&gt;&lt;/a&gt;
### Promise Wrapper

``` javascript
var Bluebird = require('bluebird');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.isRunning" id="apidoc.element.consul.Watch.prototype.isRunning">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRunning = function () {
  return !this._end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.updateTime" id="apidoc.element.consul.Watch.prototype.updateTime">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateTime = function () {
  return this._updateTime;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

// monitor updates
if (ttl) {
  utils.setIntervalContext(function() {
    var time = monitor.<span class="apidocCodeKeywordSpan">updateTime</span>();

    if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
      monitor.end();
    }
  }, ctx, Math.min(1000, ttl));
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype._err" id="apidoc.module.consul.Watch.prototype._err">module consul.Watch.prototype._err</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._err._err" id="apidoc.element.consul.Watch.prototype._err._err">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, res) {
  var self = this;

  if (self._end) return;

  self.emit('error', err, res);

  if (res &amp;&amp; res.statusCode === 400) return self.end();

  utils.setTimeoutContext(function() { self._run(); }, self, self._wait());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype._run" id="apidoc.module.consul.Watch.prototype._run">module consul.Watch.prototype._run</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._run._run" id="apidoc.element.consul.Watch.prototype._run._run">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_run
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_run = function () {
  var self = this;

  if (self._end) return;

  var opts = utils.clone(self._options);
  opts.ctx = self;

  try {
    self._method.call(self._context, opts, function(err, data, res) {
      if (err) {
        return self._err(err, res);
      }

      self._updateTime = +new Date();

      self._attempts = 0;

      var newIndex = res.headers['x-consul-index'];

      if (utils.hasIndexChanged(newIndex, self._options.index)) {
        self._options.index = newIndex;

        self.emit('change', data, res);
      }

      process.nextTick(function() { self._run(); });
    });
  } catch (err) {
    self._err(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
 ctx.lockWaitTimeout = utils.parseDuration(ctx.lockWaitTime) + 1000;
 ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
 ctx.state = 'session';
 ctx.value = self._opts.value || null;

 process.nextTick(function() {
   self.<span class="apidocCodeKeywordSpan">_run</span>(ctx);
 });
};

/**
* Release lock
*/
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype._wait" id="apidoc.module.consul.Watch.prototype._wait">module consul.Watch.prototype._wait</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype._wait._wait" id="apidoc.element.consul.Watch.prototype._wait._wait">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>_wait
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_wait = function () {
  return Math.min(Math.pow(2, ++this._attempts), 256) * 100;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Lock.prototype._run = function(ctx) {
if (ctx.end) return;

switch (ctx.state) {
  case 'session':
    return this._session(ctx);
  case 'wait':
    return this.<span class="apidocCodeKeywordSpan">_wait</span>(ctx);
  case 'acquire':
    return this._acquire(ctx);
  case 'monitor':
    return this._monitor(ctx);
  default:
    throw new Error('invalid state: ' + ctx.state);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype.end" id="apidoc.module.consul.Watch.prototype.end">module consul.Watch.prototype.end</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.end.end" id="apidoc.element.consul.Watch.prototype.end.end">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if (this._end) return;
  this._end = true;

  this.emit('cancel');
  this.emit('end');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  console.log('data:', data);
});

watch.on('error', function(err) {
  console.log('error:', err);
});

setTimeout(function() { watch.<span class="apidocCodeKeywordSpan">end</span>(); }, 30 * 1000);
```

&lt;a name="promise-wrapper"&gt;&lt;/a&gt;
### Promise Wrapper

``` javascript
var Bluebird = require('bluebird');
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype.isRunning" id="apidoc.module.consul.Watch.prototype.isRunning">module consul.Watch.prototype.isRunning</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.isRunning.isRunning" id="apidoc.element.consul.Watch.prototype.isRunning.isRunning">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>isRunning
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRunning = function () {
  return !this._end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.Watch.prototype.updateTime" id="apidoc.module.consul.Watch.prototype.updateTime">module consul.Watch.prototype.updateTime</a></h1>


    <h2>
        <a href="#apidoc.element.consul.Watch.prototype.updateTime.updateTime" id="apidoc.element.consul.Watch.prototype.updateTime.updateTime">
        function <span class="apidocSignatureSpan">consul.Watch.prototype.</span>updateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateTime = function () {
  return this._updateTime;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

// monitor updates
if (ttl) {
  utils.setIntervalContext(function() {
    var time = monitor.<span class="apidocCodeKeywordSpan">updateTime</span>();

    if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
      monitor.end();
    }
  }, ctx, Math.min(1000, ttl));
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.acl" id="apidoc.module.consul.acl">module consul.acl</a></h1>


    <h2>
        <a href="#apidoc.element.consul.acl.Acl" id="apidoc.element.consul.acl.Acl">
        function <span class="apidocSignatureSpan">consul.acl.</span>Acl
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Acl(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.<span class="apidocCodeKeywordSpan">Acl</span>(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.agent" id="apidoc.module.consul.agent">module consul.agent</a></h1>


    <h2>
        <a href="#apidoc.element.consul.agent.Agent" id="apidoc.element.consul.agent.Agent">
        function <span class="apidocSignatureSpan">consul.agent.</span>Agent
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Agent(consul) {
  this.consul = consul;
  this.check = new Agent.Check(consul);
  this.service = new Agent.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (defaults) this._defaults = defaults;
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.<span class="apidocCodeKeywordSpan">Agent</span>(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.catalog" id="apidoc.module.consul.catalog">module consul.catalog</a></h1>


    <h2>
        <a href="#apidoc.element.consul.catalog.Catalog" id="apidoc.element.consul.catalog.Catalog">
        function <span class="apidocSignatureSpan">consul.catalog.</span>Catalog
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Catalog(consul) {
  this.consul = consul;
  this.node = new Catalog.Node(consul);
  this.service = new Catalog.Service(consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.<span class="apidocCodeKeywordSpan">Catalog</span>(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.consul" id="apidoc.module.consul.consul">module consul.consul</a></h1>


    <h2>
        <a href="#apidoc.element.consul.consul.Consul" id="apidoc.element.consul.consul.Consul">
        function <span class="apidocSignatureSpan">consul.consul.</span>Consul
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Consul(opts) {
  if (!(this instanceof Consul)) {
    return new Consul(opts);
  }

  opts = utils.defaults({}, opts);

  if (!opts.baseUrl) {
    opts.baseUrl = (opts.secure ? 'https:' : 'http:') + '//' +
      (opts.host || '127.0.0.1') + ':' +
      (opts.port || '8500') + '/v1';
  }
  opts.name = 'consul';
  opts.type = 'json';

  if (opts.defaults) {
    var rawDefaults = utils.normalizeKeys(opts.defaults);
    var defaults;

    constants.DEFAULT_OPTIONS.forEach(function(key) {
      if (!rawDefaults.hasOwnProperty(key)) return;
      if (!defaults) defaults = {};
      defaults[key] = rawDefaults[key];
    });

    if (defaults) this._defaults = defaults;
  }
  delete opts.defaults;

  papi.Client.call(this, opts);

  this.acl = new Consul.Acl(this);
  this.agent = new Consul.Agent(this);
  this.catalog = new Consul.Catalog(this);
  this.event = new Consul.Event(this);
  this.health = new Consul.Health(this);
  this.kv = new Consul.Kv(this);
  this.query = new Consul.Query(this);
  this.session = new Consul.Session(this);
  this.status = new Consul.Status(this);

  try {
    if (opts.promisify) {
      if (typeof opts.promisify === 'function') {
        papi.tools.promisify(this, opts.promisify);
      } else {
        papi.tools.promisify(this);
      }
    }
  } catch (err) {
    err.message = 'promisify: ' + err.message;
    throw err;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.errors" id="apidoc.module.consul.errors">module consul.errors</a></h1>


    <h2>
        <a href="#apidoc.element.consul.errors.Consul" id="apidoc.element.consul.errors.Consul">
        function <span class="apidocSignatureSpan">consul.errors.</span>Consul
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function create(message) {
  var error = message instanceof Error ?
    message :
    new Error(message ? message : undefined);

  error.isConsul = true;

  return error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.errors.Validation" id="apidoc.element.consul.errors.Validation">
        function <span class="apidocSignatureSpan">consul.errors.</span>Validation
        <span class="apidocSignatureSpan">(message)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function validation(message) {
  var error = create(message);

  error.isValidation = true;

  return error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul._err(errors.<span class="apidocCodeKeywordSpan">Validation</span>('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.event" id="apidoc.module.consul.event">module consul.event</a></h1>


    <h2>
        <a href="#apidoc.element.consul.event.Event" id="apidoc.element.consul.event.Event">
        function <span class="apidocSignatureSpan">consul.event.</span>Event
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Event(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
delete opts.defaults;

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.<span class="apidocCodeKeywordSpan">Event</span>(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.health" id="apidoc.module.consul.health">module consul.health</a></h1>


    <h2>
        <a href="#apidoc.element.consul.health.Health" id="apidoc.element.consul.health.Health">
        function <span class="apidocSignatureSpan">consul.health.</span>Health
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Health(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.<span class="apidocCodeKeywordSpan">Health</span>(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.kv" id="apidoc.module.consul.kv">module consul.kv</a></h1>


    <h2>
        <a href="#apidoc.element.consul.kv.Kv" id="apidoc.element.consul.kv.Kv">
        function <span class="apidocSignatureSpan">consul.kv.</span>Kv
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Kv(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
papi.Client.call(this, opts);

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.<span class="apidocCodeKeywordSpan">Kv</span>(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.lock" id="apidoc.module.consul.lock">module consul.lock</a></h1>


    <h2>
        <a href="#apidoc.element.consul.lock.Lock" id="apidoc.element.consul.lock.Lock">
        function <span class="apidocSignatureSpan">consul.lock.</span>Lock
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Lock(consul, opts) {
  events.EventEmitter.call(this);

  opts = utils.normalizeKeys(opts);

  this.consul = consul;
  this._opts = opts;

  if (opts.session) {
    switch (typeof opts.session) {
      case 'string':
        opts.session = { id: opts.session };
        break;
      case 'object':
        opts.session = utils.normalizeKeys(opts.session);
        break;
      default:
        throw errors.Validation('session must be an object or string');
    }
  } else {
    opts.session = {};
  }

  if (!opts.key) {
    throw errors.Validation('key required');
  } else if (typeof opts.key !== 'string') {
    throw errors.Validation('key must be a string');
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Lock helper.
 */

Consul.meta.lock = { type: 'eventemitter' };

Consul.prototype.lock = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Lock</span>(this, opts);
};

/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.parseQueryMeta" id="apidoc.module.consul.parseQueryMeta">module consul.parseQueryMeta</a></h1>


    <h2>
        <a href="#apidoc.element.consul.parseQueryMeta.parseQueryMeta" id="apidoc.element.consul.parseQueryMeta.parseQueryMeta">
        function <span class="apidocSignatureSpan">consul.</span>parseQueryMeta
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseQueryMeta = function (res) {
  return utils.parseQueryMeta(res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: 'sync' };

Consul.parseQueryMeta = Consul.prototype.parseQueryMeta = function(res) {
  return utils.<span class="apidocCodeKeywordSpan">parseQueryMeta</span>(res);
};

/**
 * Module exports.
 */

exports.Consul = Consul;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.query" id="apidoc.module.consul.query">module consul.query</a></h1>


    <h2>
        <a href="#apidoc.element.consul.query.Query" id="apidoc.element.consul.query.Query">
        function <span class="apidocSignatureSpan">consul.query.</span>Query
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.<span class="apidocCodeKeywordSpan">Query</span>(this);
this.session = new Consul.Session(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.session" id="apidoc.module.consul.session">module consul.session</a></h1>


    <h2>
        <a href="#apidoc.element.consul.session.Session" id="apidoc.element.consul.session.Session">
        function <span class="apidocSignatureSpan">consul.session.</span>Session
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Session(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.acl = new Consul.Acl(this);
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.<span class="apidocCodeKeywordSpan">Session</span>(this);
this.status = new Consul.Status(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.status" id="apidoc.module.consul.status">module consul.status</a></h1>


    <h2>
        <a href="#apidoc.element.consul.status.Status" id="apidoc.element.consul.status.Status">
        function <span class="apidocSignatureSpan">consul.status.</span>Status
        <span class="apidocSignatureSpan">(consul)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Status(consul) {
  this.consul = consul;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.agent = new Consul.Agent(this);
this.catalog = new Consul.Catalog(this);
this.event = new Consul.Event(this);
this.health = new Consul.Health(this);
this.kv = new Consul.Kv(this);
this.query = new Consul.Query(this);
this.session = new Consul.Session(this);
this.status = new Consul.<span class="apidocCodeKeywordSpan">Status</span>(this);

try {
  if (opts.promisify) {
    if (typeof opts.promisify === 'function') {
      papi.tools.promisify(this, opts.promisify);
    } else {
      papi.tools.promisify(this);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_" id="apidoc.module.consul.super_">module consul.super_</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.super_" id="apidoc.element.consul.super_.super_">
        function <span class="apidocSignatureSpan">consul.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype" id="apidoc.module.consul.super_.prototype">module consul.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__create" id="apidoc.element.consul.super_.prototype.__create">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__create = function (request, next) {
  var self = this;

  var opts = request.opts;
  var path = opts.path;

  if (typeof path !== 'string') {
    return next(errors.Validation('path required'));
  }

  var headers = utils.mergeHeaders(self._opts.headers, opts.headers);

  // path
  try {
    path = path.replace(/\{(\w+)\}/g, function(src, dst) {
      if (!opts.params.hasOwnProperty(dst)) {
        throw errors.Validation('missing param: ' + dst);
      }

      var part = opts.params[dst] || '';

      // optionally disable param encoding
      return part.encode === false &amp;&amp; part.toString ?
        part.toString() : encodeURIComponent(part);
    });
  } catch (err) {
    return next(err);
  }

  // query
  if (!utils.isEmpty(opts.query)) {
    try {
      path += '?' + self._encode('application/x-www-form-urlencoded',
                                 opts.query).toString();
    } catch (err) {
      return next(err);
    }
  }

  // body
  if (opts.body !== undefined) {
    var mime = constants.MIME_ALIAS[opts.type] ||
      headers['content-type'] ||
      constants.MIME_ALIAS[self._opts.type];

    var isFunction = typeof opts.body === 'function';

    if (isFunction) {
      try {
        request.body = opts.body();
      } catch (err) {
        return next(err);
      }
    } else {
      request.body = opts.body;
    }

    var isBuffer = Buffer.isBuffer(request.body);
    var isStream = utils.isReadableStream(request.body);

    if (!isBuffer &amp;&amp; !isStream &amp;&amp; !mime) {
      return next(errors.Validation('type required'));
    }

    if (!isBuffer &amp;&amp; !isStream) {
      if (self._opts.encoders[mime]) {
        try {
          request.body = this._encode(mime, request.body);
        } catch (err) {
          return next(err);
        }
      } else {
        return next(errors.Codec('type is unknown: ' + mime));
      }
    }

    if (!headers['content-type'] &amp;&amp; mime) {
      headers['content-type'] = mime + '; charset=' + constants.CHARSET;
    }

    if (isStream) {
      if (!isFunction) request._retryable = false;
    } else {
      headers['content-length'] = request.body.length;
    }
  } else if (!~constants.EXCLUDE_CONTENT_LENGTH.indexOf(opts.method)) {
    headers['content-length'] = 0;
  }

  // response pipe
  if (opts.pipe) {
    var isPipeFunction = typeof opts.pipe === 'function';

    if (isPipeFunction) {
      try {
        request.pipe = opts.pipe();
      } catch (err) {
        return next(err);
      }
    } else {
      request.pipe = opts.pipe;

      request._retryable = false;
    }

    if (!utils.isWritableStream(request.pipe)) {
      return next(errors.Validation('pipe must be a writable stream'));
    }
  }

  // build http.request options
  request.req = utils.merge(
    utils.pick(self._opts, constants.CLIENT_OPTIONS),
    utils.pick(self._opts.baseUrl, 'auth', 'hostname', 'port', 'path'),
    utils.pick(opts, constants.REQUEST_OPTIONS),
    { headers: headers }
  );

  // append request path to baseUrl
  request.req.path += path;

  // pick http transport
  if (self._opts.baseUrl.protocol === 'https:') {
    request.transport = https;
    if (!request.req.port) request.req.port = 443;
  } else {
    request.transport = http;
    if (!request.req.port) request.req.port = 80;
  }

  if (request.req.auth === null) delete request.req.auth;

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__execute" id="apidoc.element.consul.super_.prototype.__execute">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__execute = function (request, next) {
  var self = this;

  if (request.ctx) {
    if (request.ctx.canceled === true) {
      return next(errors.Validation('ctx already canceled'));
    } else if (request.ctx.finished === true) {
      return next(errors.Validation('ctx already finished'));
    }
  }

  var done = false;

  var opts = request.opts;

  var abort;
  var timeoutId;
  var timeout = opts.hasOwnProperty('timeout') ?
    opts.timeout : self._opts.timeout;

  self._log(['papi', 'request'].concat(opts.tags), request.req);

  var req = request.transport.request(request.req);

  var userAgent = req.getHeader('user-agent');

  if (userAgent === undefined) {
    req.setHeader('user-agent', 'papi/' + meta.version);
  } else if (userAgent === null) {
    req.removeHeader('user-agent');
  }

  req.on('error', function(err) {
    self._log(['papi', 'request', 'error'].concat(opts.tags), err);

    if (done) return;
    done = true;

    if (abort) request.ctx.removeListener('cancel', abort);
    if (timeoutId) clearTimeout(timeoutId);

    request.err = err;
    next();
  });

  if (request.ctx) {
    abort = function() {
      req.abort();
      req.emit('error', errors.Abort('request aborted'));
    };

    request.ctx.once('cancel', abort);
  }

  // set request and absolute timeout
  if (timeout &amp;&amp; timeout &gt; 0) {
    timeoutId = setTimeout(function() {
      req.emit('timeout');
      req.abort();
    }, timeout);

    req.setTimeout(timeout);
  }

  req.on('timeout', function(err) {
    self._log(['papi', 'request', 'error', 'timeout'].concat(opts.tags));
    if (err) {
      err = errors.Timeout(err);
    } else {
      err = errors.Timeout('request timed out (' + timeout + 'ms)');
    }
    req.emit('error', err);
  });

  req.on('response', function(res) {
    var chunks = [];
    var bodyLength = 0;

    self._log(['papi', 'response'].concat(opts.tags), {
      method: opts.method,
      path: req.path,
      statusCode: res.statusCode,
      headers: res.headers,
      remoteAddress: res.connection.remoteAddress,
      remotePort: res.connection.remotePort,
    });

    request.res = res;

    if (request.pipe) {
      res.pipe(request.pipe);
    } else {
      res.on('data', function(chunk) {
        chunks.push(chunk);
        bodyLength += chunk.length;
      });
    }

    res.on('end', function() {
      if (done) return;
      done = true;

      if (abort) request.ctx.removeListener('cancel', abort);
      if (timeoutId) clearTimeout(timeoutId);

      // body content mime
      var mime;

      // decode body
      if (bodyLength) {
        res.body = Buffer.concat(chunks, bodyLength);

        // don't decode if user explicitly asks for buffer
        if (!opts.buffer) {
          mime = (res.headers['content-type'] || '').split(';')[0].trim();

          if (self._opts.decoders[mime]) {
            try {
              res.body = self._decode(mime, res.body);
            } catch (err) {
              request.err = err;
              return next();
            }
          }
        }
      }

      // any non-200 is consider an error
      if (Math.floor(res.statusCode / 100) !== 2) {
        var err = errors.Response();

        if (res.body &amp;&amp; mime === 'text/plain' &amp;&amp; res.body.length &lt; 80) {
          err.message = res.body;
        }

        if (!err.message) {
          if (http.STATUS_CODES[res.statusCode]) {
            err.message = http.STATUS_CODES[res.statusCode].toLowerCase();
          } else {
            err.message = 'request failed: ' + res.statusCode;
          }
        }

        err.statusCode = res.statusCode;

        request.err = err;
      }

      next();
    });
  });

  if (utils.isReadableStream(request.body)) {
    request.body.pipe(req);
  } else {
    req.end(request.body);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__push" id="apidoc.element.consul.super_.prototype.__push">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
        <span class="apidocSignatureSpan">(request, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__push = function (request, name) {
  if (this._exts[name]) {
    request._stack.push.apply(request._stack, this._exts[name]);
  }

  if (request.opts &amp;&amp; request.opts.exts &amp;&amp; request.opts.exts[name]) {
    if (Array.isArray(request.opts.exts[name])) {
      request._stack.push.apply(request._stack, request.opts.exts[name]);
    } else {
      request._stack.push(request.opts.exts[name]);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._decode" id="apidoc.element.consul.super_.prototype._decode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_decode = function (mime, value) {
  if (!this._opts.decoders[mime]) {
    throw errors.Codec('unknown decoder: ' + mime);
  }

  try {
    return this._opts.decoders[mime](value);
  } catch (err) {
    err.message = 'decode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._delete" id="apidoc.element.consul.super_.prototype._delete">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_delete = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_delete</span>(req, utils.empty, callback);
};

Kv.meta.delete = { type: 'alias' };

Kv.prototype.delete = Kv.prototype.del;

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._encode" id="apidoc.element.consul.super_.prototype._encode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_encode = function (mime, value) {
  if (!this._opts.encoders[mime]) {
    throw errors.Codec('unknown encoder: ' + mime);
  }

  try {
    return this._opts.encoders[mime](value);
  } catch (err) {
    err.message = 'encode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._err" id="apidoc.element.consul.super_.prototype._err">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, opts) {
  if (!err) return err;

  if (!(err instanceof Error)) err = new Error(err);

  if (opts &amp;&amp; opts.name) {
    err.message = util.format('%s: %s', opts.name, err.message);
  }

  if (this._opts.name) {
    err.message = util.format('%s: %s', this._opts.name, err.message);
  }

  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._ext" id="apidoc.element.consul.super_.prototype._ext">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
        <span class="apidocSignatureSpan">(eventName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ext = function (eventName, callback) {
  if (!eventName || typeof eventName !== 'string') {
    throw this._err(errors.Validation('extension eventName required'));
  }

  if (typeof callback !== 'function') {
    throw this._err(errors.Validation('extension callback required'));
  }

  if (!this._exts[eventName]) this._exts[eventName] = [];

  this._exts[eventName].push(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._get" id="apidoc.element.consul.super_.prototype._get">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_get = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 if (!opts.id) {
   return callback(this.consul._err(errors.Validation('id required'), req));
 }

 utils.options(req, opts);

 this.consul.<span class="apidocCodeKeywordSpan">_get</span>(req, utils.bodyItem, callback);
};

Acl.prototype.get = Acl.prototype.info;

/**
* Creates a new token by cloning an existing token
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._head" id="apidoc.element.consul.super_.prototype._head">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_head = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._log" id="apidoc.element.consul.super_.prototype._log">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
        <span class="apidocSignatureSpan">(tags, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_log = function (tags, data) {
  return this.emit('log', tags, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._options" id="apidoc.element.consul.super_.prototype._options">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_options = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._patch" id="apidoc.element.consul.super_.prototype._patch">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_patch = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._plugin" id="apidoc.element.consul.super_.prototype._plugin">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
        <span class="apidocSignatureSpan">(plugin, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_plugin = function (plugin, options) {
  if (!plugin) {
    throw this._err(errors.Validation('plugin required'));
  }

  if (typeof plugin.register !== 'function') {
    throw this._err(errors.Validation('plugin must have register function'));
  }

  var attributes = plugin.register.attributes;

  if (!attributes) {
    throw this._err(errors.Validation('plugin attributes required'));
  }

  if (!attributes.name) {
    throw this._err(errors.Validation('plugin attributes name required'));
  }

  if (!attributes.version) {
    throw this._err(errors.Validation('plugin attributes version required'));
  }

  return plugin.register(this, options || {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._post" id="apidoc.element.consul.super_.prototype._post">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_post = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_post</span>(req, utils.body, callback);
};

/**
 * Gets a given query
 */

Query.prototype.get = function(opts, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._put" id="apidoc.element.consul.super_.prototype._put">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_put = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_put</span>(req, utils.body, callback);
};

/**
 * Update the policy of a token
 */

Acl.prototype.update = function(opts, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.super_.prototype._request" id="apidoc.element.consul.super_.prototype._request">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_request = function (opts) {
  var self = this;

  var request;

  if (this.__request) {
    request = this.__request;
    opts = request.opts;
    self = request._client;
  } else {
    request = {
      _args: Array.prototype.slice.call(arguments),
      _client: this,
      opts: opts,
      state: {},
    };

    if (!opts) opts = request.opts = {};

    if (request._args.length &gt; 1) {
      request._callback = request._args[request._args.length - 1];
    } else {
      return self.emit('error', self._err(
        errors.Validation('callback required'), opts));
    }

    // if ctx is an event emitter we use it to abort requests when done is
    // emitted
    if (opts.ctx instanceof events.EventEmitter) {
      request.ctx = opts.ctx;
    }

    // combine global and request tags
    opts.tags = (opts.tags || []).concat(self._opts.tags);

    // inject request name into tags if not already defined
    if (opts.name &amp;&amp; !~opts.tags.indexOf(opts.name)) {
      opts.tags.push(opts.name);
    }

    if (!opts.headers) opts.headers = {};
    if (!opts.params) opts.params = {};
    if (!opts.query) opts.query = {};

    // restart request
    request.retry = function() {
      if (request._retryable === false) {
        throw errors.Validation('request is not retryable');
      }

      self._log(['papi', 'request', 'retry'].concat(request.opts.tags));

      delete request.body;
      delete request.err;
      delete request.req;
      delete request.res;
      delete request.transport;

      self._request.call({ __request: request });
    };

    request._stack = [];

    self.__push(request, 'onCreate');

    request._stack.push(self.__create);

    self.__push(request, 'onRequest');

    request._stack.push(self.__execute);

    self.__push(request, 'onResponse');

    request._stack.push.apply(
      request._stack,
      request._args.slice(1, request._args.length - 1)
    );
  }

  var i = 0;
  function next(err) {
    if (err) return request._callback(self._err(err, opts));

    // middlware can call next(false, args...) to stop middleware
    if (err === false) {
      return request._callback.apply(null,
        Array.prototype.slice.call(arguments, 1));
    }

    var fn = request._stack[i++];
    if (fn) {
      fn.call(self, request, next);
    } else {
      request._callback.call(self, self._err(request.err, opts), request.res);
    }
  }

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype.__create" id="apidoc.module.consul.super_.prototype.__create">module consul.super_.prototype.__create</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__create.__create" id="apidoc.element.consul.super_.prototype.__create.__create">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__create
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__create = function (request, next) {
  var self = this;

  var opts = request.opts;
  var path = opts.path;

  if (typeof path !== 'string') {
    return next(errors.Validation('path required'));
  }

  var headers = utils.mergeHeaders(self._opts.headers, opts.headers);

  // path
  try {
    path = path.replace(/\{(\w+)\}/g, function(src, dst) {
      if (!opts.params.hasOwnProperty(dst)) {
        throw errors.Validation('missing param: ' + dst);
      }

      var part = opts.params[dst] || '';

      // optionally disable param encoding
      return part.encode === false &amp;&amp; part.toString ?
        part.toString() : encodeURIComponent(part);
    });
  } catch (err) {
    return next(err);
  }

  // query
  if (!utils.isEmpty(opts.query)) {
    try {
      path += '?' + self._encode('application/x-www-form-urlencoded',
                                 opts.query).toString();
    } catch (err) {
      return next(err);
    }
  }

  // body
  if (opts.body !== undefined) {
    var mime = constants.MIME_ALIAS[opts.type] ||
      headers['content-type'] ||
      constants.MIME_ALIAS[self._opts.type];

    var isFunction = typeof opts.body === 'function';

    if (isFunction) {
      try {
        request.body = opts.body();
      } catch (err) {
        return next(err);
      }
    } else {
      request.body = opts.body;
    }

    var isBuffer = Buffer.isBuffer(request.body);
    var isStream = utils.isReadableStream(request.body);

    if (!isBuffer &amp;&amp; !isStream &amp;&amp; !mime) {
      return next(errors.Validation('type required'));
    }

    if (!isBuffer &amp;&amp; !isStream) {
      if (self._opts.encoders[mime]) {
        try {
          request.body = this._encode(mime, request.body);
        } catch (err) {
          return next(err);
        }
      } else {
        return next(errors.Codec('type is unknown: ' + mime));
      }
    }

    if (!headers['content-type'] &amp;&amp; mime) {
      headers['content-type'] = mime + '; charset=' + constants.CHARSET;
    }

    if (isStream) {
      if (!isFunction) request._retryable = false;
    } else {
      headers['content-length'] = request.body.length;
    }
  } else if (!~constants.EXCLUDE_CONTENT_LENGTH.indexOf(opts.method)) {
    headers['content-length'] = 0;
  }

  // response pipe
  if (opts.pipe) {
    var isPipeFunction = typeof opts.pipe === 'function';

    if (isPipeFunction) {
      try {
        request.pipe = opts.pipe();
      } catch (err) {
        return next(err);
      }
    } else {
      request.pipe = opts.pipe;

      request._retryable = false;
    }

    if (!utils.isWritableStream(request.pipe)) {
      return next(errors.Validation('pipe must be a writable stream'));
    }
  }

  // build http.request options
  request.req = utils.merge(
    utils.pick(self._opts, constants.CLIENT_OPTIONS),
    utils.pick(self._opts.baseUrl, 'auth', 'hostname', 'port', 'path'),
    utils.pick(opts, constants.REQUEST_OPTIONS),
    { headers: headers }
  );

  // append request path to baseUrl
  request.req.path += path;

  // pick http transport
  if (self._opts.baseUrl.protocol === 'https:') {
    request.transport = https;
    if (!request.req.port) request.req.port = 443;
  } else {
    request.transport = http;
    if (!request.req.port) request.req.port = 80;
  }

  if (request.req.auth === null) delete request.req.auth;

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype.__execute" id="apidoc.module.consul.super_.prototype.__execute">module consul.super_.prototype.__execute</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__execute.__execute" id="apidoc.element.consul.super_.prototype.__execute.__execute">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__execute
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__execute = function (request, next) {
  var self = this;

  if (request.ctx) {
    if (request.ctx.canceled === true) {
      return next(errors.Validation('ctx already canceled'));
    } else if (request.ctx.finished === true) {
      return next(errors.Validation('ctx already finished'));
    }
  }

  var done = false;

  var opts = request.opts;

  var abort;
  var timeoutId;
  var timeout = opts.hasOwnProperty('timeout') ?
    opts.timeout : self._opts.timeout;

  self._log(['papi', 'request'].concat(opts.tags), request.req);

  var req = request.transport.request(request.req);

  var userAgent = req.getHeader('user-agent');

  if (userAgent === undefined) {
    req.setHeader('user-agent', 'papi/' + meta.version);
  } else if (userAgent === null) {
    req.removeHeader('user-agent');
  }

  req.on('error', function(err) {
    self._log(['papi', 'request', 'error'].concat(opts.tags), err);

    if (done) return;
    done = true;

    if (abort) request.ctx.removeListener('cancel', abort);
    if (timeoutId) clearTimeout(timeoutId);

    request.err = err;
    next();
  });

  if (request.ctx) {
    abort = function() {
      req.abort();
      req.emit('error', errors.Abort('request aborted'));
    };

    request.ctx.once('cancel', abort);
  }

  // set request and absolute timeout
  if (timeout &amp;&amp; timeout &gt; 0) {
    timeoutId = setTimeout(function() {
      req.emit('timeout');
      req.abort();
    }, timeout);

    req.setTimeout(timeout);
  }

  req.on('timeout', function(err) {
    self._log(['papi', 'request', 'error', 'timeout'].concat(opts.tags));
    if (err) {
      err = errors.Timeout(err);
    } else {
      err = errors.Timeout('request timed out (' + timeout + 'ms)');
    }
    req.emit('error', err);
  });

  req.on('response', function(res) {
    var chunks = [];
    var bodyLength = 0;

    self._log(['papi', 'response'].concat(opts.tags), {
      method: opts.method,
      path: req.path,
      statusCode: res.statusCode,
      headers: res.headers,
      remoteAddress: res.connection.remoteAddress,
      remotePort: res.connection.remotePort,
    });

    request.res = res;

    if (request.pipe) {
      res.pipe(request.pipe);
    } else {
      res.on('data', function(chunk) {
        chunks.push(chunk);
        bodyLength += chunk.length;
      });
    }

    res.on('end', function() {
      if (done) return;
      done = true;

      if (abort) request.ctx.removeListener('cancel', abort);
      if (timeoutId) clearTimeout(timeoutId);

      // body content mime
      var mime;

      // decode body
      if (bodyLength) {
        res.body = Buffer.concat(chunks, bodyLength);

        // don't decode if user explicitly asks for buffer
        if (!opts.buffer) {
          mime = (res.headers['content-type'] || '').split(';')[0].trim();

          if (self._opts.decoders[mime]) {
            try {
              res.body = self._decode(mime, res.body);
            } catch (err) {
              request.err = err;
              return next();
            }
          }
        }
      }

      // any non-200 is consider an error
      if (Math.floor(res.statusCode / 100) !== 2) {
        var err = errors.Response();

        if (res.body &amp;&amp; mime === 'text/plain' &amp;&amp; res.body.length &lt; 80) {
          err.message = res.body;
        }

        if (!err.message) {
          if (http.STATUS_CODES[res.statusCode]) {
            err.message = http.STATUS_CODES[res.statusCode].toLowerCase();
          } else {
            err.message = 'request failed: ' + res.statusCode;
          }
        }

        err.statusCode = res.statusCode;

        request.err = err;
      }

      next();
    });
  });

  if (utils.isReadableStream(request.body)) {
    request.body.pipe(req);
  } else {
    req.end(request.body);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype.__push" id="apidoc.module.consul.super_.prototype.__push">module consul.super_.prototype.__push</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype.__push.__push" id="apidoc.element.consul.super_.prototype.__push.__push">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>__push
        <span class="apidocSignatureSpan">(request, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">__push = function (request, name) {
  if (this._exts[name]) {
    request._stack.push.apply(request._stack, this._exts[name]);
  }

  if (request.opts &amp;&amp; request.opts.exts &amp;&amp; request.opts.exts[name]) {
    if (Array.isArray(request.opts.exts[name])) {
      request._stack.push.apply(request._stack, request.opts.exts[name]);
    } else {
      request._stack.push(request.opts.exts[name]);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._decode" id="apidoc.module.consul.super_.prototype._decode">module consul.super_.prototype._decode</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._decode._decode" id="apidoc.element.consul.super_.prototype._decode._decode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_decode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_decode = function (mime, value) {
  if (!this._opts.decoders[mime]) {
    throw errors.Codec('unknown decoder: ' + mime);
  }

  try {
    return this._opts.decoders[mime](value);
  } catch (err) {
    err.message = 'decode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._delete" id="apidoc.module.consul.super_.prototype._delete">module consul.super_.prototype._delete</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._delete._delete" id="apidoc.element.consul.super_.prototype._delete._delete">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_delete
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_delete = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.recurse) req.query.recurse = 'true';

  if (opts.hasOwnProperty('cas')) req.query.cas = opts.cas;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_delete</span>(req, utils.empty, callback);
};

Kv.meta.delete = { type: 'alias' };

Kv.prototype.delete = Kv.prototype.del;

/**
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._encode" id="apidoc.module.consul.super_.prototype._encode">module consul.super_.prototype._encode</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._encode._encode" id="apidoc.element.consul.super_.prototype._encode._encode">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_encode
        <span class="apidocSignatureSpan">(mime, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_encode = function (mime, value) {
  if (!this._opts.encoders[mime]) {
    throw errors.Codec('unknown encoder: ' + mime);
  }

  try {
    return this._opts.encoders[mime](value);
  } catch (err) {
    err.message = 'encode (' + mime + ') failed: ' + err.message;
    throw errors.Codec(err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._err" id="apidoc.module.consul.super_.prototype._err">module consul.super_.prototype._err</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._err._err" id="apidoc.element.consul.super_.prototype._err._err">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_err
        <span class="apidocSignatureSpan">(err, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_err = function (err, opts) {
  if (!err) return err;

  if (!(err instanceof Error)) err = new Error(err);

  if (opts &amp;&amp; opts.name) {
    err.message = util.format('%s: %s', opts.name, err.message);
  }

  if (this._opts.name) {
    err.message = util.format('%s: %s', this._opts.name, err.message);
  }

  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  path: '/acl/update',
  query: {},
  type: 'json',
  body: {},
};

if (!opts.id) {
  return callback(this.consul.<span class="apidocCodeKeywordSpan">_err</span>(errors.Validation('id required'), req));
}

req.body.ID = opts.id;

if (opts.name) req.body.Name = opts.name;
if (opts.type) req.body.Type = opts.type;
if (opts.rules) req.body.Rules = opts.rules;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._ext" id="apidoc.module.consul.super_.prototype._ext">module consul.super_.prototype._ext</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._ext._ext" id="apidoc.element.consul.super_.prototype._ext._ext">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_ext
        <span class="apidocSignatureSpan">(eventName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_ext = function (eventName, callback) {
  if (!eventName || typeof eventName !== 'string') {
    throw this._err(errors.Validation('extension eventName required'));
  }

  if (typeof callback !== 'function') {
    throw this._err(errors.Validation('extension callback required'));
  }

  if (!this._exts[eventName]) this._exts[eventName] = [];

  this._exts[eventName].push(callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._get" id="apidoc.module.consul.super_.prototype._get">module consul.super_.prototype._get</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._get._get" id="apidoc.element.consul.super_.prototype._get._get">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_get
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_get = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 if (!opts.id) {
   return callback(this.consul._err(errors.Validation('id required'), req));
 }

 utils.options(req, opts);

 this.consul.<span class="apidocCodeKeywordSpan">_get</span>(req, utils.bodyItem, callback);
};

Acl.prototype.get = Acl.prototype.info;

/**
* Creates a new token by cloning an existing token
*/
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._head" id="apidoc.module.consul.super_.prototype._head">module consul.super_.prototype._head</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._head._head" id="apidoc.element.consul.super_.prototype._head._head">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_head
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_head = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._log" id="apidoc.module.consul.super_.prototype._log">module consul.super_.prototype._log</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._log._log" id="apidoc.element.consul.super_.prototype._log._log">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_log
        <span class="apidocSignatureSpan">(tags, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_log = function (tags, data) {
  return this.emit('log', tags, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._options" id="apidoc.module.consul.super_.prototype._options">module consul.super_.prototype._options</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._options._options" id="apidoc.element.consul.super_.prototype._options._options">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_options
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_options = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._patch" id="apidoc.module.consul.super_.prototype._patch">module consul.super_.prototype._patch</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._patch._patch" id="apidoc.element.consul.super_.prototype._patch._patch">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_patch
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_patch = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._plugin" id="apidoc.module.consul.super_.prototype._plugin">module consul.super_.prototype._plugin</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._plugin._plugin" id="apidoc.element.consul.super_.prototype._plugin._plugin">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_plugin
        <span class="apidocSignatureSpan">(plugin, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_plugin = function (plugin, options) {
  if (!plugin) {
    throw this._err(errors.Validation('plugin required'));
  }

  if (typeof plugin.register !== 'function') {
    throw this._err(errors.Validation('plugin must have register function'));
  }

  var attributes = plugin.register.attributes;

  if (!attributes) {
    throw this._err(errors.Validation('plugin attributes required'));
  }

  if (!attributes.name) {
    throw this._err(errors.Validation('plugin attributes name required'));
  }

  if (!attributes.version) {
    throw this._err(errors.Validation('plugin attributes version required'));
  }

  return plugin.register(this, options || {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._post" id="apidoc.module.consul.super_.prototype._post">module consul.super_.prototype._post</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._post._post" id="apidoc.element.consul.super_.prototype._post._post">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_post
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_post = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  } catch (err) {
    return callback(this.consul._err(err, req));
  }

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_post</span>(req, utils.body, callback);
};

/**
 * Gets a given query
 */

Query.prototype.get = function(opts, callback) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._put" id="apidoc.module.consul.super_.prototype._put">module consul.super_.prototype._put</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._put._put" id="apidoc.element.consul.super_.prototype._put._put">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_put
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_put = function (opts) {
  var args;

  if (typeof opts === 'string') {
    opts = { path: opts, method: reqMethod };

    args = Array.prototype.slice.call(arguments);
    args[0] = opts;

    return this._request.apply(this, args);
  } else if (!opts) {
    args = Array.prototype.slice.call(arguments);
    args[0] = {};

    return this._request.apply(this, args);
  }

  opts.method = reqMethod;

  return this._request.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (opts.name) req.body.Name = opts.name;
  if (opts.type) req.body.Type = opts.type;
  if (opts.rules) req.body.Rules = opts.rules;

  utils.options(req, opts);

  this.consul.<span class="apidocCodeKeywordSpan">_put</span>(req, utils.body, callback);
};

/**
 * Update the policy of a token
 */

Acl.prototype.update = function(opts, callback) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.super_.prototype._request" id="apidoc.module.consul.super_.prototype._request">module consul.super_.prototype._request</a></h1>


    <h2>
        <a href="#apidoc.element.consul.super_.prototype._request._request" id="apidoc.element.consul.super_.prototype._request._request">
        function <span class="apidocSignatureSpan">consul.super_.prototype.</span>_request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_request = function (opts) {
  var self = this;

  var request;

  if (this.__request) {
    request = this.__request;
    opts = request.opts;
    self = request._client;
  } else {
    request = {
      _args: Array.prototype.slice.call(arguments),
      _client: this,
      opts: opts,
      state: {},
    };

    if (!opts) opts = request.opts = {};

    if (request._args.length &gt; 1) {
      request._callback = request._args[request._args.length - 1];
    } else {
      return self.emit('error', self._err(
        errors.Validation('callback required'), opts));
    }

    // if ctx is an event emitter we use it to abort requests when done is
    // emitted
    if (opts.ctx instanceof events.EventEmitter) {
      request.ctx = opts.ctx;
    }

    // combine global and request tags
    opts.tags = (opts.tags || []).concat(self._opts.tags);

    // inject request name into tags if not already defined
    if (opts.name &amp;&amp; !~opts.tags.indexOf(opts.name)) {
      opts.tags.push(opts.name);
    }

    if (!opts.headers) opts.headers = {};
    if (!opts.params) opts.params = {};
    if (!opts.query) opts.query = {};

    // restart request
    request.retry = function() {
      if (request._retryable === false) {
        throw errors.Validation('request is not retryable');
      }

      self._log(['papi', 'request', 'retry'].concat(request.opts.tags));

      delete request.body;
      delete request.err;
      delete request.req;
      delete request.res;
      delete request.transport;

      self._request.call({ __request: request });
    };

    request._stack = [];

    self.__push(request, 'onCreate');

    request._stack.push(self.__create);

    self.__push(request, 'onRequest');

    request._stack.push(self.__execute);

    self.__push(request, 'onResponse');

    request._stack.push.apply(
      request._stack,
      request._args.slice(1, request._args.length - 1)
    );
  }

  var i = 0;
  function next(err) {
    if (err) return request._callback(self._err(err, opts));

    // middlware can call next(false, args...) to stop middleware
    if (err === false) {
      return request._callback.apply(null,
        Array.prototype.slice.call(arguments, 1));
    }

    var fn = request._stack[i++];
    if (fn) {
      fn.call(self, request, next);
    } else {
      request._callback.call(self, self._err(request.err, opts), request.res);
    }
  }

  next();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.toString" id="apidoc.module.consul.toString">module consul.toString</a></h1>


    <h2>
        <a href="#apidoc.element.consul.toString.toString" id="apidoc.element.consul.toString.toString">
        function <span class="apidocSignatureSpan">consul.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
* Decode value
*/

function decode(value, opts) {
 if (typeof value !== 'string') return value;
 value = new Buffer(value, 'base64');
 if (!opts || !opts.buffer) value = value.<span class="apidocCodeKeywordSpan">toString</span>();
 return value;
}

/**
* Shallow clone
*/
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.utils" id="apidoc.module.consul.utils">module consul.utils</a></h1>


    <h2>
        <a href="#apidoc.element.consul.utils.body" id="apidoc.element.consul.utils.body">
        function <span class="apidocSignatureSpan">consul.utils.</span>body
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function body(request, next) {
  if (request.err) return next(false, request.err, undefined, request.res);

  next(false, undefined, request.res.body, request.res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.bodyItem" id="apidoc.element.consul.utils.bodyItem">
        function <span class="apidocSignatureSpan">consul.utils.</span>bodyItem
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function bodyItem(request, next) {
  if (request.err) return next(false, request.err, undefined, request.res);

  if (request.res.body &amp;&amp; request.res.body.length) {
    return next(false, undefined, request.res.body[0], request.res);
  }

  next(false, undefined, undefined, request.res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.clone" id="apidoc.element.consul.utils.clone">
        function <span class="apidocSignatureSpan">consul.utils.</span>clone
        <span class="apidocSignatureSpan">(src)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(src) {
  var dst = {};

  for (var key in src) {
    if (src.hasOwnProperty(key)) {
      dst[key] = src[key];
    }
  }

  return dst;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 "Name": "Read only",
 "Type": "client",
 "Rules": "{\"key\":{\"\":{\"policy\":\"read\"}}}"
}
```

&lt;a name="acl-clone"&gt;&lt;/a&gt;
### consul.acl.<span class="apidocCodeKeywordSpan">clone</span>(options, callback)

Creates a new token by cloning an existing token.

Options

* id (String): token ID
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.createCheck" id="apidoc.element.consul.utils.createCheck">
        function <span class="apidocSignatureSpan">consul.utils.</span>createCheck
        <span class="apidocSignatureSpan">(src)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createCheck(src) {
  src = normalizeKeys(src);

  var dst = _createServiceCheck(src);

  if (src.name) {
    dst.Name = src.name;
  } else {
    throw new Error('name required');
  }

  if (src.hasOwnProperty('id')) dst.ID = src.id;
  if (src.hasOwnProperty('serviceid')) dst.ServiceID = src.serviceid;

  return dst;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.createServiceCheck" id="apidoc.element.consul.utils.createServiceCheck">
        function <span class="apidocSignatureSpan">consul.utils.</span>createServiceCheck
        <span class="apidocSignatureSpan">(src)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createServiceCheck(src) {
  return _createServiceCheck(normalizeKeys(src));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.decode" id="apidoc.element.consul.utils.decode">
        function <span class="apidocSignatureSpan">consul.utils.</span>decode
        <span class="apidocSignatureSpan">(value, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function decode(value, opts) {
  if (typeof value !== 'string') return value;
  value = new Buffer(value, 'base64');
  if (!opts || !opts.buffer) value = value.toString();
  return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  utils.options(req, opts);

  this.consul._put(req, utils.body, function(err, data, res) {
    if (err) return callback(err, undefined, res);

    if (data.hasOwnProperty('Payload')) {
      data.Payload = utils.<span class="apidocCodeKeywordSpan">decode</span>(data.Payload, { buffer: buffer });
    }

    callback(null, data, res);
  });
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.defaults" id="apidoc.element.consul.utils.defaults">
        function <span class="apidocSignatureSpan">consul.utils.</span>defaults
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function defaults(obj) {
  if (!obj) obj = {};

  var src;
  for (var i = 0; i &lt; arguments.length; i++) {
    src = arguments[i];
    for (var p in src) {
      if (src.hasOwnProperty(p) &amp;&amp; !obj.hasOwnProperty(p)) {
        obj[p] = src[p];
      }
    }
  }

  return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Acl.prototype.create = function(opts, callback) {
if (!callback) {
  callback = opts;
  opts = {};
}

opts = utils.normalizeKeys(opts);
opts = utils.<span class="apidocCodeKeywordSpan">defaults</span>(opts, this.consul._defaults);

var req = {
  name: 'acl.create',
  path: '/acl/create',
  query: {},
  type: 'json',
  body: {},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.empty" id="apidoc.element.consul.utils.empty">
        function <span class="apidocSignatureSpan">consul.utils.</span>empty
        <span class="apidocSignatureSpan">(request, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function empty(request, next) {
  if (request.err) return next(false, request.err, undefined, request.res);

  next(false, undefined, undefined, request.res);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.hasIndexChanged" id="apidoc.element.consul.utils.hasIndexChanged">
        function <span class="apidocSignatureSpan">consul.utils.</span>hasIndexChanged
        <span class="apidocSignatureSpan">(index, prevIndex)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hasIndexChanged(index, prevIndex) {
  if (typeof index !== 'string' || !index) return false;
  if (typeof prevIndex !== 'string' || !prevIndex) return true;
  return index !== prevIndex;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // compatible
  if (data.Flags !== +LOCK_FLAG_VALUE) {
    err = errors.Validation('consul: lock: existing key does not match lock use');
    return self._end(ctx, err, res);
  }

  var newIndex = res.headers['x-consul-index'];
  if (utils.<span class="apidocCodeKeywordSpan">hasIndexChanged</span>(newIndex, ctx.index)) ctx.index = newIndex;

  if (data.Session !== ctx.Session) {
    self.emit('retry', { leader: data.Session });
    return retry();
  }
} else if (res.statusCode !== 404) {
  return self._end(ctx, new Error('consul: lock: error getting key'), res);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.normalizeKeys" id="apidoc.element.consul.utils.normalizeKeys">
        function <span class="apidocSignatureSpan">consul.utils.</span>normalizeKeys
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeKeys(obj) {
  var result = {};

  if (obj) {
    for (var name in obj) {
      if (obj.hasOwnProperty(name)) {
        result[name.replace(/_/g, '').toLowerCase()] = obj[name];
      }
    }
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Acl.prototype.create = function(opts, callback) {
if (!callback) {
  callback = opts;
  opts = {};
}

opts = utils.<span class="apidocCodeKeywordSpan">normalizeKeys</span>(opts);
opts = utils.defaults(opts, this.consul._defaults);

var req = {
  name: 'acl.create',
  path: '/acl/create',
  query: {},
  type: 'json',
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.options" id="apidoc.element.consul.utils.options">
        function <span class="apidocSignatureSpan">consul.utils.</span>options
        <span class="apidocSignatureSpan">(req, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function options(req, opts) {
  if (!opts) opts = {};

  if (!req.query) req.query = {};

  if (opts.dc) req.query.dc = opts.dc;
  if (opts.wan) req.query.wan = '1';

  if (opts.consistent) {
    req.query.consistent = '1';
  } else if (opts.stale) {
    req.query.stale = '1';
  }

  if (opts.hasOwnProperty('index')) req.query.index = opts.index;
  if (opts.hasOwnProperty('wait')) req.query.wait = opts.wait;
  if (opts.hasOwnProperty('token')) req.query.token = opts.token;

  // papi
  if (opts.hasOwnProperty('ctx')) req.ctx = opts.ctx;
  if (opts.hasOwnProperty('timeout')) req.timeout = opts.timeout;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   body: {},
 };

 if (opts.name) req.body.Name = opts.name;
 if (opts.type) req.body.Type = opts.type;
 if (opts.rules) req.body.Rules = opts.rules;

 utils.<span class="apidocCodeKeywordSpan">options</span>(req, opts);

 this.consul._put(req, utils.body, callback);
};

/**
* Update the policy of a token
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.parseDuration" id="apidoc.element.consul.utils.parseDuration">
        function <span class="apidocSignatureSpan">consul.utils.</span>parseDuration
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseDuration(value) {
  if (typeof value === 'number') return value / 1e6;
  if (typeof value !== 'string') return;

  var n;
  var m = value.match(/^(\d*\.?\d*)$/);

  if (m) {
    n = parseFloat(m[1]);

    if (!isNaN(n)) return n / 1e6;
  }

  m = value.match(/^([\d\.]*)(ns|us|ms|s|m|h)$/);

  if (!m) return;

  n = parseFloat(m[1]);

  if (isNaN(n)) return;

  return n * constants.DURATION_UNITS[m[2]] / 1e6;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ctx = self._ctx = new events.EventEmitter();

ctx.key = self._opts.key;
ctx.session = utils.clone(self._opts.session);
ctx.index = '0';
ctx.end = false;
ctx.lockWaitTime = self._opts.lockwaittime || DEFAULT_LOCK_WAIT_TIME;
ctx.lockWaitTimeout = utils.<span class="apidocCodeKeywordSpan">parseDuration</span>(ctx.lockWaitTime) + 1000;
ctx.lockRetryTime = utils.parseDuration(self._opts.lockretrytime || DEFAULT_LOCK_RETRY_TIME);
ctx.state = 'session';
ctx.value = self._opts.value || null;

process.nextTick(function() {
  self._run(ctx);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.parseQueryMeta" id="apidoc.element.consul.utils.parseQueryMeta">
        function <span class="apidocSignatureSpan">consul.utils.</span>parseQueryMeta
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseQueryMeta(res) {
  var meta = {};

  if (res &amp;&amp; res.headers) {
    if (res.headers['x-consul-index']) {
      meta.LastIndex = res.headers['x-consul-index'];
    }
    if (res.headers['x-consul-lastcontact']) {
      meta.LastContact = parseInt(res.headers['x-consul-lastcontact'], 10);
    }
    if (res.headers['x-consul-knownleader']) {
      meta.KnownLeader = res.headers['x-consul-knownleader'] === 'true';
    }
    if (res.headers['x-consul-translate-addresses']) {
      meta.AddressTranslationEnabled = res.headers['x-consul-translate-addresses'] === 'true';
    }
  }

  return meta;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: 'sync' };

Consul.parseQueryMeta = Consul.prototype.parseQueryMeta = function(res) {
  return utils.<span class="apidocCodeKeywordSpan">parseQueryMeta</span>(res);
};

/**
 * Module exports.
 */

exports.Consul = Consul;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.setIntervalContext" id="apidoc.element.consul.utils.setIntervalContext">
        function <span class="apidocSignatureSpan">consul.utils.</span>setIntervalContext
        <span class="apidocSignatureSpan">(fn, ctx, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setIntervalContext(fn, ctx, timeout) {
  var id;

  var cancel = function() {
    clearInterval(id);
  };

  id = setInterval(function() { fn(); }, timeout);

  ctx.once('cancel', cancel);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }, self.consul._defaults),
});

var ttl = ctx.session.ttl &amp;&amp; utils.parseDuration(ctx.session.ttl);

// monitor updates
if (ttl) {
  utils.<span class="apidocCodeKeywordSpan">setIntervalContext</span>(function() {
    var time = monitor.updateTime();

    if (time &amp;&amp; new Date() - time &gt; ttl + 1000) {
      monitor.end();
    }
  }, ctx, Math.min(1000, ttl));
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.consul.utils.setTimeoutContext" id="apidoc.element.consul.utils.setTimeoutContext">
        function <span class="apidocSignatureSpan">consul.utils.</span>setTimeoutContext
        <span class="apidocSignatureSpan">(fn, ctx, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setTimeoutContext(fn, ctx, timeout) {
  var id;

  var cancel = function() {
    clearTimeout(id);
  };

  id = setTimeout(function() {
    ctx.removeListener('cancel', cancel);

    fn();
  }, timeout);

  ctx.once('cancel', cancel);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Wait for non-locked resource
 */

Lock.prototype._wait = function(ctx) {
var self = this;

var retry = function() {
  utils.<span class="apidocCodeKeywordSpan">setTimeoutContext</span>(function() {
    self._run(ctx);
  }, ctx, ctx.lockRetryTime);
};

var opts = utils.defaults({
  key: ctx.key,
  wait: ctx.lockWaitTime,
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.walk" id="apidoc.module.consul.walk">module consul.walk</a></h1>


    <h2>
        <a href="#apidoc.element.consul.walk.walk" id="apidoc.element.consul.walk.walk">
        function <span class="apidocSignatureSpan">consul.</span>walk
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">walk = function () {
  return papi.tools.walk(Consul);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Walk methods
 */

Consul.meta.walk = { type: 'sync' };

Consul.walk = Consul.prototype.walk = function() {
  return papi.tools.<span class="apidocCodeKeywordSpan">walk</span>(Consul);
};

/**
 * Parse query meta
 */

Consul.meta.parseQueryMeta = { type: 'sync' };
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.consul.watch" id="apidoc.module.consul.watch">module consul.watch</a></h1>


    <h2>
        <a href="#apidoc.element.consul.watch.Watch" id="apidoc.element.consul.watch.Watch">
        function <span class="apidocSignatureSpan">consul.watch.</span>Watch
        <span class="apidocSignatureSpan">(consul, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watch(consul, opts) {
  var self = this;

  events.EventEmitter.call(self);

  opts = utils.normalizeKeys(opts);

  var options = utils.normalizeKeys(opts.options || {});
  options = utils.defaults(options, consul._defaults);
  options.wait = options.wait || '30s';
  options.index = options.index || '0';

  self._context = { consul: consul };
  self._options = options;
  self._attempts = 0;
  self._method = opts.method;

  if (typeof opts.method !== 'function') {
    throw errors.Validation('method required');
  }

  process.nextTick(function() { self._run(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Watch helper.
 */

Consul.meta.watch = { type: 'eventemitter' };

Consul.prototype.watch = function(opts) {
  return new Consul.<span class="apidocCodeKeywordSpan">Watch</span>(this, opts);
};

/**
 * Walk methods
 */

Consul.meta.walk = { type: 'sync' };
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>